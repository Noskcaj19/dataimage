parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"uuHZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t={getBit:function(t){return this.data[i(t)]&1<<e(t)?1:0},setBit:function(t){this.data[i(t)]|=1<<e(t)},clearBit:function(t){this.data[i(t)]&=~(1<<e(t))},toggleBit:function(t){this.data[i(t)]^=1<<e(t)},getBitXY:function(t,i){return this.getBit(i*this.width+t)},setBitXY:function(t,i){this.setBit(i*this.width+t)},clearBitXY:function(t,i){this.clearBit(i*this.width+t)},toggleBitXY:function(t,i){this.toggleBit(i*this.width+t)}};function i(t){return t>>3}function e(t){return 7-(7&t)}function n(i){for(var e in t)i.prototype[e]=t[e]}
},{}],"PbRW":[function(require,module,exports) {
"use strict";function e(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.bitDepth,o=r.alpha,n=r.colorModel,s=r.components,a=r.channels;if("string"!=typeof e||0===e.length)throw new TypeError("processName must be a string");if(i&&(Array.isArray(i)||(i=[i]),!i.includes(this.bitDepth)))throw new TypeError("The process: "+e+" can only be applied if bit depth is in: "+i);if(o&&(Array.isArray(o)||(o=[o]),!o.includes(this.alpha)))throw new TypeError("The process: "+e+" can only be applied if alpha is in: "+o);if(n&&(Array.isArray(n)||(n=[n]),!n.includes(this.colorModel)))throw new TypeError("The process: "+e+" can only be applied if color model is in: "+n);if(s&&(Array.isArray(s)||(s=[s]),!s.includes(this.components))){var t="The process: "+e+" can only be applied if the number of components is in: "+s;throw 1===s.length&&1===s[0]?new TypeError(t+'.\rYou should transform your image using "image.grey()" before applying the algorithm.'):new TypeError(t)}if(a&&(Array.isArray(a)||(a=[a]),!a.includes(this.channels)))throw new TypeError("The process: "+e+" can only be applied if the number of channels is in: "+a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"LDmX":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),n=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=t&&t.prototype.append&&t.prototype.getBlob;function u(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}e[t]=n}}}function b(e,r){r=r||{};var n=new t;u(e);for(var o=0;o<e.length;o++)n.append(e[o]);return r.type?n.getBlob(r.type):n.getBlob()}function f(e,t){return u(e),new Blob(e,t||{})}module.exports=r?n?e.Blob:f:o?b:void 0;
},{}],"uUPe":[function(require,module,exports) {
var global = arguments[3];
var e,t,n=arguments[3],a=n.MutationObserver||n.WebKitMutationObserver;if(a){var o=0,r=new a(u),s=n.document.createTextNode("");r.observe(s,{characterData:!0}),e=function(){s.data=o=++o%2}}else if(n.setImmediate||void 0===n.MessageChannel)e="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var e=n.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},n.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new n.MessageChannel;c.port1.onmessage=u,e=function(){c.port2.postMessage(0)}}var i=[];function u(){var e,n;t=!0;for(var a=i.length;a;){for(n=i,i=[],e=-1;++e<a;)n[e]();a=i.length}t=!1}function d(n){1!==i.push(n)||t||e()}module.exports=d;
},{}],"xz3w":[function(require,module,exports) {
"use strict";var t=require("immediate");function e(){}var r={},n=["REJECTED"],o=["FULFILLED"],i=["PENDING"];function u(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=i,this.queue=[],this.outcome=void 0,t!==e&&f(this,t)}function c(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function s(e,n,o){t(function(){var t;try{t=n(o)}catch(t){return r.reject(e,t)}t===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,t)})}function l(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function o(e){n||(n=!0,r.reject(t,e))}function i(e){n||(n=!0,r.resolve(t,e))}var u=a(function(){e(i,o)});"error"===u.status&&o(u.value)}function a(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}function h(t){return t instanceof this?t:r.resolve(new this(e),t)}function v(t){var n=new this(e);return r.reject(n,t)}function p(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var u=new Array(o),c=0,s=-1,l=new this(e);++s<o;)f(t[s],s);return l;function f(t,e){n.resolve(t).then(function(t){u[e]=t,++c!==o||i||(i=!0,r.resolve(l,u))},function(t){i||(i=!0,r.reject(l,t))})}}function y(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var u,c=-1,s=new this(e);++c<o;)u=t[c],n.resolve(u).then(function(t){i||(i=!0,r.resolve(s,t))},function(t){i||(i=!0,r.reject(s,t))});return s}module.exports=u,u.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){throw r})})},u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,r){if("function"!=typeof t&&this.state===o||"function"!=typeof r&&this.state===n)return this;var u=new this.constructor(e);this.state!==i?s(u,this.state===o?t:r,this.outcome):this.queue.push(new c(u,t,r));return u},c.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){r.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)},r.resolve=function(t,e){var n=a(l,e);if("error"===n.status)return r.reject(t,n.value);var i=n.value;if(i)f(t,i);else{t.state=o,t.outcome=e;for(var u=-1,c=t.queue.length;++u<c;)t.queue[u].callFulfilled(e)}return t},r.reject=function(t,e){t.state=n,t.outcome=e;for(var r=-1,o=t.queue.length;++r<o;)t.queue[r].callRejected(e);return t},u.resolve=h,u.reject=v,u.all=p,u.race=y;
},{"immediate":"uUPe"}],"2Yy1":[function(require,module,exports) {
module.exports="function"==typeof Promise?Promise:require("lie");
},{"lie":"xz3w"}],"Pb9L":[function(require,module,exports) {
"use strict";var n=require("blob"),r=require("native-or-lie");function t(n){for(var r=n.length,t=new ArrayBuffer(r),e=new Uint8Array(t),o=-1;++o<r;)e[o]=n.charCodeAt(o);return t}function e(n){for(var r="",t=new Uint8Array(n),e=t.byteLength,o=-1;++o<e;)r+=String.fromCharCode(t[o]);return r}function o(n,t){return new r(function(r,e){var o=new Image;t&&(o.crossOrigin=t),o.onload=function(){r(o)},o.onerror=e,o.src=n})}function u(n){var r=document.createElement("canvas");return r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,n.width,n.height),r}function i(r,t){return"string"==typeof(t=t||{})&&(t={type:t}),new n(r,t)}function a(n){return(window.URL||window.webkitURL).createObjectURL(n)}function c(n){return(window.URL||window.webkitURL).revokeObjectURL(n)}function f(n){return new r(function(r,t){var o=new FileReader,u="function"==typeof o.readAsBinaryString;o.onloadend=function(n){var t=n.target.result||"";if(u)return r(t);r(e(t))},o.onerror=t,u?o.readAsBinaryString(n):o.readAsArrayBuffer(n)})}function b(n,e){return r.resolve().then(function(){var r=[t(atob(n))];return e?i(r,{type:e}):i(r)})}function l(n,t){return r.resolve().then(function(){return b(btoa(n),t)})}function d(n){return f(n).then(function(n){return btoa(n)})}function h(n){return r.resolve().then(function(){var r=n.match(/data:([^;]+)/)[1],e=n.replace(/^[^,]+,/,"");return i([t(atob(e))],{type:r})})}function w(n){return d(n).then(function(r){return"data:"+n.type+";base64,"+r})}function g(n,r,t,e){return r=r||"image/png",o(n,t).then(function(n){return u(n)}).then(function(n){return n.toDataURL(r,e)})}function s(n,t,e){return r.resolve().then(function(){return"function"==typeof n.toBlob?new r(function(r){n.toBlob(r,t,e)}):h(n.toDataURL(t,e))})}function v(n,r,t,e){return r=r||"image/png",o(n,t).then(function(n){return u(n)}).then(function(n){return s(n,r,e)})}function y(n,t){return r.resolve().then(function(){return i([n],t)})}function B(n){return new r(function(r,t){var e=new FileReader;e.onloadend=function(n){var t=n.target.result||new ArrayBuffer(0);r(t)},e.onerror=t,e.readAsArrayBuffer(n)})}module.exports={createBlob:i,createObjectURL:a,revokeObjectURL:c,imgSrcToBlob:v,imgSrcToDataURL:g,canvasToBlob:s,dataURLToBlob:h,blobToDataURL:w,blobToBase64String:d,base64StringToBlob:b,binaryStringToBlob:l,blobToBinaryString:f,arrayBufferToBlob:y,blobToArrayBuffer:B};
},{"blob":"LDmX","native-or-lie":"2Yy1"}],"OBrI":[function(require,module,exports) {
var global = arguments[3];
var define;
var r,t=arguments[3];!function(n){var o="object"==typeof exports&&exports,e="object"==typeof module&&module&&module.exports==o&&module,i="object"==typeof t&&t;i.global!==i&&i.window!==i||(n=i);var u,f,a,c=String.fromCharCode;function d(r){for(var t,n,o=[],e=0,i=r.length;e<i;)(t=r.charCodeAt(e++))>=55296&&t<=56319&&e<i?56320==(64512&(n=r.charCodeAt(e++)))?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),e--):o.push(t);return o}function l(r){if(r>=55296&&r<=57343)throw Error("Lone surrogate U+"+r.toString(16).toUpperCase()+" is not a scalar value")}function v(r,t){return c(r>>t&63|128)}function h(r){if(0==(4294967168&r))return c(r);var t="";return 0==(4294965248&r)?t=c(r>>6&31|192):0==(4294901760&r)?(l(r),t=c(r>>12&15|224),t+=v(r,6)):0==(4292870144&r)&&(t=c(r>>18&7|240),t+=v(r,12),t+=v(r,6)),t+=c(63&r|128)}function s(){if(a>=f)throw Error("Invalid byte index");var r=255&u[a];if(a++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}function p(){var r,t;if(a>f)throw Error("Invalid byte index");if(a==f)return!1;if(r=255&u[a],a++,0==(128&r))return r;if(192==(224&r)){if((t=(31&r)<<6|s())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&r)){if((t=(15&r)<<12|s()<<6|s())>=2048)return l(t),t;throw Error("Invalid continuation byte")}if(240==(248&r)&&(t=(7&r)<<18|s()<<12|s()<<6|s())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var y={version:"2.1.2",encode:function(r){for(var t=d(r),n=t.length,o=-1,e="";++o<n;)e+=h(t[o]);return e},decode:function(r){u=d(r),f=u.length,a=0;for(var t,n=[];!1!==(t=p());)n.push(t);return function(r){for(var t,n=r.length,o=-1,e="";++o<n;)(t=r[o])>65535&&(e+=c((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=c(t);return e}(n)}};if("function"==typeof r&&"object"==typeof r.amd&&r.amd)r(function(){return y});else if(o&&!o.nodeType)if(e)e.exports=y;else{var b={}.hasOwnProperty;for(var w in y)b.call(y,w)&&(o[w]=y[w])}else n.utf8=y}(this);
},{}],"FV5C":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){for(var n,o=h(r),a=o[0],u=o[1],i=new e(c(r,a,u)),f=0,A=u>0?a-4:a,d=0;d<A;d+=4)n=t[r.charCodeAt(d)]<<18|t[r.charCodeAt(d+1)]<<12|t[r.charCodeAt(d+2)]<<6|t[r.charCodeAt(d+3)],i[f++]=n>>16&255,i[f++]=n>>8&255,i[f++]=255&n;return 2===u&&(n=t[r.charCodeAt(d)]<<2|t[r.charCodeAt(d+1)]>>4,i[f++]=255&n),1===u&&(n=t[r.charCodeAt(d)]<<10|t[r.charCodeAt(d+1)]<<4|t[r.charCodeAt(d+2)]>>2,i[f++]=n>>8&255,i[f++]=255&n),i}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"nwk8":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"5s1c":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"a+bp":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"FV5C","ieee754":"nwk8","isarray":"5s1c","buffer":"a+bp"}],"ZdsI":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var t=require("buffer").Buffer;const e=require("utf8"),i=8192,s=[];class r{constructor(t,e){e=e||{};var s=!1;void 0===t&&(t=i),"number"==typeof t?t=new ArrayBuffer(t):(s=!0,this._lastWrittenByte=t.byteLength);const r=e.offset?e.offset>>>0:0;let a=t.byteLength-r,n=r;t.buffer&&(t.byteLength!==t.buffer.byteLength&&(n=t.byteOffset+r),t=t.buffer),this._lastWrittenByte=s?a:0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=n,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,n,a),this._mark=0,this._marks=[]}available(t){return void 0===t&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t){return void 0===t&&(t=1),this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t){if(void 0===t&&(t=1),!this.available(t)){const e=2*(this.offset+t),i=new Uint8Array(e);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),i=0;i<t;i++)e[i]=this.readByte();return e}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){void 0===t&&(t=1),s.length=t;for(var e=0;e<t;e++)s[e]=this.readChar();return s.join("")}readUtf8(t){void 0===t&&(t=1);const i=this.readChars(t);return e.decode(i)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){const i=e.encode(t);return this.writeChars(i)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}getBuffer(){return void 0!==t?t.from(this.toArray()):this.toArray()}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}module.exports=r;
},{"utf8":"OBrI","buffer":"a+bp"}],"XT5w":[function(require,module,exports) {
"use strict";module.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}};
},{}],"zY5u":[function(require,module,exports) {
"use strict";const t=require("iobuffer"),i=require("./constants"),e=[];for(var r=0;r<=8;r++)e.push(255<<r);function n(i,r){const n=4*Math.floor((r.bitDepth*r.width+31)/32),w=Math.ceil(r.bitDepth*r.width/8),o=n-w,h=r.bitDepth*r.width%8,s=0===h?0:8-h,p=n*r.height;var a,U;const c=new t(r.data);let f=0,d=0,u=8;i.mark(),U=c.readUint8();for(var D=r.height-1;D>=0;D--){const t=0===D;i.reset(),i.skip(D*n);for(var B=0;B<w;B++){const r=B===w-1;d<=s&&r?(i.writeByte(U<<d),0!==s&&s!==d||t||(a=U,U=c.readByte())):0===d?(a=U,U=c.readUint8(),i.writeByte(a)):(a=U,U=c.readUint8(),i.writeByte(a<<d&e[d]|U>>u)),r?(f+=h||8,i.skip(o),u=8-(d=f%8)):f+=8}}n>w&&(i.reset(),i.skip(p-1),i.writeUint8(0))}function w(t,i){i.bitDepth>8||t.writeUint32(0).writeUint32(16777215)}function o(t,i){t.writeChars("BM"),t.writeInt32(t._lastWrittenByte),t.writeUint16(0),t.writeUint16(0),t.writeUint32(i)}function h(t,e){t.writeUint32(124).writeInt32(e.width).writeInt32(e.height).writeUint16(1).writeUint16(e.bitDepth).writeUint32(i.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(e.width*e.height*e.bitDepth).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,e.bitDepth)).writeUint32(Math.pow(2,e.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(i.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(i.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}module.exports=function(i){if(1!==i.bitDepth)throw new Error("Only bitDepth of 1 is supported");if(!i.height||!i.width)throw new Error("ImageData width and height are required");if(1!==i.components)throw new Error("Only 1 component is supported");if(1!==i.channels)throw new Error("Only 1 channel is supported");var e=new t;e.skip(14),h(e,i),w(e,i);const r=e.offset;return n(e,i),e.rewind(),o(e,r),e.getBuffer()};
},{"iobuffer":"ZdsI","./constants":"XT5w"}],"clWY":[function(require,module,exports) {
"use strict";exports.encode=require("./encode");
},{"./encode":"zY5u"}],"tbG5":[function(require,module,exports) {
"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function t(r,t){return Object.prototype.hasOwnProperty.call(r,t)}exports.assign=function(r){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var a in n)t(n,a)&&(r[a]=n[a])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var e={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)r.set(t.subarray(e,e+n),a);else for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},n={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,e)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,n))},exports.setTyped(r);
},{}],"+sRJ":[function(require,module,exports) {
"use strict";var e=require("../utils/common"),t=4,n=0,_=1,r=2;function a(e){for(var t=e.length;--t>=0;)e[t]=0}var i=0,l=1,d=2,f=3,o=258,b=29,s=256,u=s+1+b,c=30,p=19,h=2*u+1,v=15,y=16,x=7,g=256,m=16,w=17,A=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=512,B=new Array(2*(u+2));a(B);var C=new Array(2*c);a(C);var D=new Array(j);a(D);var E=new Array(o-f+1);a(E);var F=new Array(b);a(F);var G,H,I,J=new Array(c);function K(e,t,n,_,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=_,this.max_length=r,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?D[e]:D[256+(e>>>7)]}function N(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function O(e,t,n){e.bi_valid>y-n?(e.bi_buf|=t<<e.bi_valid&65535,N(e,e.bi_buf),e.bi_buf=t>>y-e.bi_valid,e.bi_valid+=n-y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function P(e,t,n){O(e,n[2*t],n[2*t+1])}function Q(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function R(e){16===e.bi_valid?(N(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function T(e,t){var n,_,r,a,i,l,d=t.dyn_tree,f=t.max_code,o=t.stat_desc.static_tree,b=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,c=t.stat_desc.max_length,p=0;for(a=0;a<=v;a++)e.bl_count[a]=0;for(d[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)(a=d[2*d[2*(_=e.heap[n])+1]+1]+1)>c&&(a=c,p++),d[2*_+1]=a,_>f||(e.bl_count[a]++,i=0,_>=u&&(i=s[_-u]),l=d[2*_],e.opt_len+=l*(a+i),b&&(e.static_len+=l*(o[2*_+1]+i)));if(0!==p){do{for(a=c-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[c]--,p-=2}while(p>0);for(a=c;0!==a;a--)for(_=e.bl_count[a];0!==_;)(r=e.heap[--n])>f||(d[2*r+1]!==a&&(e.opt_len+=(a-d[2*r+1])*d[2*r],d[2*r+1]=a),_--)}}function U(e,t,n){var _,r,a=new Array(v+1),i=0;for(_=1;_<=v;_++)a[_]=i=i+n[_-1]<<1;for(r=0;r<=t;r++){var l=e[2*r+1];0!==l&&(e[2*r]=Q(a[l]++,l))}}function V(){var e,t,n,_,r,a=new Array(v+1);for(n=0,_=0;_<b-1;_++)for(F[_]=n,e=0;e<1<<k[_];e++)E[n++]=_;for(E[n-1]=_,r=0,_=0;_<16;_++)for(J[_]=r,e=0;e<1<<q[_];e++)D[r++]=_;for(r>>=7;_<c;_++)for(J[_]=r<<7,e=0;e<1<<q[_]-7;e++)D[256+r++]=_;for(t=0;t<=v;t++)a[t]=0;for(e=0;e<=143;)B[2*e+1]=8,e++,a[8]++;for(;e<=255;)B[2*e+1]=9,e++,a[9]++;for(;e<=279;)B[2*e+1]=7,e++,a[7]++;for(;e<=287;)B[2*e+1]=8,e++,a[8]++;for(U(B,u+1,a),e=0;e<c;e++)C[2*e+1]=5,C[2*e]=Q(e,5);G=new K(B,k,s+1,u,v),H=new K(C,q,0,c,v),I=new K(new Array(0),z,0,p,x)}function W(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<c;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function X(e){e.bi_valid>8?N(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Y(t,n,_,r){X(t),r&&(N(t,_),N(t,~_)),e.arraySet(t.pending_buf,t.window,n,_,t.pending),t.pending+=_}function Z(e,t,n,_){var r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&_[t]<=_[n]}function $(e,t,n){for(var _=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&Z(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Z(t,_,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=_}function ee(e,t,n){var _,r,a,i,l=0;if(0!==e.last_lit)do{_=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],r=e.pending_buf[e.l_buf+l],l++,0===_?P(e,r,t):(P(e,(a=E[r])+s+1,t),0!==(i=k[a])&&O(e,r-=F[a],i),P(e,a=M(--_),n),0!==(i=q[a])&&O(e,_-=J[a],i))}while(l<e.last_lit);P(e,g,t)}function te(e,t){var n,_,r,a=t.dyn_tree,i=t.stat_desc.static_tree,l=t.stat_desc.has_stree,d=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<d;n++)0!==a[2*n]?(e.heap[++e.heap_len]=f=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)a[2*(r=e.heap[++e.heap_len]=f<2?++f:0)]=1,e.depth[r]=0,e.opt_len--,l&&(e.static_len-=i[2*r+1]);for(t.max_code=f,n=e.heap_len>>1;n>=1;n--)$(e,a,n);r=d;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,a,1),_=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=_,a[2*r]=a[2*n]+a[2*_],e.depth[r]=(e.depth[n]>=e.depth[_]?e.depth[n]:e.depth[_])+1,a[2*n+1]=a[2*_+1]=r,e.heap[1]=r++,$(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],T(e,t),U(a,f,e.bl_count)}function ne(e,t,n){var _,r,a=-1,i=t[1],l=0,d=7,f=4;for(0===i&&(d=138,f=3),t[2*(n+1)+1]=65535,_=0;_<=n;_++)r=i,i=t[2*(_+1)+1],++l<d&&r===i||(l<f?e.bl_tree[2*r]+=l:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[2*m]++):l<=10?e.bl_tree[2*w]++:e.bl_tree[2*A]++,l=0,a=r,0===i?(d=138,f=3):r===i?(d=6,f=3):(d=7,f=4))}function _e(e,t,n){var _,r,a=-1,i=t[1],l=0,d=7,f=4;for(0===i&&(d=138,f=3),_=0;_<=n;_++)if(r=i,i=t[2*(_+1)+1],!(++l<d&&r===i)){if(l<f)do{P(e,r,e.bl_tree)}while(0!=--l);else 0!==r?(r!==a&&(P(e,r,e.bl_tree),l--),P(e,m,e.bl_tree),O(e,l-3,2)):l<=10?(P(e,w,e.bl_tree),O(e,l-3,3)):(P(e,A,e.bl_tree),O(e,l-11,7));l=0,a=r,0===i?(d=138,f=3):r===i?(d=6,f=3):(d=7,f=4)}}function re(e){var t;for(ne(e,e.dyn_ltree,e.l_desc.max_code),ne(e,e.dyn_dtree,e.d_desc.max_code),te(e,e.bl_desc),t=p-1;t>=3&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function ae(e,t,n,_){var r;for(O(e,t-257,5),O(e,n-1,5),O(e,_-4,4),r=0;r<_;r++)O(e,e.bl_tree[2*S[r]+1],3);_e(e,e.dyn_ltree,t-1),_e(e,e.dyn_dtree,n-1)}function ie(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return n;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return _;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return _;return n}a(J);var le=!1;function de(e){le||(V(),le=!0),e.l_desc=new L(e.dyn_ltree,G),e.d_desc=new L(e.dyn_dtree,H),e.bl_desc=new L(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,W(e)}function fe(e,t,n,_){O(e,(i<<1)+(_?1:0),3),Y(e,t,n,!0)}function oe(e){O(e,l<<1,3),P(e,g,B),R(e)}function be(e,n,_,a){var i,f,o=0;e.level>0?(e.strm.data_type===r&&(e.strm.data_type=ie(e)),te(e,e.l_desc),te(e,e.d_desc),o=re(e),i=e.opt_len+3+7>>>3,(f=e.static_len+3+7>>>3)<=i&&(i=f)):i=f=_+5,_+4<=i&&-1!==n?fe(e,n,_,a):e.strategy===t||f===i?(O(e,(l<<1)+(a?1:0),3),ee(e,B,C)):(O(e,(d<<1)+(a?1:0),3),ae(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),ee(e,e.dyn_ltree,e.dyn_dtree)),W(e),a&&X(e)}function se(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(E[n]+s+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1}exports._tr_init=de,exports._tr_stored_block=fe,exports._tr_flush_block=be,exports._tr_tally=se,exports._tr_align=oe;
},{"../utils/common":"tbG5"}],"uxo6":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(var u=65535&e|0,i=e>>>16&65535|0,n=0;0!==o;){o-=n=o>2e3?2e3:o;do{i=i+(u=u+r[t++]|0)|0}while(--n);u%=65521,i%=65521}return u|i<<16|0}module.exports=e;
},{}],"X4kj":[function(require,module,exports) {
"use strict";function r(){for(var r,o=[],t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;o[t]=r}return o}var o=r();function t(r,t,n,u){var a=o,e=u+n;r^=-1;for(var f=u;f<e;f++)r=r>>>8^a[255&(r^t[f])];return-1^r}module.exports=t;
},{}],"gMAY":[function(require,module,exports) {
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};
},{}],"+BLB":[function(require,module,exports) {
"use strict";var t,a=require("../utils/common"),e=require("./trees"),s=require("./adler32"),i=require("./crc32"),r=require("./messages"),n=0,h=1,l=3,_=4,d=5,o=0,u=1,g=-2,f=-3,c=-5,p=-1,m=1,w=2,v=3,k=4,z=0,b=2,x=8,y=9,B=15,S=8,q=29,I=256,A=I+1+q,C=30,R=19,j=2*A+1,D=15,E=3,H=258,K=H+E+1,N=32,F=42,G=69,J=73,L=91,M=103,O=113,P=666,Q=1,T=2,U=3,V=4,W=3;function X(t,a){return t.msg=r[a],a}function Y(t){return(t<<1)-(t>4?9:0)}function Z(t){for(var a=t.length;--a>=0;)t[a]=0}function $(t){var e=t.state,s=e.pending;s>t.avail_out&&(s=t.avail_out),0!==s&&(a.arraySet(t.output,e.pending_buf,e.pending_out,s,t.next_out),t.next_out+=s,e.pending_out+=s,t.total_out+=s,t.avail_out-=s,e.pending-=s,0===e.pending&&(e.pending_out=0))}function tt(t,a){e._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,a),t.block_start=t.strstart,$(t.strm)}function at(t,a){t.pending_buf[t.pending++]=a}function et(t,a){t.pending_buf[t.pending++]=a>>>8&255,t.pending_buf[t.pending++]=255&a}function st(t,e,r,n){var h=t.avail_in;return h>n&&(h=n),0===h?0:(t.avail_in-=h,a.arraySet(e,t.input,t.next_in,h,r),1===t.state.wrap?t.adler=s(t.adler,e,h,r):2===t.state.wrap&&(t.adler=i(t.adler,e,h,r)),t.next_in+=h,t.total_in+=h,h)}function it(t,a){var e,s,i=t.max_chain_length,r=t.strstart,n=t.prev_length,h=t.nice_match,l=t.strstart>t.w_size-K?t.strstart-(t.w_size-K):0,_=t.window,d=t.w_mask,o=t.prev,u=t.strstart+H,g=_[r+n-1],f=_[r+n];t.prev_length>=t.good_match&&(i>>=2),h>t.lookahead&&(h=t.lookahead);do{if(_[(e=a)+n]===f&&_[e+n-1]===g&&_[e]===_[r]&&_[++e]===_[r+1]){r+=2,e++;do{}while(_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&_[++r]===_[++e]&&r<u);if(s=H-(u-r),r=u-H,s>n){if(t.match_start=a,n=s,s>=h)break;g=_[r+n-1],f=_[r+n]}}}while((a=o[a&d])>l&&0!=--i);return n<=t.lookahead?n:t.lookahead}function rt(t){var e,s,i,r,n,h=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=h+(h-K)){a.arraySet(t.window,t.window,h,h,0),t.match_start-=h,t.strstart-=h,t.block_start-=h,e=s=t.hash_size;do{i=t.head[--e],t.head[e]=i>=h?i-h:0}while(--s);e=s=h;do{i=t.prev[--e],t.prev[e]=i>=h?i-h:0}while(--s);r+=h}if(0===t.strm.avail_in)break;if(s=st(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=s,t.lookahead+t.insert>=E)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+E-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<E)););}while(t.lookahead<K&&0!==t.strm.avail_in)}function nt(t,a){var e=65535;for(e>t.pending_buf_size-5&&(e=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rt(t),0===t.lookahead&&a===n)return Q;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var s=t.block_start+e;if((0===t.strstart||t.strstart>=s)&&(t.lookahead=t.strstart-s,t.strstart=s,tt(t,!1),0===t.strm.avail_out))return Q;if(t.strstart-t.block_start>=t.w_size-K&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):(t.strstart>t.block_start&&(tt(t,!1),t.strm.avail_out),Q)}function ht(t,a){for(var s,i;;){if(t.lookahead<K){if(rt(t),t.lookahead<K&&a===n)return Q;if(0===t.lookahead)break}if(s=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==s&&t.strstart-s<=t.w_size-K&&(t.match_length=it(t,s)),t.match_length>=E)if(i=e._tr_tally(t,t.strstart-t.match_start,t.match_length-E),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=E){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=t.strstart<E-1?t.strstart:E-1,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function lt(t,a){for(var s,i,r;;){if(t.lookahead<K){if(rt(t),t.lookahead<K&&a===n)return Q;if(0===t.lookahead)break}if(s=0,t.lookahead>=E&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=E-1,0!==s&&t.prev_length<t.max_lazy_match&&t.strstart-s<=t.w_size-K&&(t.match_length=it(t,s),t.match_length<=5&&(t.strategy===m||t.match_length===E&&t.strstart-t.match_start>4096)&&(t.match_length=E-1)),t.prev_length>=E&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-E,i=e._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-E),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+E-1])&t.hash_mask,s=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=E-1,t.strstart++,i&&(tt(t,!1),0===t.strm.avail_out))return Q}else if(t.match_available){if((i=e._tr_tally(t,0,t.window[t.strstart-1]))&&tt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Q}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=e._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<E-1?t.strstart:E-1,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function _t(t,a){for(var s,i,r,h,l=t.window;;){if(t.lookahead<=H){if(rt(t),t.lookahead<=H&&a===n)return Q;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=E&&t.strstart>0&&(i=l[r=t.strstart-1])===l[++r]&&i===l[++r]&&i===l[++r]){h=t.strstart+H;do{}while(i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&i===l[++r]&&r<h);t.match_length=H-(h-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=E?(s=e._tr_tally(t,1,t.match_length-E),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(s=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),s&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function dt(t,a){for(var s;;){if(0===t.lookahead&&(rt(t),0===t.lookahead)){if(a===n)return Q;break}if(t.match_length=0,s=e._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,s&&(tt(t,!1),0===t.strm.avail_out))return Q}return t.insert=0,a===_?(tt(t,!0),0===t.strm.avail_out?U:V):t.last_lit&&(tt(t,!1),0===t.strm.avail_out)?Q:T}function ot(t,a,e,s,i){this.good_length=t,this.max_lazy=a,this.nice_length=e,this.max_chain=s,this.func=i}function ut(a){a.window_size=2*a.w_size,Z(a.head),a.max_lazy_match=t[a.level].max_lazy,a.good_match=t[a.level].good_length,a.nice_match=t[a.level].nice_length,a.max_chain_length=t[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=E-1,a.match_available=0,a.ins_h=0}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*j),this.dyn_dtree=new a.Buf16(2*(2*C+1)),this.bl_tree=new a.Buf16(2*(2*R+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(D+1),this.heap=new a.Buf16(2*A+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*A+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ft(t){var a;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=b,(a=t.state).pending=0,a.pending_out=0,a.wrap<0&&(a.wrap=-a.wrap),a.status=a.wrap?F:O,t.adler=2===a.wrap?0:1,a.last_flush=n,e._tr_init(a),o):X(t,g)}function ct(t){var a=ft(t);return a===o&&ut(t.state),a}function pt(t,a){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=a,o):g}function mt(t,e,s,i,r,n){if(!t)return g;var h=1;if(e===p&&(e=6),i<0?(h=0,i=-i):i>15&&(h=2,i-=16),r<1||r>y||s!==x||i<8||i>15||e<0||e>9||n<0||n>k)return X(t,g);8===i&&(i=9);var l=new gt;return t.state=l,l.strm=t,l.wrap=h,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+E-1)/E),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=n,l.method=s,ct(t)}function wt(t,a){return mt(t,a,x,B,S,z)}function vt(a,s){var r,f,p,m;if(!a||!a.state||s>d||s<0)return a?X(a,g):g;if(f=a.state,!a.output||!a.input&&0!==a.avail_in||f.status===P&&s!==_)return X(a,0===a.avail_out?c:g);if(f.strm=a,r=f.last_flush,f.last_flush=s,f.status===F)if(2===f.wrap)a.adler=0,at(f,31),at(f,139),at(f,8),f.gzhead?(at(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),at(f,255&f.gzhead.time),at(f,f.gzhead.time>>8&255),at(f,f.gzhead.time>>16&255),at(f,f.gzhead.time>>24&255),at(f,9===f.level?2:f.strategy>=w||f.level<2?4:0),at(f,255&f.gzhead.os),f.gzhead.extra&&f.gzhead.extra.length&&(at(f,255&f.gzhead.extra.length),at(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(a.adler=i(a.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=G):(at(f,0),at(f,0),at(f,0),at(f,0),at(f,0),at(f,9===f.level?2:f.strategy>=w||f.level<2?4:0),at(f,W),f.status=O);else{var k=x+(f.w_bits-8<<4)<<8;k|=(f.strategy>=w||f.level<2?0:f.level<6?1:6===f.level?2:3)<<6,0!==f.strstart&&(k|=N),k+=31-k%31,f.status=O,et(f,k),0!==f.strstart&&(et(f,a.adler>>>16),et(f,65535&a.adler)),a.adler=1}if(f.status===G)if(f.gzhead.extra){for(p=f.pending;f.gzindex<(65535&f.gzhead.extra.length)&&(f.pending!==f.pending_buf_size||(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending!==f.pending_buf_size));)at(f,255&f.gzhead.extra[f.gzindex]),f.gzindex++;f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),f.gzindex===f.gzhead.extra.length&&(f.gzindex=0,f.status=J)}else f.status=J;if(f.status===J)if(f.gzhead.name){p=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.name.length?255&f.gzhead.name.charCodeAt(f.gzindex++):0,at(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),0===m&&(f.gzindex=0,f.status=L)}else f.status=L;if(f.status===L)if(f.gzhead.comment){p=f.pending;do{if(f.pending===f.pending_buf_size&&(f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),$(a),p=f.pending,f.pending===f.pending_buf_size)){m=1;break}m=f.gzindex<f.gzhead.comment.length?255&f.gzhead.comment.charCodeAt(f.gzindex++):0,at(f,m)}while(0!==m);f.gzhead.hcrc&&f.pending>p&&(a.adler=i(a.adler,f.pending_buf,f.pending-p,p)),0===m&&(f.status=M)}else f.status=M;if(f.status===M&&(f.gzhead.hcrc?(f.pending+2>f.pending_buf_size&&$(a),f.pending+2<=f.pending_buf_size&&(at(f,255&a.adler),at(f,a.adler>>8&255),a.adler=0,f.status=O)):f.status=O),0!==f.pending){if($(a),0===a.avail_out)return f.last_flush=-1,o}else if(0===a.avail_in&&Y(s)<=Y(r)&&s!==_)return X(a,c);if(f.status===P&&0!==a.avail_in)return X(a,c);if(0!==a.avail_in||0!==f.lookahead||s!==n&&f.status!==P){var z=f.strategy===w?dt(f,s):f.strategy===v?_t(f,s):t[f.level].func(f,s);if(z!==U&&z!==V||(f.status=P),z===Q||z===U)return 0===a.avail_out&&(f.last_flush=-1),o;if(z===T&&(s===h?e._tr_align(f):s!==d&&(e._tr_stored_block(f,0,0,!1),s===l&&(Z(f.head),0===f.lookahead&&(f.strstart=0,f.block_start=0,f.insert=0))),$(a),0===a.avail_out))return f.last_flush=-1,o}return s!==_?o:f.wrap<=0?u:(2===f.wrap?(at(f,255&a.adler),at(f,a.adler>>8&255),at(f,a.adler>>16&255),at(f,a.adler>>24&255),at(f,255&a.total_in),at(f,a.total_in>>8&255),at(f,a.total_in>>16&255),at(f,a.total_in>>24&255)):(et(f,a.adler>>>16),et(f,65535&a.adler)),$(a),f.wrap>0&&(f.wrap=-f.wrap),0!==f.pending?o:u)}function kt(t){var a;return t&&t.state?(a=t.state.status)!==F&&a!==G&&a!==J&&a!==L&&a!==M&&a!==O&&a!==P?X(t,g):(t.state=null,a===O?X(t,f):o):g}function zt(t,e){var i,r,n,h,l,_,d,u,f=e.length;if(!t||!t.state)return g;if(2===(h=(i=t.state).wrap)||1===h&&i.status!==F||i.lookahead)return g;for(1===h&&(t.adler=s(t.adler,e,f,0)),i.wrap=0,f>=i.w_size&&(0===h&&(Z(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new a.Buf8(i.w_size),a.arraySet(u,e,f-i.w_size,i.w_size,0),e=u,f=i.w_size),l=t.avail_in,_=t.next_in,d=t.input,t.avail_in=f,t.next_in=0,t.input=e,rt(i);i.lookahead>=E;){r=i.strstart,n=i.lookahead-(E-1);do{i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+E-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++}while(--n);i.strstart=r,i.lookahead=E-1,rt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=E-1,i.match_available=0,t.next_in=_,t.input=d,t.avail_in=l,i.wrap=h,o}t=[new ot(0,0,0,0,nt),new ot(4,4,8,4,ht),new ot(4,5,16,8,ht),new ot(4,6,32,32,ht),new ot(4,4,16,16,lt),new ot(8,16,32,32,lt),new ot(8,16,128,128,lt),new ot(8,32,128,256,lt),new ot(32,128,258,1024,lt),new ot(32,258,258,4096,lt)],exports.deflateInit=wt,exports.deflateInit2=mt,exports.deflateReset=ct,exports.deflateResetKeep=ft,exports.deflateSetHeader=pt,exports.deflate=vt,exports.deflateEnd=kt,exports.deflateSetDictionary=zt,exports.deflateInfo="pako deflate (from Nodeca project)";
},{"../utils/common":"tbG5","./trees":"+sRJ","./adler32":"uxo6","./crc32":"X4kj","./messages":"gMAY"}],"34Q3":[function(require,module,exports) {
"use strict";var r=require("./common"),n=!0,t=!0;try{String.fromCharCode.apply(null,[0])}catch(r){n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){t=!1}for(var e=new r.Buf8(256),o=0;o<256;o++)e[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function f(e,o){if(o<65537&&(e.subarray&&t||!e.subarray&&n))return String.fromCharCode.apply(null,r.shrinkBuf(e,o));for(var f="",u=0;u<o;u++)f+=String.fromCharCode(e[u]);return f}e[254]=e[254]=1,exports.string2buf=function(n){var t,e,o,f,u,a=n.length,i=0;for(f=0;f<a;f++)55296==(64512&(e=n.charCodeAt(f)))&&f+1<a&&56320==(64512&(o=n.charCodeAt(f+1)))&&(e=65536+(e-55296<<10)+(o-56320),f++),i+=e<128?1:e<2048?2:e<65536?3:4;for(t=new r.Buf8(i),u=0,f=0;u<i;f++)55296==(64512&(e=n.charCodeAt(f)))&&f+1<a&&56320==(64512&(o=n.charCodeAt(f+1)))&&(e=65536+(e-55296<<10)+(o-56320),f++),e<128?t[u++]=e:e<2048?(t[u++]=192|e>>>6,t[u++]=128|63&e):e<65536?(t[u++]=224|e>>>12,t[u++]=128|e>>>6&63,t[u++]=128|63&e):(t[u++]=240|e>>>18,t[u++]=128|e>>>12&63,t[u++]=128|e>>>6&63,t[u++]=128|63&e);return t},exports.buf2binstring=function(r){return f(r,r.length)},exports.binstring2buf=function(n){for(var t=new r.Buf8(n.length),e=0,o=t.length;e<o;e++)t[e]=n.charCodeAt(e);return t},exports.buf2string=function(r,n){var t,o,u,a,i=n||r.length,h=new Array(2*i);for(o=0,t=0;t<i;)if((u=r[t++])<128)h[o++]=u;else if((a=e[u])>4)h[o++]=65533,t+=a-1;else{for(u&=2===a?31:3===a?15:7;a>1&&t<i;)u=u<<6|63&r[t++],a--;a>1?h[o++]=65533:u<65536?h[o++]=u:(u-=65536,h[o++]=55296|u>>10&1023,h[o++]=56320|1023&u)}return f(h,o)},exports.utf8border=function(r,n){var t;for((n=n||r.length)>r.length&&(n=r.length),t=n-1;t>=0&&128==(192&r[t]);)t--;return t<0?n:0===t?n:t+e[r[t]]>n?t:n};
},{"./common":"tbG5"}],"bdtv":[function(require,module,exports) {
"use strict";function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=t;
},{}],"nFS2":[function(require,module,exports) {
"use strict";var t=require("./zlib/deflate"),i=require("./utils/common"),e=require("./utils/strings"),n=require("./zlib/messages"),r=require("./zlib/zstream"),s=Object.prototype.toString,o=0,a=4,u=0,h=1,d=2,l=-1,f=0,p=8;function w(o){if(!(this instanceof w))return new w(o);this.options=i.assign({level:l,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},o||{});var a=this.options;a.raw&&a.windowBits>0?a.windowBits=-a.windowBits:a.gzip&&a.windowBits>0&&a.windowBits<16&&(a.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var h=t.deflateInit2(this.strm,a.level,a.method,a.windowBits,a.memLevel,a.strategy);if(h!==u)throw new Error(n[h]);if(a.header&&t.deflateSetHeader(this.strm,a.header),a.dictionary){var d;if(d="string"==typeof a.dictionary?e.string2buf(a.dictionary):"[object ArrayBuffer]"===s.call(a.dictionary)?new Uint8Array(a.dictionary):a.dictionary,(h=t.deflateSetDictionary(this.strm,d))!==u)throw new Error(n[h]);this._dict_set=!0}}function c(t,i){var e=new w(i);if(e.push(t,!0),e.err)throw e.msg||n[e.err];return e.result}function m(t,i){return(i=i||{}).raw=!0,c(t,i)}function g(t,i){return(i=i||{}).gzip=!0,c(t,i)}w.prototype.push=function(n,r){var l,f,p=this.strm,w=this.options.chunkSize;if(this.ended)return!1;f=r===~~r?r:!0===r?a:o,"string"==typeof n?p.input=e.string2buf(n):"[object ArrayBuffer]"===s.call(n)?p.input=new Uint8Array(n):p.input=n,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(w),p.next_out=0,p.avail_out=w),(l=t.deflate(p,f))!==h&&l!==u)return this.onEnd(l),this.ended=!0,!1;0!==p.avail_out&&(0!==p.avail_in||f!==a&&f!==d)||("string"===this.options.to?this.onData(e.buf2binstring(i.shrinkBuf(p.output,p.next_out))):this.onData(i.shrinkBuf(p.output,p.next_out)))}while((p.avail_in>0||0===p.avail_out)&&l!==h);return f===a?(l=t.deflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===u):f!==d||(this.onEnd(u),p.avail_out=0,!0)},w.prototype.onData=function(t){this.chunks.push(t)},w.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Deflate=w,exports.deflate=c,exports.deflateRaw=m,exports.gzip=g;
},{"./zlib/deflate":"+BLB","./utils/common":"tbG5","./utils/strings":"34Q3","./zlib/messages":"gMAY","./zlib/zstream":"bdtv"}],"LP5M":[function(require,module,exports) {
"use strict";var i=30,e=12;module.exports=function(o,a){var t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,p,z,j,q,y,A,B;t=o.state,d=o.next_in,A=o.input,n=d+(o.avail_in-5),l=o.next_out,B=o.output,s=l-(a-o.avail_out),f=l+(o.avail_out-257),r=t.dmax,b=t.wsize,c=t.whave,u=t.wnext,v=t.window,m=t.hold,w=t.bits,h=t.lencode,k=t.distcode,_=(1<<t.lenbits)-1,x=(1<<t.distbits)-1;i:do{w<15&&(m+=A[d++]<<w,w+=8,m+=A[d++]<<w,w+=8),g=h[m&_];e:for(;;){if(m>>>=p=g>>>24,w-=p,0===(p=g>>>16&255))B[l++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=h[(65535&g)+(m&(1<<p)-1)];continue e}if(32&p){t.mode=e;break i}o.msg="invalid literal/length code",t.mode=i;break i}z=65535&g,(p&=15)&&(w<p&&(m+=A[d++]<<w,w+=8),z+=m&(1<<p)-1,m>>>=p,w-=p),w<15&&(m+=A[d++]<<w,w+=8,m+=A[d++]<<w,w+=8),g=k[m&x];o:for(;;){if(m>>>=p=g>>>24,w-=p,!(16&(p=g>>>16&255))){if(0==(64&p)){g=k[(65535&g)+(m&(1<<p)-1)];continue o}o.msg="invalid distance code",t.mode=i;break i}if(j=65535&g,w<(p&=15)&&(m+=A[d++]<<w,(w+=8)<p&&(m+=A[d++]<<w,w+=8)),(j+=m&(1<<p)-1)>r){o.msg="invalid distance too far back",t.mode=i;break i}if(m>>>=p,w-=p,j>(p=l-s)){if((p=j-p)>c&&t.sane){o.msg="invalid distance too far back",t.mode=i;break i}if(q=0,y=v,0===u){if(q+=b-p,p<z){z-=p;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}}else if(u<p){if(q+=b+u-p,(p-=u)<z){z-=p;do{B[l++]=v[q++]}while(--p);if(q=0,u<z){z-=p=u;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}}}else if(q+=u-p,p<z){z-=p;do{B[l++]=v[q++]}while(--p);q=l-j,y=B}for(;z>2;)B[l++]=y[q++],B[l++]=y[q++],B[l++]=y[q++],z-=3;z&&(B[l++]=y[q++],z>1&&(B[l++]=y[q++]))}else{q=l-j;do{B[l++]=B[q++],B[l++]=B[q++],B[l++]=B[q++],z-=3}while(z>2);z&&(B[l++]=B[q++],z>1&&(B[l++]=B[q++]))}break}}break}}while(d<n&&l<f);d-=z=w>>3,m&=(1<<(w-=z<<3))-1,o.next_in=d,o.next_out=l,o.avail_in=d<n?n-d+5:5-(d-n),o.avail_out=l<f?f-l+257:257-(l-f),t.hold=m,t.bits=w};
},{}],"2u+n":[function(require,module,exports) {
"use strict";var r=require("../utils/common"),f=15,i=852,o=592,e=0,u=1,t=2,n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(a,c,m,w,d,v,B,h){var k,p,q,x,g,j,y,z,A,C=h.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new r.Buf16(f+1),Q=new r.Buf16(f+1),R=null,S=0;for(D=0;D<=f;D++)P[D]=0;for(E=0;E<w;E++)P[c[m+E]]++;for(H=C,G=f;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return d[v++]=20971520,d[v++]=20971520,h.bits=1,0;for(F=1;F<G&&0===P[F];F++);for(H<F&&(H=F),K=1,D=1;D<=f;D++)if(K<<=1,(K-=P[D])<0)return-1;if(K>0&&(a===e||1!==G))return-1;for(Q[1]=0,D=1;D<f;D++)Q[D+1]=Q[D]+P[D];for(E=0;E<w;E++)0!==c[m+E]&&(B[Q[c[m+E]]++]=E);if(a===e?(N=R=B,j=19):a===u?(N=n,O-=257,R=l,S-=257,j=256):(N=s,R=b,j=-1),M=0,E=0,D=F,g=v,I=H,J=0,q=-1,x=(L=1<<H)-1,a===u&&L>i||a===t&&L>o)return 1;for(;;){y=D-J,B[E]<j?(z=0,A=B[E]):B[E]>j?(z=R[S+B[E]],A=N[O+B[E]]):(z=96,A=0),k=1<<D-J,F=p=1<<I;do{d[g+(M>>J)+(p-=k)]=y<<24|z<<16|A|0}while(0!==p);for(k=1<<D-1;M&k;)k>>=1;if(0!==k?(M&=k-1,M+=k):M=0,E++,0==--P[D]){if(D===G)break;D=c[m+B[E]]}if(D>H&&(M&x)!==q){for(0===J&&(J=H),g+=F,K=1<<(I=D-J);I+J<G&&!((K-=P[I+J])<=0);)I++,K<<=1;if(L+=1<<I,a===u&&L>i||a===t&&L>o)return 1;d[q=M&x]=H<<24|I<<16|g-v|0}}return 0!==M&&(d[g+M]=D-J<<24|64<<16|0),h.bits=H,0};
},{"../utils/common":"tbG5"}],"GIDK":[function(require,module,exports) {
"use strict";var e=require("../utils/common"),a=require("./adler32"),t=require("./crc32"),i=require("./inffast"),s=require("./inftrees"),n=0,r=1,o=2,d=4,l=5,f=6,c=0,h=1,k=2,b=-2,m=-3,w=-4,u=-5,g=8,v=1,x=2,p=3,_=4,y=5,z=6,B=7,S=8,q=9,C=10,I=11,R=12,j=13,A=14,D=15,E=16,G=17,H=18,K=19,N=20,F=21,J=22,L=23,M=24,O=25,P=26,Q=27,T=28,U=29,V=30,W=31,X=32,Y=852,Z=592,$=15,ee=$;function ae(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ie(a){var t;return a&&a.state?(t=a.state,a.total_in=a.total_out=t.total=0,a.msg="",t.wrap&&(a.adler=1&t.wrap),t.mode=v,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new e.Buf32(Y),t.distcode=t.distdyn=new e.Buf32(Z),t.sane=1,t.back=-1,c):b}function se(e){var a;return e&&e.state?((a=e.state).wsize=0,a.whave=0,a.wnext=0,ie(e)):b}function ne(e,a){var t,i;return e&&e.state?(i=e.state,a<0?(t=0,a=-a):(t=1+(a>>4),a<48&&(a&=15)),a&&(a<8||a>15)?b:(null!==i.window&&i.wbits!==a&&(i.window=null),i.wrap=t,i.wbits=a,se(e))):b}function re(e,a){var t,i;return e?(i=new te,e.state=i,i.window=null,(t=ne(e,a))!==c&&(e.state=null),t):b}function oe(e){return re(e,ee)}var de,le,fe=!0;function ce(a){if(fe){var t;for(de=new e.Buf32(512),le=new e.Buf32(32),t=0;t<144;)a.lens[t++]=8;for(;t<256;)a.lens[t++]=9;for(;t<280;)a.lens[t++]=7;for(;t<288;)a.lens[t++]=8;for(s(r,a.lens,0,288,de,0,a.work,{bits:9}),t=0;t<32;)a.lens[t++]=5;s(o,a.lens,0,32,le,0,a.work,{bits:5}),fe=!1}a.lencode=de,a.lenbits=9,a.distcode=le,a.distbits=5}function he(a,t,i,s){var n,r=a.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new e.Buf8(r.wsize)),s>=r.wsize?(e.arraySet(r.window,t,i-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((n=r.wsize-r.wnext)>s&&(n=s),e.arraySet(r.window,t,i-s,n,r.wnext),(s-=n)?(e.arraySet(r.window,t,i-s,s,0),r.wnext=s,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function ke(Y,Z){var $,ee,te,ie,se,ne,re,oe,de,le,fe,ke,be,me,we,ue,ge,ve,xe,pe,_e,ye,ze,Be,Se=0,qe=new e.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&0!==Y.avail_in)return b;($=Y.state).mode===R&&($.mode=j),se=Y.next_out,te=Y.output,re=Y.avail_out,ie=Y.next_in,ee=Y.input,ne=Y.avail_in,oe=$.hold,de=$.bits,le=ne,fe=re,ye=c;e:for(;;)switch($.mode){case v:if(0===$.wrap){$.mode=j;break}for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(2&$.wrap&&35615===oe){$.check=0,qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0),oe=0,de=0,$.mode=x;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&oe)<<8)+(oe>>8))%31){Y.msg="incorrect header check",$.mode=V;break}if((15&oe)!==g){Y.msg="unknown compression method",$.mode=V;break}if(de-=4,_e=8+(15&(oe>>>=4)),0===$.wbits)$.wbits=_e;else if(_e>$.wbits){Y.msg="invalid window size",$.mode=V;break}$.dmax=1<<_e,Y.adler=$.check=1,$.mode=512&oe?C:R,oe=0,de=0;break;case x:for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if($.flags=oe,(255&$.flags)!==g){Y.msg="unknown compression method",$.mode=V;break}if(57344&$.flags){Y.msg="unknown header flags set",$.mode=V;break}$.head&&($.head.text=oe>>8&1),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0,$.mode=p;case p:for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.head&&($.head.time=oe),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,qe[2]=oe>>>16&255,qe[3]=oe>>>24&255,$.check=t($.check,qe,4,0)),oe=0,de=0,$.mode=_;case _:for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.head&&($.head.xflags=255&oe,$.head.os=oe>>8),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0,$.mode=y;case y:if(1024&$.flags){for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.length=oe,$.head&&($.head.extra_len=oe),512&$.flags&&(qe[0]=255&oe,qe[1]=oe>>>8&255,$.check=t($.check,qe,2,0)),oe=0,de=0}else $.head&&($.head.extra=null);$.mode=z;case z:if(1024&$.flags&&((ke=$.length)>ne&&(ke=ne),ke&&($.head&&(_e=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),e.arraySet($.head.extra,ee,ie,ke,_e)),512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,$.length-=ke),$.length))break e;$.length=0,$.mode=B;case B:if(2048&$.flags){if(0===ne)break e;ke=0;do{_e=ee[ie+ke++],$.head&&_e&&$.length<65536&&($.head.name+=String.fromCharCode(_e))}while(_e&&ke<ne);if(512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,_e)break e}else $.head&&($.head.name=null);$.length=0,$.mode=S;case S:if(4096&$.flags){if(0===ne)break e;ke=0;do{_e=ee[ie+ke++],$.head&&_e&&$.length<65536&&($.head.comment+=String.fromCharCode(_e))}while(_e&&ke<ne);if(512&$.flags&&($.check=t($.check,ee,ke,ie)),ne-=ke,ie+=ke,_e)break e}else $.head&&($.head.comment=null);$.mode=q;case q:if(512&$.flags){for(;de<16;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe!==(65535&$.check)){Y.msg="header crc mismatch",$.mode=V;break}oe=0,de=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),Y.adler=$.check=0,$.mode=R;break;case C:for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}Y.adler=$.check=ae(oe),oe=0,de=0,$.mode=I;case I:if(0===$.havedict)return Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,k;Y.adler=$.check=1,$.mode=R;case R:if(Z===l||Z===f)break e;case j:if($.last){oe>>>=7&de,de-=7&de,$.mode=Q;break}for(;de<3;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}switch($.last=1&oe,de-=1,3&(oe>>>=1)){case 0:$.mode=A;break;case 1:if(ce($),$.mode=N,Z===f){oe>>>=2,de-=2;break e}break;case 2:$.mode=G;break;case 3:Y.msg="invalid block type",$.mode=V}oe>>>=2,de-=2;break;case A:for(oe>>>=7&de,de-=7&de;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if((65535&oe)!=(oe>>>16^65535)){Y.msg="invalid stored block lengths",$.mode=V;break}if($.length=65535&oe,oe=0,de=0,$.mode=D,Z===f)break e;case D:$.mode=E;case E:if(ke=$.length){if(ke>ne&&(ke=ne),ke>re&&(ke=re),0===ke)break e;e.arraySet(te,ee,ie,ke,se),ne-=ke,ie+=ke,re-=ke,se+=ke,$.length-=ke;break}$.mode=R;break;case G:for(;de<14;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if($.nlen=257+(31&oe),oe>>>=5,de-=5,$.ndist=1+(31&oe),oe>>>=5,de-=5,$.ncode=4+(15&oe),oe>>>=4,de-=4,$.nlen>286||$.ndist>30){Y.msg="too many length or distance symbols",$.mode=V;break}$.have=0,$.mode=H;case H:for(;$.have<$.ncode;){for(;de<3;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.lens[Ce[$.have++]]=7&oe,oe>>>=3,de-=3}for(;$.have<19;)$.lens[Ce[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,ze={bits:$.lenbits},ye=s(n,$.lens,0,19,$.lencode,0,$.work,ze),$.lenbits=ze.bits,ye){Y.msg="invalid code lengths set",$.mode=V;break}$.have=0,$.mode=K;case K:for(;$.have<$.nlen+$.ndist;){for(;ue=(Se=$.lencode[oe&(1<<$.lenbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(ge<16)oe>>>=we,de-=we,$.lens[$.have++]=ge;else{if(16===ge){for(Be=we+2;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe>>>=we,de-=we,0===$.have){Y.msg="invalid bit length repeat",$.mode=V;break}_e=$.lens[$.have-1],ke=3+(3&oe),oe>>>=2,de-=2}else if(17===ge){for(Be=we+3;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}de-=we,_e=0,ke=3+(7&(oe>>>=we)),oe>>>=3,de-=3}else{for(Be=we+7;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}de-=we,_e=0,ke=11+(127&(oe>>>=we)),oe>>>=7,de-=7}if($.have+ke>$.nlen+$.ndist){Y.msg="invalid bit length repeat",$.mode=V;break}for(;ke--;)$.lens[$.have++]=_e}}if($.mode===V)break;if(0===$.lens[256]){Y.msg="invalid code -- missing end-of-block",$.mode=V;break}if($.lenbits=9,ze={bits:$.lenbits},ye=s(r,$.lens,0,$.nlen,$.lencode,0,$.work,ze),$.lenbits=ze.bits,ye){Y.msg="invalid literal/lengths set",$.mode=V;break}if($.distbits=6,$.distcode=$.distdyn,ze={bits:$.distbits},ye=s(o,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,ze),$.distbits=ze.bits,ye){Y.msg="invalid distances set",$.mode=V;break}if($.mode=N,Z===f)break e;case N:$.mode=F;case F:if(ne>=6&&re>=258){Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,i(Y,fe),se=Y.next_out,te=Y.output,re=Y.avail_out,ie=Y.next_in,ee=Y.input,ne=Y.avail_in,oe=$.hold,de=$.bits,$.mode===R&&($.back=-1);break}for($.back=0;ue=(Se=$.lencode[oe&(1<<$.lenbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(ue&&0==(240&ue)){for(ve=we,xe=ue,pe=ge;ue=(Se=$.lencode[pe+((oe&(1<<ve+xe)-1)>>ve)])>>>16&255,ge=65535&Se,!(ve+(we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}oe>>>=ve,de-=ve,$.back+=ve}if(oe>>>=we,de-=we,$.back+=we,$.length=ge,0===ue){$.mode=P;break}if(32&ue){$.back=-1,$.mode=R;break}if(64&ue){Y.msg="invalid literal/length code",$.mode=V;break}$.extra=15&ue,$.mode=J;case J:if($.extra){for(Be=$.extra;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.length+=oe&(1<<$.extra)-1,oe>>>=$.extra,de-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=L;case L:for(;ue=(Se=$.distcode[oe&(1<<$.distbits)-1])>>>16&255,ge=65535&Se,!((we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(0==(240&ue)){for(ve=we,xe=ue,pe=ge;ue=(Se=$.distcode[pe+((oe&(1<<ve+xe)-1)>>ve)])>>>16&255,ge=65535&Se,!(ve+(we=Se>>>24)<=de);){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}oe>>>=ve,de-=ve,$.back+=ve}if(oe>>>=we,de-=we,$.back+=we,64&ue){Y.msg="invalid distance code",$.mode=V;break}$.offset=ge,$.extra=15&ue,$.mode=M;case M:if($.extra){for(Be=$.extra;de<Be;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}$.offset+=oe&(1<<$.extra)-1,oe>>>=$.extra,de-=$.extra,$.back+=$.extra}if($.offset>$.dmax){Y.msg="invalid distance too far back",$.mode=V;break}$.mode=O;case O:if(0===re)break e;if(ke=fe-re,$.offset>ke){if((ke=$.offset-ke)>$.whave&&$.sane){Y.msg="invalid distance too far back",$.mode=V;break}ke>$.wnext?(ke-=$.wnext,be=$.wsize-ke):be=$.wnext-ke,ke>$.length&&(ke=$.length),me=$.window}else me=te,be=se-$.offset,ke=$.length;ke>re&&(ke=re),re-=ke,$.length-=ke;do{te[se++]=me[be++]}while(--ke);0===$.length&&($.mode=F);break;case P:if(0===re)break e;te[se++]=$.length,re--,$.mode=F;break;case Q:if($.wrap){for(;de<32;){if(0===ne)break e;ne--,oe|=ee[ie++]<<de,de+=8}if(fe-=re,Y.total_out+=fe,$.total+=fe,fe&&(Y.adler=$.check=$.flags?t($.check,te,fe,se-fe):a($.check,te,fe,se-fe)),fe=re,($.flags?oe:ae(oe))!==$.check){Y.msg="incorrect data check",$.mode=V;break}oe=0,de=0}$.mode=T;case T:if($.wrap&&$.flags){for(;de<32;){if(0===ne)break e;ne--,oe+=ee[ie++]<<de,de+=8}if(oe!==(4294967295&$.total)){Y.msg="incorrect length check",$.mode=V;break}oe=0,de=0}$.mode=U;case U:ye=h;break e;case V:ye=m;break e;case W:return w;case X:default:return b}return Y.next_out=se,Y.avail_out=re,Y.next_in=ie,Y.avail_in=ne,$.hold=oe,$.bits=de,($.wsize||fe!==Y.avail_out&&$.mode<V&&($.mode<Q||Z!==d))&&he(Y,Y.output,Y.next_out,fe-Y.avail_out)?($.mode=W,w):(le-=Y.avail_in,fe-=Y.avail_out,Y.total_in+=le,Y.total_out+=fe,$.total+=fe,$.wrap&&fe&&(Y.adler=$.check=$.flags?t($.check,te,fe,Y.next_out-fe):a($.check,te,fe,Y.next_out-fe)),Y.data_type=$.bits+($.last?64:0)+($.mode===R?128:0)+($.mode===N||$.mode===D?256:0),(0===le&&0===fe||Z===d)&&ye===c&&(ye=u),ye)}function be(e){if(!e||!e.state)return b;var a=e.state;return a.window&&(a.window=null),e.state=null,c}function me(e,a){var t;return e&&e.state?0==(2&(t=e.state).wrap)?b:(t.head=a,a.done=!1,c):b}function we(e,t){var i,s=t.length;return e&&e.state?0!==(i=e.state).wrap&&i.mode!==I?b:i.mode===I&&a(1,t,s,0)!==i.check?m:he(e,t,s,s)?(i.mode=W,w):(i.havedict=1,c):b}exports.inflateReset=se,exports.inflateReset2=ne,exports.inflateResetKeep=ie,exports.inflateInit=oe,exports.inflateInit2=re,exports.inflate=ke,exports.inflateEnd=be,exports.inflateGetHeader=me,exports.inflateSetDictionary=we,exports.inflateInfo="pako inflate (from Nodeca project)";
},{"../utils/common":"tbG5","./adler32":"uxo6","./crc32":"X4kj","./inffast":"LP5M","./inftrees":"2u+n"}],"xUUw":[function(require,module,exports) {
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};
},{}],"/+WI":[function(require,module,exports) {
"use strict";function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=t;
},{}],"faQk":[function(require,module,exports) {
"use strict";var t=require("./zlib/inflate"),i=require("./utils/common"),n=require("./utils/strings"),s=require("./zlib/constants"),r=require("./zlib/messages"),e=require("./zlib/zstream"),o=require("./zlib/gzheader"),u=Object.prototype.toString;function a(n){if(!(this instanceof a))return new a(n);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},n||{});var u=this.options;u.raw&&u.windowBits>=0&&u.windowBits<16&&(u.windowBits=-u.windowBits,0===u.windowBits&&(u.windowBits=-15)),!(u.windowBits>=0&&u.windowBits<16)||n&&n.windowBits||(u.windowBits+=32),u.windowBits>15&&u.windowBits<48&&0==(15&u.windowBits)&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new e,this.strm.avail_out=0;var h=t.inflateInit2(this.strm,u.windowBits);if(h!==s.Z_OK)throw new Error(r[h]);this.header=new o,t.inflateGetHeader(this.strm,this.header)}function h(t,i){var n=new a(i);if(n.push(t,!0),n.err)throw n.msg||r[n.err];return n.result}function _(t,i){return(i=i||{}).raw=!0,h(t,i)}a.prototype.push=function(r,e){var o,a,h,_,w,l,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,c=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof r?d.input=n.binstring2buf(r):"[object ArrayBuffer]"===u.call(r)?d.input=new Uint8Array(r):d.input=r,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(o=t.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(l="string"==typeof p?n.string2buf(p):"[object ArrayBuffer]"===u.call(p)?new Uint8Array(p):p,o=t.inflateSetDictionary(this.strm,l)),o===s.Z_BUF_ERROR&&!0===c&&(o=s.Z_OK,c=!1),o!==s.Z_STREAM_END&&o!==s.Z_OK)return this.onEnd(o),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&o!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=n.utf8border(d.output,d.next_out),_=d.next_out-h,w=n.buf2string(d.output,h),d.next_out=_,d.avail_out=f-_,_&&i.arraySet(d.output,d.output,h,_,0),this.onData(w)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(c=!0)}while((d.avail_in>0||0===d.avail_out)&&o!==s.Z_STREAM_END);return o===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(o=t.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},a.prototype.onData=function(t){this.chunks.push(t)},a.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=a,exports.inflate=h,exports.inflateRaw=_,exports.ungzip=h;
},{"./zlib/inflate":"GIDK","./utils/common":"tbG5","./utils/strings":"34Q3","./zlib/constants":"xUUw","./zlib/messages":"gMAY","./zlib/zstream":"bdtv","./zlib/gzheader":"/+WI"}],"f4vO":[function(require,module,exports) {
"use strict";var e=require("./lib/utils/common").assign,i=require("./lib/deflate"),r=require("./lib/inflate"),l=require("./lib/zlib/constants"),s={};e(s,i,r,l),module.exports=s;
},{"./lib/utils/common":"tbG5","./lib/deflate":"nFS2","./lib/inflate":"faQk","./lib/zlib/constants":"xUUw"}],"rcEh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.crc=c;const r=exports.pngSignature=[137,80,78,71,13,10,26,10],e=[];for(let r=0;r<256;r++){var t=r;for(let r=0;r<8;r++)1&t?t=3988292384^t>>>1:t>>>=1;e[r]=t}const o=4294967295;function n(r,t,o){for(var n=r,c=0;c<o;c++)n=e[255&(n^t[c])]^n>>>8;return n}function c(r,e){return(n(o,r,e)^o)>>>0}
},{}],"FrND":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("iobuffer"),t=s(e),r=require("pako"),i=require("./common");function s(e){return e&&e.__esModule?e:{default:e}}const n=new Uint8Array(0),h="\0",o=new Uint16Array([255]),a=new Uint8Array(o.buffer),d=255===a[0];class c extends t.default{constructor(e,t){super(e);const{checkCrc:i=!1}=t;this._checkCrc=i,this._inflator=new r.Inflate,this._png=null,this._end=!1,this.setBigEndian()}decode(){for(this._png={text:{}},this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(var e=0;e<i.pngSignature.length;e++)if(this.readUint8()!==i.pngSignature[e])throw new Error(`wrong PNG signature. Byte at ${e} should be ${i.pngSignature[e]}.`)}decodeChunk(){const e=this.readUint32(),t=this.readChars(4),r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tEXt":this.decodetEXt(e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);if(this._checkCrc){const r=this.readUint32(),s=e+4,n=(0,i.crc)(new Uint8Array(this.buffer,this.byteOffset+this.offset-s-4,s),s);if(n!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${n}`)}else this.skip(4)}decodeIHDR(){var e=this._png;if(e.width=this.readUint32(),e.height=this.readUint32(),e.bitDepth=this.readUint8(),e.colourType=this.readUint8(),e.compressionMethod=this.readUint8(),e.filterMethod=this.readUint8(),e.interlaceMethod=this.readUint8(),0!==this._png.compressionMethod)throw new Error("Unsupported compression method: "+e.compressionMethod)}decodePLTE(e){if(e%3!=0)throw new RangeError("PLTE field length must be a multiple of 3. Got "+e);var t=e/3;this._hasPalette=!0;for(var r=this._palette=new Array(t),i=0;i<t;i++)r[i]=[this.readUint8(),this.readUint8(),this.readUint8()]}decodeIDAT(e){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,e),!1),this.skip(e)}decodetEXt(e){for(var t,r="";(t=this.readChar())!==h;)r+=t;this._png.text[r]=this.readChars(e-r.length-1)}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution=[e,t],this._png.unitSpecifier=r}decodeImage(){if(this._inflator.push(n,!0),this._inflator.err)throw new Error("Error while decompressing the data: "+this._inflator.err);var e=this._inflator.result;if(this._inflator=null,0!==this._png.filterMethod)throw new Error("Filter method "+this._png.filterMethod+" not supported");if(0!==this._png.interlaceMethod)throw new Error("Interlace method "+this._png.interlaceMethod+" not supported");this.decodeInterlaceNull(e)}decodeInterlaceNull(e){var t;switch(this._png.colourType){case 0:t=1;break;case 2:t=3;break;case 3:if(!this._hasPalette)throw new Error("Missing palette");t=1;break;case 4:t=2;break;case 6:t=4;break;default:throw new Error("Unknown colour type: "+this._png.colourType)}const r=this._png.height,i=t*this._png.bitDepth/8,s=this._png.width*i,h=new Uint8Array(this._png.height*s);for(var o,a,c=n,_=0,b=0;b<r;b++){switch(o=e.subarray(_+1,_+1+s),a=h.subarray(b*s,(b+1)*s),e[_]){case 0:f(o,a,s);break;case 1:l(o,a,s,i);break;case 2:p(o,a,c,s);break;case 3:u(o,a,c,s,i);break;case 4:g(o,a,c,s,i);break;default:throw new Error("Unsupported filter: "+e[_])}c=a,_+=s+1}if(this._hasPalette&&(this._png.palette=this._palette),16===this._png.bitDepth){const e=new Uint16Array(h.buffer);if(d)for(var k=0;k<e.length;k++)e[k]=w(e[k]);this._png.data=e}else this._png.data=h}}function f(e,t,r){for(var i=0;i<r;i++)t[i]=e[i]}function l(e,t,r,i){for(var s=0;s<i;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-i]&255}function p(e,t,r,i){var s=0;if(0===r.length)for(;s<i;s++)t[s]=e[s];else for(;s<i;s++)t[s]=e[s]+r[s]&255}function u(e,t,r,i,s){var n=0;if(0===r.length){for(;n<s;n++)t[n]=e[n];for(;n<i;n++)t[n]=e[n]+(t[n-s]>>1)&255}else{for(;n<s;n++)t[n]=e[n]+(r[n]>>1)&255;for(;n<i;n++)t[n]=e[n]+(t[n-s]+r[n]>>1)&255}}function g(e,t,r,i,s){var n=0;if(0===r.length){for(;n<s;n++)t[n]=e[n];for(;n<i;n++)t[n]=e[n]+t[n-s]&255}else{for(;n<s;n++)t[n]=e[n]+r[n]&255;for(;n<i;n++)t[n]=e[n]+_(t[n-s],r[n],r[n-s])&255}}function _(e,t,r){var i=e+t-r,s=Math.abs(i-e),n=Math.abs(i-t),h=Math.abs(i-r);return s<=n&&s<=h?e:n<=h?t:r}function w(e){return(255&e)<<8|e>>8&255}exports.default=c;
},{"iobuffer":"ZdsI","pako":"f4vO","./common":"rcEh"}],"Uef6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("iobuffer"),e=n(t),i=require("pako"),r=require("./common");function n(t){return t&&t.__esModule?t:{default:t}}const s={level:3};class h extends e.default{constructor(t,e){super(),this._checkData(t),this._zlibOptions=Object.assign({},s,e.zlib),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(r.pngSignature)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.bitDepth),this.writeByte(this._png.colourType),this.writeByte(0),this.writeByte(0),this.writeByte(0),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:r,channels:n,bitDepth:s,data:h}=this._png,o=n*t,a=(new e.default).setBigEndian();for(var p=0,w=0;w<r;w++)if(a.writeByte(0),8===s)p=c(h,a,o,p);else{if(16!==s)throw new Error("unreachable");p=u(h,a,o,p)}const d=a.getBuffer(),g=(0,i.deflate)(d,this._zlibOptions);this.encodeIDAT(g)}_checkData(t){this._png={width:o(t.width,"width"),height:o(t.height,"height"),data:t.data};const{colourType:e,channels:i,bitDepth:r}=a(t);this._png.colourType=e,this._png.channels=i,this._png.bitDepth=r;const n=this._png.width*this._png.height*i;if(this._png.data.length!==n)throw new RangeError(`wrong data size. Found ${this._png.data.length}, expected ${n}`)}writeCrc(t){this.writeUint32((0,r.crc)(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function o(t,e){if(Number.isInteger(t)&&t>0)return t;throw new TypeError(`${e} must be a positive integer`)}function a(t){const{components:e=3,alpha:i=!0,bitDepth:r=8}=t;if(3!==e&&1!==e)throw new RangeError(`unsupported number of components: ${e}`);if(8!==r&&16!==r)throw new RangeError(`unsupported bit depth: ${r}`);const n=e+Number(i),s={channels:n,bitDepth:r};switch(n){case 4:s.colourType=6;break;case 3:s.colourType=2;break;case 1:s.colourType=0;break;case 2:s.colourType=4;break;default:throw new Error(`unsupported number of channels: ${n}`)}return s}function c(t,e,i,r){for(var n=0;n<i;n++)e.writeByte(t[r++]);return r}function u(t,e,i,r){for(var n=0;n<i;n++)e.writeUint16(t[r++]);return r}exports.default=h;
},{"iobuffer":"ZdsI","pako":"f4vO","./common":"rcEh"}],"gBiN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=exports.decode=void 0;var e=require("./PNGDecoder"),r=t(e),o=require("./PNGEncoder"),d=t(o);function t(e){return e&&e.__esModule?e:{default:e}}function n(e,o={}){return new r.default(e,o).decode()}function u(e,r={}){return new d.default(e,r).encode()}exports.decode=n,exports.encode=u;
},{"./PNGDecoder":"FrND","./PNGEncoder":"Uef6"}],"SLPw":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var r=require("buffer").Buffer,a=a||function(a){return new r(a).toString("base64")};function n(a){Math.round;var n,e,o,t,f,i=Math.floor,v=new Array(64),u=new Array(64),h=new Array(64),w=new Array(64),c=new Array(65535),d=new Array(65535),g=new Array(64),y=new Array(64),A=[],m=0,s=7,l=new Array(64),p=new Array(64),D=new Array(64),M=new Array(256),C=new Array(2048),I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],b=[0,1,2,3,4,5,6,7,8,9,10,11],x=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],_=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function N(r,a){for(var n=0,e=0,o=new Array,t=1;t<=16;t++){for(var f=1;f<=r[t];f++)o[a[e]]=[],o[a[e]][0]=n,o[a[e]][1]=t,e++,n++;n*=2}return o}function j(r){for(var a=r[0],n=r[1]-1;n>=0;)a&1<<n&&(m|=1<<s),n--,--s<0&&(255==m?(k(255),k(0)):k(m),s=7,m=0)}function k(r){A.push(r)}function z(r){k(r>>8&255),k(255&r)}function F(r,a,n,e,o){for(var t,f=o[0],i=o[240],v=function(r,a){var n,e,o,t,f,i,v,u,h,w,c=0;for(h=0;h<8;++h){n=r[c],e=r[c+1],o=r[c+2],t=r[c+3],f=r[c+4],i=r[c+5],v=r[c+6];var d=n+(u=r[c+7]),y=n-u,A=e+v,m=e-v,s=o+i,l=o-i,p=t+f,D=t-f,M=d+p,C=d-p,I=A+s,T=A-s;r[c]=M+I,r[c+4]=M-I;var b=.707106781*(T+C);r[c+2]=C+b,r[c+6]=C-b;var x=.382683433*((M=D+l)-(T=m+y)),B=.5411961*M+x,E=1.306562965*T+x,S=.707106781*(I=l+m),_=y+S,q=y-S;r[c+5]=q+B,r[c+3]=q-B,r[c+1]=_+E,r[c+7]=_-E,c+=8}for(c=0,h=0;h<8;++h){n=r[c],e=r[c+8],o=r[c+16],t=r[c+24],f=r[c+32],i=r[c+40],v=r[c+48];var N=n+(u=r[c+56]),j=n-u,k=e+v,z=e-v,F=o+i,G=o-i,H=t+f,J=t-f,K=N+H,L=N-H,O=k+F,P=k-F;r[c]=K+O,r[c+32]=K-O;var Q=.707106781*(P+L);r[c+16]=L+Q,r[c+48]=L-Q;var R=.382683433*((K=J+G)-(P=z+j)),U=.5411961*K+R,V=1.306562965*P+R,W=.707106781*(O=G+z),X=j+W,Y=j-W;r[c+40]=Y+U,r[c+24]=Y-U,r[c+8]=X+V,r[c+56]=X-V,c++}for(h=0;h<64;++h)w=r[h]*a[h],g[h]=w>0?w+.5|0:w-.5|0;return g}(r,a),u=0;u<64;++u)y[I[u]]=v[u];var h=y[0]-n;n=y[0],0==h?j(e[0]):(j(e[d[t=32767+h]]),j(c[t]));for(var w=63;w>0&&0==y[w];w--);if(0==w)return j(f),n;for(var A,m=1;m<=w;){for(var s=m;0==y[m]&&m<=w;++m);var l=m-s;if(l>=16){A=l>>4;for(var p=1;p<=A;++p)j(i);l&=15}t=32767+y[m],j(o[(l<<4)+d[t]]),j(c[t]),m++}return 63!=w&&j(f),n}function G(r){if(r<=0&&(r=1),r>100&&(r=100),f!=r){(function(r){for(var a=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var e=i((a[n]*r+50)/100);e<1?e=1:e>255&&(e=255),v[I[n]]=e}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],t=0;t<64;t++){var f=i((o[t]*r+50)/100);f<1?f=1:f>255&&(f=255),u[I[t]]=f}for(var c=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,g=0;g<8;g++)for(var y=0;y<8;y++)h[d]=1/(v[I[d]]*c[g]*c[y]*8),w[d]=1/(u[I[d]]*c[g]*c[y]*8),d++})(r<50?Math.floor(5e3/r):Math.floor(200-2*r)),f=r}}this.encode=function(a,f){(new Date).getTime();f&&G(f),A=new Array,m=0,s=7,z(65496),z(65504),z(16),k(74),k(70),k(73),k(70),k(0),k(1),k(1),k(0),z(1),z(1),k(0),k(0),function(){z(65499),z(132),k(0);for(var r=0;r<64;r++)k(v[r]);k(1);for(var a=0;a<64;a++)k(u[a])}(),function(r,a){z(65472),z(17),k(8),z(a),z(r),k(3),k(1),k(17),k(0),k(2),k(17),k(1),k(3),k(17),k(1)}(a.width,a.height),function(){z(65476),z(418),k(0);for(var r=0;r<16;r++)k(T[r+1]);for(var a=0;a<=11;a++)k(b[a]);k(16);for(var n=0;n<16;n++)k(x[n+1]);for(var e=0;e<=161;e++)k(B[e]);k(1);for(var o=0;o<16;o++)k(E[o+1]);for(var t=0;t<=11;t++)k(S[t]);k(17);for(var f=0;f<16;f++)k(_[f+1]);for(var i=0;i<=161;i++)k(q[i])}(),z(65498),z(12),k(3),k(1),k(0),k(2),k(17),k(3),k(17),k(0),k(63),k(0);var i=0,c=0,d=0;m=0,s=7,this.encode.displayName="_encode_";for(var g,y,M,I,N,H,J,K,L,O=a.data,P=a.width,Q=a.height,R=4*P,U=0;U<Q;){for(g=0;g<R;){for(H=N=R*U+g,J=-1,K=0,L=0;L<64;L++)H=N+(K=L>>3)*R+(J=4*(7&L)),U+K>=Q&&(H-=R*(U+1+K-Q)),g+J>=R&&(H-=g+J-R+4),y=O[H++],M=O[H++],I=O[H++],l[L]=(C[y]+C[M+256>>0]+C[I+512>>0]>>16)-128,p[L]=(C[y+768>>0]+C[M+1024>>0]+C[I+1280>>0]>>16)-128,D[L]=(C[y+1280>>0]+C[M+1536>>0]+C[I+1792>>0]>>16)-128;i=F(l,h,i,n,o),c=F(p,w,c,e,t),d=F(D,w,d,e,t),g+=32}U+=8}if(s>=0){var V=[];V[1]=s+1,V[0]=(1<<s+1)-1,j(V)}return z(65497),new r(A)},function(){(new Date).getTime();a||(a=50),function(){for(var r=String.fromCharCode,a=0;a<256;a++)M[a]=r(a)}(),n=N(T,b),e=N(E,S),o=N(x,B),t=N(_,q),function(){for(var r=1,a=2,n=1;n<=15;n++){for(var e=r;e<a;e++)d[32767+e]=n,c[32767+e]=[],c[32767+e][1]=n,c[32767+e][0]=e;for(var o=-(a-1);o<=-r;o++)d[32767+o]=n,c[32767+o]=[],c[32767+o][1]=n,c[32767+o][0]=a-1+o;r<<=1,a<<=1}}(),function(){for(var r=0;r<256;r++)C[r]=19595*r,C[r+256>>0]=38470*r,C[r+512>>0]=7471*r+32768,C[r+768>>0]=-11059*r,C[r+1024>>0]=-21709*r,C[r+1280>>0]=32768*r+8421375,C[r+1536>>0]=-27439*r,C[r+1792>>0]=-5329*r}(),G(a),(new Date).getTime()}()}function e(r,a){return void 0===a&&(a=50),{data:new n(a).encode(r,a),width:r.width,height:r.height}}function o(r){var a="string"==typeof r?document.getElementById(r):r,n=document.createElement("canvas");n.width=a.width,n.height=a.height;var e=n.getContext("2d");return e.drawImage(a,0,0),e.getImageData(0,0,n.width,n.height)}module.exports=e;
},{"buffer":"a+bp"}],"TyOO":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,r=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,a=3406,o=2276,s=1567,t=3784,i=5793,c=2896;function f(){}function l(e,r){for(var n,a,o=0,s=[],t=16;t>0&&!e[t-1];)t--;s.push({children:[],index:0});var i,c=s[0];for(n=0;n<t;n++){for(a=0;a<e[n];a++){for((c=s.pop()).children[c.index]=r[o];c.index>0;)c=s.pop();for(c.index++,s.push(c);s.length<=n;)s.push(i={children:[],index:0}),c.children[c.index]=i.children,c=i;o++}n+1<t&&(s.push(i={children:[],index:0}),c.children[c.index]=i.children,c=i)}return s[0].children}function h(r,n,a,o,s,t,i,c,f){a.precision,a.samplesPerLine,a.scanLines;var l=a.mcusPerLine,h=a.progressive,u=(a.maxH,a.maxV,n),p=0,m=0;function v(){if(m>0)return p>>--m&1;if(255==(p=r[n++])){var e=r[n++];if(e)throw new Error("unexpected marker: "+(p<<8|e).toString(16))}return m=7,p>>>7}function d(e){for(var r,n=e;null!==(r=v());){if("number"==typeof(n=n[r]))return n;if("object"!=typeof n)throw new Error("invalid huffman sequence")}return null}function b(e){for(var r=0;e>0;){var n=v();if(null===n)return;r=r<<1|n,e--}return r}function w(e){var r=b(e);return r>=1<<e-1?r:r+(-1<<e)+1}var k=0;var g,y=0;function x(e,r,n,a,o){var s=n%l,t=(n/l|0)*e.v+a,i=s*e.h+o;r(e,e.blocks[t][i])}function P(e,r,n){var a=n/e.blocksPerLine|0,o=n%e.blocksPerLine;r(e,e.blocks[a][o])}var X,A,L,T,C,U,D=o.length;U=h?0===t?0===c?function(e,r){var n=d(e.huffmanTableDC),a=0===n?0:w(n)<<f;r[0]=e.pred+=a}:function(e,r){r[0]|=v()<<f}:0===c?function(r,n){if(k>0)k--;else for(var a=t,o=i;a<=o;){var s=d(r.huffmanTableAC),c=15&s,l=s>>4;if(0!==c)n[e[a+=l]]=w(c)*(1<<f),a++;else{if(l<15){k=b(l)+(1<<l)-1;break}a+=16}}}:function(r,n){for(var a=t,o=i,s=0;a<=o;){var c=e[a],l=n[c]<0?-1:1;switch(y){case 0:var h=d(r.huffmanTableAC),u=15&h;if(s=h>>4,0===u)s<15?(k=b(s)+(1<<s),y=4):(s=16,y=1);else{if(1!==u)throw new Error("invalid ACn encoding");g=w(u),y=s?2:3}continue;case 1:case 2:n[c]?n[c]+=(v()<<f)*l:0==--s&&(y=2==y?3:0);break;case 3:n[c]?n[c]+=(v()<<f)*l:(n[c]=g<<f,y=0);break;case 4:n[c]&&(n[c]+=(v()<<f)*l)}a++}4===y&&0==--k&&(y=0)}:function(r,n){var a=d(r.huffmanTableDC),o=0===a?0:w(a);n[0]=r.pred+=o;for(var s=1;s<64;){var t=d(r.huffmanTableAC),i=15&t,c=t>>4;if(0!==i)n[e[s+=c]]=w(i),s++;else{if(c<15)break;s+=16}}};var E,Y,I,q,M=0;for(Y=1==D?o[0].blocksPerLine*o[0].blocksPerColumn:l*a.mcusPerColumn,s||(s=Y);M<Y;){for(A=0;A<D;A++)o[A].pred=0;if(k=0,1==D)for(X=o[0],C=0;C<s;C++)P(X,U,M),M++;else for(C=0;C<s;C++){for(A=0;A<D;A++)for(I=(X=o[A]).h,q=X.v,L=0;L<q;L++)for(T=0;T<I;T++)x(X,U,M,L,T);if(++M===Y)break}if(m=0,(E=r[n]<<8|r[n+1])<65280)throw new Error("marker was not found");if(!(E>=65488&&E<=65495))break;n+=2}return n-u}function u(e,f){var l,h,u=[],p=f.blocksPerLine,m=f.blocksPerColumn,v=p<<3,d=new Int32Array(64),b=new Uint8Array(64);function w(e,l,h){var u,p,m,v,d,b,w,k,g,y,x=f.quantizationTable,P=h;for(y=0;y<64;y++)P[y]=e[y]*x[y];for(y=0;y<8;++y){var X=8*y;0!=P[1+X]||0!=P[2+X]||0!=P[3+X]||0!=P[4+X]||0!=P[5+X]||0!=P[6+X]||0!=P[7+X]?(u=i*P[0+X]+128>>8,p=i*P[4+X]+128>>8,m=P[2+X],v=P[6+X],d=c*(P[1+X]-P[7+X])+128>>8,k=c*(P[1+X]+P[7+X])+128>>8,b=P[3+X]<<4,w=P[5+X]<<4,g=u-p+1>>1,u=u+p+1>>1,p=g,g=m*t+v*s+128>>8,m=m*s-v*t+128>>8,v=g,g=d-w+1>>1,d=d+w+1>>1,w=g,g=k+b+1>>1,b=k-b+1>>1,k=g,g=u-v+1>>1,u=u+v+1>>1,v=g,g=p-m+1>>1,p=p+m+1>>1,m=g,g=d*o+k*a+2048>>12,d=d*a-k*o+2048>>12,k=g,g=b*n+w*r+2048>>12,b=b*r-w*n+2048>>12,w=g,P[0+X]=u+k,P[7+X]=u-k,P[1+X]=p+w,P[6+X]=p-w,P[2+X]=m+b,P[5+X]=m-b,P[3+X]=v+d,P[4+X]=v-d):(g=i*P[0+X]+512>>10,P[0+X]=g,P[1+X]=g,P[2+X]=g,P[3+X]=g,P[4+X]=g,P[5+X]=g,P[6+X]=g,P[7+X]=g)}for(y=0;y<8;++y){var A=y;0!=P[8+A]||0!=P[16+A]||0!=P[24+A]||0!=P[32+A]||0!=P[40+A]||0!=P[48+A]||0!=P[56+A]?(u=i*P[0+A]+2048>>12,p=i*P[32+A]+2048>>12,m=P[16+A],v=P[48+A],d=c*(P[8+A]-P[56+A])+2048>>12,k=c*(P[8+A]+P[56+A])+2048>>12,b=P[24+A],w=P[40+A],g=u-p+1>>1,u=u+p+1>>1,p=g,g=m*t+v*s+2048>>12,m=m*s-v*t+2048>>12,v=g,g=d-w+1>>1,d=d+w+1>>1,w=g,g=k+b+1>>1,b=k-b+1>>1,k=g,g=u-v+1>>1,u=u+v+1>>1,v=g,g=p-m+1>>1,p=p+m+1>>1,m=g,g=d*o+k*a+2048>>12,d=d*a-k*o+2048>>12,k=g,g=b*n+w*r+2048>>12,b=b*r-w*n+2048>>12,w=g,P[0+A]=u+k,P[56+A]=u-k,P[8+A]=p+w,P[48+A]=p-w,P[16+A]=m+b,P[40+A]=m-b,P[24+A]=v+d,P[32+A]=v-d):(g=i*h[y+0]+8192>>14,P[0+A]=g,P[8+A]=g,P[16+A]=g,P[24+A]=g,P[32+A]=g,P[40+A]=g,P[48+A]=g,P[56+A]=g)}for(y=0;y<64;++y){var L=128+(P[y]+8>>4);l[y]=L<0?0:L>255?255:L}}for(var k=0;k<m;k++){var g=k<<3;for(l=0;l<8;l++)u.push(new Uint8Array(v));for(var y=0;y<p;y++){w(f.blocks[k][y],b,d);var x=0,P=y<<3;for(h=0;h<8;h++){var X=u[g+h];for(l=0;l<8;l++)X[P+l]=b[x++]}}}return u}function p(e){return e<0?0:e>255?255:e}return f.prototype={load:function(e){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){var e=new Uint8Array(r.response||r.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),r.send(null)},parse:function(r){var n=0;r.length;function a(){var e=r[n]<<8|r[n+1];return n+=2,e}function o(){var e=a(),o=r.subarray(n,n+e-2);return n+=o.length,o}function s(e){var r,n,a=0,o=0;for(n in e.components)e.components.hasOwnProperty(n)&&(a<(r=e.components[n]).h&&(a=r.h),o<r.v&&(o=r.v));var s=Math.ceil(e.samplesPerLine/8/a),t=Math.ceil(e.scanLines/8/o);for(n in e.components)if(e.components.hasOwnProperty(n)){r=e.components[n];for(var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*r.h/a),c=Math.ceil(Math.ceil(e.scanLines/8)*r.v/o),f=s*r.h,l=t*r.v,h=[],u=0;u<l;u++){for(var p=[],m=0;m<f;m++)p.push(new Int32Array(64));h.push(p)}r.blocksPerLine=i,r.blocksPerColumn=c,r.blocks=h}e.maxH=a,e.maxV=o,e.mcusPerLine=s,e.mcusPerColumn=t}var t,i,c=null,f=null,p=[],m=[],v=[],d=[],b=a();if(65496!=b)throw new Error("SOI not found");for(b=a();65497!=b;){switch(b){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var w=o();65504===b&&74===w[0]&&70===w[1]&&73===w[2]&&70===w[3]&&0===w[4]&&(c={version:{major:w[5],minor:w[6]},densityUnits:w[7],xDensity:w[8]<<8|w[9],yDensity:w[10]<<8|w[11],thumbWidth:w[12],thumbHeight:w[13],thumbData:w.subarray(14,14+3*w[12]*w[13])}),65518===b&&65===w[0]&&100===w[1]&&111===w[2]&&98===w[3]&&101===w[4]&&0===w[5]&&(f={version:w[6],flags0:w[7]<<8|w[8],flags1:w[9]<<8|w[10],transformCode:w[11]});break;case 65499:for(var k=a()+n-2;n<k;){var g=r[n++],y=new Int32Array(64);if(g>>4==0)for(S=0;S<64;S++){y[e[S]]=r[n++]}else{if(g>>4!=1)throw new Error("DQT: invalid table spec");for(S=0;S<64;S++){y[e[S]]=a()}}p[15&g]=y}break;case 65472:case 65473:case 65474:a(),(t={}).extended=65473===b,t.progressive=65474===b,t.precision=r[n++],t.scanLines=a(),t.samplesPerLine=a(),t.components={},t.componentsOrder=[];var x,P=r[n++];for(j=0;j<P;j++){x=r[n];var X=r[n+1]>>4,A=15&r[n+1],L=r[n+2];t.componentsOrder.push(x),t.components[x]={h:X,v:A,quantizationIdx:L},n+=3}s(t),m.push(t);break;case 65476:var T=a();for(j=2;j<T;){var C=r[n++],U=new Uint8Array(16),D=0;for(S=0;S<16;S++,n++)D+=U[S]=r[n];var E=new Uint8Array(D);for(S=0;S<D;S++,n++)E[S]=r[n];j+=17+D,(C>>4==0?d:v)[15&C]=l(U,E)}break;case 65501:a(),i=a();break;case 65498:a();var Y=r[n++],I=[];for(j=0;j<Y;j++){V=t.components[r[n++]];var q=r[n++];V.huffmanTableDC=d[q>>4],V.huffmanTableAC=v[15&q],I.push(V)}var M=r[n++],O=r[n++],z=r[n++],H=h(r,n,t,I,i,M,O,z>>4,15&z);n+=H;break;case 65535:255!==r[n]&&n--;break;default:if(255==r[n-3]&&r[n-2]>=192&&r[n-2]<=254){n-=3;break}throw new Error("unknown JPEG marker "+b.toString(16))}b=a()}if(1!=m.length)throw new Error("only single frame JPEGs supported");for(var j=0;j<m.length;j++){var G=m[j].components;for(var S in G)G[S].quantizationTable=p[G[S].quantizationIdx],delete G[S].quantizationIdx}this.width=t.samplesPerLine,this.height=t.scanLines,this.jfif=c,this.adobe=f,this.components=[];for(j=0;j<t.componentsOrder.length;j++){var V=t.components[t.componentsOrder[j]];this.components.push({lines:u(0,V),scaleX:V.h/t.maxH,scaleY:V.v/t.maxV})}},getData:function(e,r){var n,a,o,s,t,i,c,f,l,h,u,m,v,d,b,w,k,g,y,x,P,X=this.width/e,A=this.height/r,L=0,T=e*r*this.components.length,C=new Uint8Array(T);switch(this.components.length){case 1:for(n=this.components[0],h=0;h<r;h++)for(t=n.lines[0|h*n.scaleY*A],l=0;l<e;l++)u=t[0|l*n.scaleX*X],C[L++]=u;break;case 2:for(n=this.components[0],a=this.components[1],h=0;h<r;h++)for(t=n.lines[0|h*n.scaleY*A],i=a.lines[0|h*a.scaleY*A],l=0;l<e;l++)u=t[0|l*n.scaleX*X],C[L++]=u,u=i[0|l*a.scaleX*X],C[L++]=u;break;case 3:for(P=!0,this.adobe&&this.adobe.transformCode?P=!0:void 0!==this.colorTransform&&(P=!!this.colorTransform),n=this.components[0],a=this.components[1],o=this.components[2],h=0;h<r;h++)for(t=n.lines[0|h*n.scaleY*A],i=a.lines[0|h*a.scaleY*A],c=o.lines[0|h*o.scaleY*A],l=0;l<e;l++)P?(u=t[0|l*n.scaleX*X],m=i[0|l*a.scaleX*X],g=p(u+1.402*((v=c[0|l*o.scaleX*X])-128)),y=p(u-.3441363*(m-128)-.71413636*(v-128)),x=p(u+1.772*(m-128))):(g=t[0|l*n.scaleX*X],y=i[0|l*a.scaleX*X],x=c[0|l*o.scaleX*X]),C[L++]=g,C[L++]=y,C[L++]=x;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(P=!1,this.adobe&&this.adobe.transformCode?P=!0:void 0!==this.colorTransform&&(P=!!this.colorTransform),n=this.components[0],a=this.components[1],o=this.components[2],s=this.components[3],h=0;h<r;h++)for(t=n.lines[0|h*n.scaleY*A],i=a.lines[0|h*a.scaleY*A],c=o.lines[0|h*o.scaleY*A],f=s.lines[0|h*s.scaleY*A],l=0;l<e;l++)P?(u=t[0|l*n.scaleX*X],m=i[0|l*a.scaleX*X],v=c[0|l*o.scaleX*X],d=f[0|l*s.scaleX*X],b=255-p(u+1.402*(v-128)),w=255-p(u-.3441363*(m-128)-.71413636*(v-128)),k=255-p(u+1.772*(m-128))):(b=t[0|l*n.scaleX*X],w=i[0|l*a.scaleX*X],k=c[0|l*o.scaleX*X],d=f[0|l*s.scaleX*X]),C[L++]=255-b,C[L++]=255-w,C[L++]=255-k,C[L++]=255-d;break;default:throw"Unsupported color mode"}return C},copyToImageData:function(e){var r,n,a,o,s,t,i,c,f,l=e.width,h=e.height,u=e.data,m=this.getData(l,h),v=0,d=0;switch(this.components.length){case 1:for(n=0;n<h;n++)for(r=0;r<l;r++)a=m[v++],u[d++]=a,u[d++]=a,u[d++]=a,u[d++]=255;break;case 3:for(n=0;n<h;n++)for(r=0;r<l;r++)i=m[v++],c=m[v++],f=m[v++],u[d++]=i,u[d++]=c,u[d++]=f,u[d++]=255;break;case 4:for(n=0;n<h;n++)for(r=0;r<l;r++)s=m[v++],t=m[v++],a=m[v++],i=255-p(s*(1-(o=m[v++])/255)+o),c=255-p(t*(1-o/255)+o),f=255-p(a*(1-o/255)+o),u[d++]=i,u[d++]=c,u[d++]=f,u[d++]=255;break;default:throw"Unsupported color mode"}}},f}();function n(n,a){var o=new Uint8Array(n),s=new r;s.parse(o);var t={width:s.width,height:s.height,data:a?new Uint8Array(s.width*s.height*4):new e(s.width*s.height*4)};return s.copyToImageData(t),t}module.exports=n;
},{"buffer":"a+bp"}],"s9ly":[function(require,module,exports) {
var e=require("./lib/encoder"),r=require("./lib/decoder");module.exports={encode:e,decode:r};
},{"./lib/encoder":"SLPw","./lib/decoder":"TyOO"}],"vZTg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=n,exports.decode=o,exports.toBase64URL=a;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),r=0;r<e.length;r++)t[e.charCodeAt(r)]=r;function n(t){var r=void 0,n=t.length,o="";for(r=0;r<n;r+=3)o+=e[t[r]>>2],o+=e[(3&t[r])<<4|t[r+1]>>4],o+=e[(15&t[r+1])<<2|t[r+2]>>6],o+=e[63&t[r+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o}function o(e){var r=.75*e.length,n=e.length,o=0,a=void 0,d=void 0,i=void 0,h=void 0;"="===e[e.length-1]&&(r--,"="===e[e.length-2]&&r--);for(var s=new Uint8Array(r),c=0;c<n;c+=4)a=t[e.charCodeAt(c)],d=t[e.charCodeAt(c+1)],i=t[e.charCodeAt(c+2)],h=t[e.charCodeAt(c+3)],s[o++]=a<<2|d>>4,s[o++]=(15&d)<<4|i>>2,s[o++]=(3&i)<<6|63&h;return s}function a(e,t){return"data:"+t+";base64,"+n(e)}
},{}],"QYNo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvas=n,exports.fetchBinary=o,exports.createWriteStream=s,exports.writeFile=a;var e="browser",t=self.ImageData,r=self.Image;function n(e,t){var r=self.document.createElement("canvas");return r.width=e,r.height=t,r}function o(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).withCredentials,r=void 0!==t&&t;return new Promise(function(t,n){var o=new self.XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.withCredentials=r,o.onload=function(e){200!==this.status?n(e):t(this.response)},o.onerror=n,o.send()})}function s(){throw new Error("createWriteStream does not exist in the browser")}function a(){throw new Error("writeFile does not exist in the browser")}exports.env=e,exports.ImageData=t,exports.DOMImage=r;
},{}],"kk51":[function(require,module,exports) {
"use strict";function e(e){return e.includes("/")||(e="image/"+e),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getType=e;
},{}],"dOgB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.default=g;var t=require("blob-util"),a=require("fast-bmp"),n=require("fast-png"),i=require("jpeg-js"),o=require("../../util/base64"),r=require("./environment"),s=require("./mediaTypes");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={width:e.width,height:e.height,data:e.getRGBAData()};return(0,i.encode)(a,t.quality).data}function h(e,t){var a={width:e.width,height:e.height,components:e.components,alpha:e.alpha,bitDepth:e.bitDepth,data:e.data};return 1!==a.bitDepth&&32!==a.bitDepth||(a.bitDepth=8,a.components=3,a.alpha=1,a.data=e.getRGBAData()),(0,n.encode)(a,t)}var d={save:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.useCanvas,o=void 0!==i&&i,s=n.encoder,d=void 0===s?void 0:s,g=n.format;if(!g){var v=/\.([a-zA-Z]+)$/.exec(e);v&&(g=v[1].toLowerCase())}if(!g)throw new Error("file format not provided");return new Promise(function(n,i){var s=void 0,v=void 0;switch(g.toLowerCase()){case"png":o?s=t.getCanvas().pngStream():v=h(t,d);break;case"jpg":case"jpeg":o?s=t.getCanvas().jpegStream():v=u(t,d);break;case"bmp":v=(0,a.encode)(t,d);break;default:throw new RangeError("invalid output format: "+g)}if(s){var p=(0,r.createWriteStream)(e);p.on("finish",n),p.on("error",i),s.pipe(p)}else v&&(0,r.writeFile)(e,v,function(e){e?i(e):n()})})},toDataURL:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"===(void 0===t?"undefined":e(t))&&(n=t,t="image/png");var i=n,r=i.useCanvas,d=void 0!==r&&r,g=i.encoder,v=void 0===g?void 0:g;function p(e,a){var n=e(a,v);return(0,o.toBase64URL)(n,t)}return"image/bmp"===(t=(0,s.getType)(t))?p(a.encode,this):"image/png"!==t||d?"image/jpeg"!==t||d?this.getCanvas().toDataURL(t):p(u,this):p(h,this)},toBuffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,n=void 0===t?"png":t,i=e.encoder,o=void 0===i?void 0:i;switch(n.toLowerCase()){case"png":return h(this,o);case"jpeg":case"jpg":return u(this,o);case"bmp":return(0,a.encode)(this,o);default:throw new RangeError("invalid output format: "+n)}},toBase64:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.async)return this.toDataURL(e,t).then(function(e){return e.substring(e.indexOf(",")+1)});var a=this.toDataURL(e,t);return a.substring(a.indexOf(",")+1)},toBlob:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.8;return(0,t.canvasToBlob)(this.getCanvas(),e,a)},getCanvas:function(){var e=new r.ImageData(this.getRGBAData({clamped:!0}),this.width,this.height),t=(0,r.createCanvas)(this.width,this.height);return t.getContext("2d").putImageData(e,0,0),t}};function g(e){for(var t in d)e.prototype[t]=d[t]}
},{"blob-util":"Pb9L","fast-bmp":"clWY","fast-png":"gBiN","jpeg-js":"s9ly","../../util/base64":"vZTg","./environment":"QYNo","./mediaTypes":"kk51"}],"C/67":[function(require,module,exports) {
module.exports={name:"has-own",version:"1.0.0",description:"A safer .hasOwnProperty() - hasOwn(name, obj)",main:"index.js",scripts:{test:"make test"},author:"Aaron Heckmann <aaron.heckmann+github@gmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/pebble/has-own.git"},homepage:"https://github.com/pebble/has-own/",devDependencies:{mocha:"^1.21.0"}};
},{}],"Skm1":[function(require,module,exports) {
var e=Object.prototype.hasOwnProperty;module.exports=exports=function(r,o){return e.call(o,r)},exports.version=require("./package").version;
},{"./package":"C/67"}],"PRHq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.extendMethod=a,exports.extendProperty=l;var t=require("has-own"),e=o(t),r=require("../Image"),n=o(r);function o(t){return t&&t.__esModule?t:{default:t}}function u(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var i={configurable:!0,enumerable:!1,get:void 0};function a(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.inPlace,i=void 0!==o&&o,a=r.returnThis,l=void 0===a||a,d=r.partialArgs,p=void 0===d?[]:d;return n.default.prototype[t]=i?function(){this.computed=null;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=e.apply(this,[].concat(u(p),r));return l?this:o}:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,[].concat(u(p),r))},n.default}function l(t,r){var o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).partialArgs,u=void 0===o?[]:o;return i.get=function(){if(null===this.computed)this.computed={};else if((0,e.default)(t,this.computed))return this.computed[t];var n=r.apply(this,u);return this.computed[t]=n,n},Object.defineProperty(n.default.prototype,t,i),n.default}
},{"has-own":"Skm1","../Image":"U4ir"}],"DvVr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.GREY="GREY",r=exports.RGB="RGB",t=exports.HSL="HSL",s=exports.HSV="HSV",o=exports.CMYK="CMYK";
},{}],"VPwp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../model/model");function a(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}function e(){var a=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).clamped;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});var e=this.width*this.height*4,l=a?new Uint8ClampedArray(e):new Uint8Array(e);return 1===this.bitDepth?i(this,l):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?h(this,l):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[t.RGB]}),r(this,l))):1===this.components?n(this,l):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[t.RGB]}),s(this,l)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),o(this,l)):c(this,l),l}function i(t,a){for(var e=0;e<t.size;e++){var i=t.getBit(e);a[4*e]=255*i,a[4*e+1]=255*i,a[4*e+2]=255*i}}function h(t,a){for(var e=t.min[0],i=t.max[0]-e,h=0;h<t.size;h++){var r=Math.floor(255*(t.data[h]-e)/i);a[4*h]=r,a[4*h+1]=r,a[4*h+2]=r}}function r(t,e){for(var i=Math.min.apply(Math,a(t.min)),h=Math.max.apply(Math,a(t.max))-i,r=0;r<t.size;r++){var n=Math.floor(255*(t.data[3*r]-i)/h),s=Math.floor(255*(t.data[3*r+1]-i)/h),o=Math.floor(255*(t.data[3*r+2]-i)/h);e[4*r]=n,e[4*r+1]=s,e[4*r+2]=o}}function n(t,a){for(var e=0;e<t.size;e++)a[4*e]=t.data[e*t.channels]>>>t.bitDepth-8,a[4*e+1]=t.data[e*t.channels]>>>t.bitDepth-8,a[4*e+2]=t.data[e*t.channels]>>>t.bitDepth-8}function s(t,a){for(var e=0;e<t.size;e++)a[4*e]=t.data[e*t.channels]>>>t.bitDepth-8,a[4*e+1]=t.data[e*t.channels+1]>>>t.bitDepth-8,a[4*e+2]=t.data[e*t.channels+2]>>>t.bitDepth-8}function o(t,a){for(var e=0;e<t.size;e++)a[4*e+3]=t.data[e*t.channels+t.components]>>t.bitDepth-8}function c(t,a){for(var e=0;e<t.size;e++)a[4*e+3]=255}
},{"../model/model":"DvVr"}],"69CM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.BINARY="BINARY",r=exports.GREY="GREY",t=exports.GREYA="GREYA",s=exports.RGB="RGB",o=exports.RGBA="RGBA",R=exports.CMYK="CMYK",Y=exports.CMYKA="CMYKA";
},{}],"WvAL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getKind=i,exports.verifyKindDefinition=p,exports.getTheoreticalPixelArraySize=c,exports.createPixelArray=s;var e=require("../model/model"),r=n(e),o=require("./kindNames"),t=n(o);function n(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r.default=e,r}var a={};function i(e){var r=a[e];if(!r)throw new RangeError("invalid image kind: "+e);return r}a[t.BINARY]={components:1,alpha:0,bitDepth:1,colorModel:r.GREY},a[t.GREYA]={components:1,alpha:1,bitDepth:8,colorModel:r.GREY},a[t.GREY]={components:1,alpha:0,bitDepth:8,colorModel:r.GREY},a[t.RGBA]={components:3,alpha:1,bitDepth:8,colorModel:r.RGB},a[t.RGB]={components:3,alpha:0,bitDepth:8,colorModel:r.RGB},a[t.CMYK]={components:4,alpha:0,bitDepth:8,colorModel:r.CMYK},a[t.CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:r.CMYK};var l=[1,8,16,32];function p(e){var o=e.components,t=e.alpha,n=e.bitDepth,a=e.colorModel;if(!Number.isInteger(o)||o<=0)throw new RangeError("invalid components: "+o+". Must be a positive integer");if(0!==t&&1!==t&&"boolean"!=typeof t)throw new TypeError("invalid alpha: "+t+": must be a boolean, 0 or 1");if(!l.includes(n))throw new RangeError("invalid bitDepth: "+n+". Must be one of "+l.join(", "));if(!r[a])throw new RangeError("invalid colorModel: "+a+". Must be one of "+Object.keys(r).join(", "))}function c(e,r,o){var t=r*e;return 1===o&&(t=Math.ceil(t/8)),t}function s(e,r,o,t,n,a){var i=t*e,l=void 0;switch(n){case 1:l=new Uint8Array(Math.ceil(i/8));break;case 8:l=new Uint8Array(i);break;case 16:l=new Uint16Array(i);break;case 32:l=new Float32Array(i);break;default:throw new Error("Cannot create pixel array for bit depth "+n)}if(o)for(var p=r;p<l.length;p+=t)l[p]=a;return l}
},{"../model/model":"DvVr","./kindNames":"69CM"}],"1F0D":[function(require,module,exports) {
"use strict";const t=8192,e=[];class i{constructor(e,i){i=i||{},void 0===e&&(e=t),"number"==typeof e&&(e=new ArrayBuffer(e));let s=e.byteLength;const a=i.offset?i.offset>>>0:0;e.buffer&&(s=e.byteLength-a,e=e.byteLength!==e.buffer.byteLength?e.buffer.slice(e.byteOffset+a,e.byteOffset+e.byteLength):a?e.buffer.slice(a):e.buffer),this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=s||t,this._mark=0}available(t){return void 0===t&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(t){void 0===t&&(t=1),this.offset+=t}seek(t){this.offset=t}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(t){if(void 0===t&&(t=1),!this.available(t)){const t=this._increment+this._increment;this._increment=t;const e=this.length+t,i=new Uint8Array(e);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=e,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){void 0===t&&(t=1);for(var e=new Uint8Array(t),i=0;i<t;i++)e[i]=this.readByte();return e}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t){void 0===t&&(t=1),e.length=t;for(var i=0;i<t;i++)e[i]=this.readChar();return e.join("")}writeBoolean(t){this.writeUint8(t?255:0)}writeInt8(t){this.ensureAvailable(1),this._data.setInt8(this.offset++,t)}writeUint8(t){this.ensureAvailable(1),this._data.setUint8(this.offset++,t)}writeByte(t){this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e])}writeInt16(t){this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2}writeUint16(t){this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2}writeInt32(t){this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4}writeUint32(t){this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat32(t){this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4}writeFloat64(t){this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8}writeChar(t){this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}module.exports=i;
},{}],"v6t8":[function(require,module,exports) {
"use strict";const e={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},a={};for(var t in e)a[e[t]]=t;module.exports={tagsById:e,tagsByName:a};
},{}],"znAs":[function(require,module,exports) {
"use strict";const e={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},i={};for(var t in e)i[e[t]]=t;module.exports={tagsById:e,tagsByName:i};
},{}],"DxvP":[function(require,module,exports) {
"use strict";const e={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t={};for(var S in e)t[e[S]]=S;module.exports={tagsById:e,tagsByName:t};
},{}],"mwnH":[function(require,module,exports) {
"use strict";const t={standard:require("./tags/standard"),exif:require("./tags/exif"),gps:require("./tags/gps")};class s{constructor(t){if(!t)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=t,this._map=null}get(s){if("number"==typeof s)return this.fields.get(s);if("string"==typeof s)return this.fields.get(t[this.kind].tagsByName[s]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const i=t[this.kind].tagsById;for(var s of this.fields.keys())i[s]&&(this._map[i[s]]=this.fields.get(s))}return this._map}}module.exports=s;
},{"./tags/standard":"v6t8","./tags/exif":"znAs","./tags/gps":"DxvP"}],"smdC":[function(require,module,exports) {
"use strict";const t=require("./ifd"),e=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class r extends t{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var t=new Date,r=e.exec(this.dateTime);return t.setFullYear(r[1],r[2]-1,r[3]),t.setHours(r[4],r[5],r[6]),t}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return i(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return i(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function i(t){return"number"==typeof t?[t]:t}module.exports=r;
},{"./ifd":"mwnH"}],"WSdI":[function(require,module,exports) {
"use strict";var r=new Map([[1,[1,n]],[2,[1,t]],[3,[2,e]],[4,[4,a]],[5,[8,i]],[6,[1,u]],[7,[1,n]],[8,[2,f]],[9,[4,o]],[10,[8,d]],[11,[4,c]],[12,[8,U]]]);function n(r,n){if(1===n)return r.readUint8();for(var t=new Uint8Array(n),e=0;e<n;e++)t[e]=r.readUint8();return t}function t(r,n){for(var t=[],e="",a=0;a<n;a++){var i=String.fromCharCode(r.readUint8());"\0"===i?(t.push(e),e=""):e+=i}return 1===t.length?t[0]:t}function e(r,n){if(1===n)return r.readUint16();for(var t=new Uint16Array(n),e=0;e<n;e++)t[e]=r.readUint16();return t}function a(r,n){if(1===n)return r.readUint32();for(var t=new Uint32Array(n),e=0;e<n;e++)t[e]=r.readUint32();return t}function i(r,n){if(1===n)return r.readUint32()/r.readUint32();for(var t=new Array(n),e=0;e<n;e++)t[e]=r.readUint32()/r.readUint32();return t}function u(r,n){if(1===n)return r.readInt8();for(var t=new Int8Array(n),e=0;e<n;e++)t[e]=r.readInt8();return t}function f(r,n){if(1===n)return r.readInt16();for(var t=new Int16Array(n),e=0;e<n;e++)t[e]=r.readInt16();return t}function o(r,n){if(1===n)return r.readInt32();for(var t=new Int32Array(n),e=0;e<n;e++)t[e]=r.readInt32();return t}function d(r,n){if(1===n)return r.readInt32()/r.readInt32();for(var t=new Array(n),e=0;e<n;e++)t[e]=r.readInt32()/r.readInt32();return t}function c(r,n){if(1===n)return r.readFloat32();for(var t=new Float32Array(n),e=0;e<n;e++)t[e]=r.readFloat32();return t}function U(r,n){if(1===n)return r.readFloat64();for(var t=new Float64Array(n),e=0;e<n;e++)t[e]=r.readFloat64();return t}exports.getByteLength=function(n,t){return r.get(n)[0]*t},exports.readData=function(n,t,e){return r.get(t)[1](n,e)};
},{}],"6NK9":[function(require,module,exports) {
"use strict";const t=require("iobuffer"),e=require("./ifd"),i=require("./tiffIfd"),r=require("./ifdValue"),n={ignoreImageData:!1,onlyFirst:!1};class s extends t{constructor(t,e){super(t,e),this._nextIFD=0}decode(t){t=Object.assign({},n,t);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t)),t.onlyFirst)return e[0];return e}decodeHeader(){let t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error("invalid byte order: 0x"+t.toString(16));this.setBigEndian()}if(42!==(t=this.readUint16()))throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t){var r;this.seek(this._nextIFD),r=t.kind?new e(t.kind):new i;const n=this.readUint16();for(var s=0;s<n;s++)this.decodeIFDEntry(r);return t.ignoreImageData||this.decodeImageData(r),this._nextIFD=this.readUint32(),r}decodeIFDEntry(t){const e=this.offset,i=this.readUint16(),n=this.readUint16(),s=this.readUint32();if(n<1||n>12)return void this.skip(4);r.getByteLength(n,s)>4&&this.seek(this.readUint32());const a=r.readData(this,n,s);if(t.fields.set(i,a),34665===i||34853===i){let e,r=this.offset;34665===i?e="exif":34853===i&&(e="gps"),this._nextIFD=a,t[e]=this.decodeIFD({kind:e,ignoreImageData:!0}),this.offset=r}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;switch(e&&1!==e&&f("orientation",e),t.type){case 1:case 2:this.readStripData(t);break;default:f("image type",t.type)}}readStripData(t){const e=t.width,i=t.height,r=c(t.bitsPerSample),n=t.sampleFormat;let s=e*i;const u=a(s,1,r,n),p=t.compression,l=t.rowsPerStrip*e,g=t.stripOffsets,D=t.stripByteCounts;for(var w=0,F=0;F<g.length;F++){var I=this.getStripData(p,g[F],D[F]),m=s>l?l:s;s-=m,8===r?w=o(u,I,w,m):16===r?w=d(u,I,w,m,this.isLittleEndian()):32===r&&3===n?w=h(u,I,w,m,this.isLittleEndian()):f("bitDepth",r)}t.data=u}getStripData(t,e,i){switch(t){case 1:return new DataView(this.buffer,e,i);case 2:case 32773:return f("Compression",t);default:throw new Error("invalid compression: "+t)}}}function a(t,e,i,r){return 8===i?new Uint8Array(t*e):16===i?new Uint16Array(t*e):32===i&&3===r?new Float32Array(t*e):f("bit depth / sample format",i+" / "+r)}function o(t,e,i,r){for(var n=0;n<r;n++)t[i++]=e.getUint8(n);return i}function d(t,e,i,r,n){for(var s=0;s<2*r;s+=2)t[i++]=e.getUint16(s,n);return i}function h(t,e,i,r,n){for(var s=0;s<4*r;s+=4)t[i++]=e.getFloat32(s,n);return i}function f(t,e){throw new Error("Unsupported "+t+": "+e)}function c(t){if(t.length){const i=t;t=i[0];for(var e=0;e<i.length;e++)i[e]!==t&&f("bit depth",i)}return t}module.exports=s;
},{"iobuffer":"1F0D","./ifd":"mwnH","./tiffIfd":"smdC","./ifdValue":"WSdI"}],"n7fl":[function(require,module,exports) {
"use strict";const e=require("./tiffDecoder");module.exports=function(r,t){return new e(r,t).decode(t)};
},{"./tiffDecoder":"6NK9"}],"mPhg":[function(require,module,exports) {
"use strict";exports.decode=require("./decode");
},{"./decode":"n7fl"}],"iagD":[function(require,module,exports) {
"use strict";const e=require("iobuffer"),t=require("tiff");function r(r){const i=new e(r),n={};if(i.setBigEndian(),65496!==i.readUint16())throw new Error("SOI marker not found. Not a valid JPEG file");if(65505===i.readUint16()){i.readUint16();const e=i.readBytes(6);if(69===e[0]&&120===e[1]&&105===e[2]&&102===e[3]&&0===e[4]&&0===e[5]){const e=t.decode(i,{onlyFirst:!0,ignoreImageData:!0,offset:i.offset});n.exif=e}}return n}module.exports=r;
},{"iobuffer":"1F0D","tiff":"mPhg"}],"zHB0":[function(require,module,exports) {
"use strict";exports.decode=require("./decode");
},{"./decode":"iagD"}],"NROG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},a={};for(var t in e)a[e[t]]=t;exports.tagsById=e,exports.tagsByName=a;
},{}],"wSjP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},i={};for(var t in e)i[e[t]]=t;exports.tagsById=e,exports.tagsByName=i;
},{}],"sdR5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},t={};for(var S in e)t[e[S]]=S;exports.tagsById=e,exports.tagsByName=t;
},{}],"y7rP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./tags/standard"),e=n(t),r=require("./tags/exif"),s=n(r),i=require("./tags/gps"),a=n(i);function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}const o={standard:e,exif:s,gps:a};class f{constructor(t){if(!t)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=t,this._map=null}get(t){if("number"==typeof t)return this.fields.get(t);if("string"==typeof t)return this.fields.get(o[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const e=o[this.kind].tagsById;for(var t of this.fields.keys())e[t]&&(this._map[e[t]]=this.fields.get(t))}return this._map}}exports.default=f;
},{"./tags/standard":"NROG","./tags/exif":"wSjP","./tags/gps":"sdR5"}],"qI13":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./ifd"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}const i=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class s extends e.default{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var t=new Date,e=i.exec(this.dateTime);return t.setFullYear(e[1],e[2]-1,e[3]),t.setHours(e[4],e[5],e[6]),t}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return g(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return g(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function g(t){return"number"==typeof t?[t]:t}exports.default=s;
},{"./ifd":"y7rP"}],"gg03":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getByteLength=n,exports.readData=t;var r=new Map([[1,[1,e]],[2,[1,a]],[3,[2,i]],[4,[4,u]],[5,[8,o]],[6,[1,f]],[7,[1,e]],[8,[2,d]],[9,[4,c]],[10,[8,v]],[11,[4,U]],[12,[8,I]]]);function n(n,t){return r.get(n)[0]*t}function t(n,t,e){return r.get(t)[1](n,e)}function e(r,n){if(1===n)return r.readUint8();for(var t=new Uint8Array(n),e=0;e<n;e++)t[e]=r.readUint8();return t}function a(r,n){for(var t=[],e="",a=0;a<n;a++){var i=String.fromCharCode(r.readUint8());"\0"===i?(t.push(e),e=""):e+=i}return 1===t.length?t[0]:t}function i(r,n){if(1===n)return r.readUint16();for(var t=new Uint16Array(n),e=0;e<n;e++)t[e]=r.readUint16();return t}function u(r,n){if(1===n)return r.readUint32();for(var t=new Uint32Array(n),e=0;e<n;e++)t[e]=r.readUint32();return t}function o(r,n){if(1===n)return r.readUint32()/r.readUint32();for(var t=new Array(n),e=0;e<n;e++)t[e]=r.readUint32()/r.readUint32();return t}function f(r,n){if(1===n)return r.readInt8();for(var t=new Int8Array(n),e=0;e<n;e++)t[e]=r.readInt8();return t}function d(r,n){if(1===n)return r.readInt16();for(var t=new Int16Array(n),e=0;e<n;e++)t[e]=r.readInt16();return t}function c(r,n){if(1===n)return r.readInt32();for(var t=new Int32Array(n),e=0;e<n;e++)t[e]=r.readInt32();return t}function v(r,n){if(1===n)return r.readInt32()/r.readInt32();for(var t=new Array(n),e=0;e<n;e++)t[e]=r.readInt32()/r.readInt32();return t}function U(r,n){if(1===n)return r.readFloat32();for(var t=new Float32Array(n),e=0;e<n;e++)t[e]=r.readFloat32();return t}function I(r,n){if(1===n)return r.readFloat64();for(var t=new Float64Array(n),e=0;e<n;e++)t[e]=r.readFloat64();return t}
},{}],"UiGp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("iobuffer"),e=a(t),r=require("./ifd"),i=a(r),n=require("./tiffIfd"),s=a(n),o=require("./ifdValue");function a(t){return t&&t.__esModule?t:{default:t}}const d={ignoreImageData:!1,onlyFirst:!1};class f extends e.default{constructor(t,e){super(t,e),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0}),2===t)return!0;if(1===t)return!1;throw g("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0});if(t>0)return t;throw g("ifdCount",t)}decode(t){t=Object.assign({},d,t);const e=[];for(this.decodeHeader();this._nextIFD;)if(e.push(this.decodeIFD(t)),t.onlyFirst)return e[0];return e}decodeHeader(){const t=this.readUint16();if(18761===t)this.setLittleEndian();else{if(19789!==t)throw new Error("invalid byte order: 0x"+t.toString(16));this.setBigEndian()}if(42!==this.readUint16())throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t){var e;this.seek(this._nextIFD),e=t.kind?new i.default(t.kind):new s.default;const r=this.readUint16();for(var n=0;n<r;n++)this.decodeIFDEntry(e);return t.ignoreImageData||this.decodeImageData(e),this._nextIFD=this.readUint32(),e}decodeIFDEntry(t){const e=this.offset,r=this.readUint16(),i=this.readUint16(),n=this.readUint32();if(i<1||i>12)return void this.skip(4);(0,o.getByteLength)(i,n)>4&&this.seek(this.readUint32());const s=(0,o.readData)(this,i,n);if(t.fields.set(r,s),34665===r||34853===r){let e,i=this.offset;34665===r?e="exif":34853===r&&(e="gps"),this._nextIFD=s,t[e]=this.decodeIFD({kind:e,ignoreImageData:!0}),this.offset=i}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;if(e&&1!==e)throw g("orientation",e);switch(t.type){case 1:case 2:this.readStripData(t);break;default:throw g("image type",t.type)}}readStripData(t){const e=t.width,r=t.height,i=p(t.bitsPerSample),n=t.sampleFormat,s=e*r,o=h(s,1,i,n),a=t.compression,d=t.rowsPerStrip*e,f=t.stripOffsets,u=t.stripByteCounts;for(var c=s,l=0,w=0;w<f.length;w++){var D=new DataView(this.buffer,f[w],u[w]),I=c>d?d:c;switch(c-=I,a){case 1:l=this.fillUncompressed(i,n,o,D,l,I);break;case 5:throw g("lzw");case 2:case 32773:throw g("Compression",a);default:throw new Error("invalid compression: "+a)}}t.data=o}fillUncompressed(t,e,r,i,n,s){if(8===t)return u(r,i,n,s);if(16===t)return c(r,i,n,s,this.isLittleEndian());if(32===t&&3===e)return l(r,i,n,s,this.isLittleEndian());throw g("bitDepth",t)}}function h(t,e,r,i){if(8===r)return new Uint8Array(t*e);if(16===r)return new Uint16Array(t*e);if(32===r&&3===i)return new Float32Array(t*e);throw g("bit depth / sample format",r+" / "+i)}function u(t,e,r,i){for(var n=0;n<i;n++)t[r++]=e.getUint8(n);return r}function c(t,e,r,i,n){for(var s=0;s<2*i;s+=2)t[r++]=e.getUint16(s,n);return r}function l(t,e,r,i,n){for(var s=0;s<4*i;s+=4)t[r++]=e.getFloat32(s,n);return r}function g(t,e){return new Error("Unsupported "+t+": "+e)}function p(t){if(t.length){const r=t;t=r[0];for(var e=0;e<r.length;e++)if(r[e]!==t)throw g("bit depth",r)}return t}exports.default=f;
},{"iobuffer":"ZdsI","./ifd":"y7rP","./tiffIfd":"qI13","./ifdValue":"gg03"}],"FNxQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pageCount=exports.isMultiPage=exports.decode=void 0;var e=require("./tiffDecoder"),t=u(e);function u(e){return e&&e.__esModule?e:{default:e}}function o(e,u={}){return new t.default(e,u).decode(u)}function r(e){return new t.default(e).isMultiPage}function n(e){return new t.default(e).pageCount}exports.decode=o,exports.isMultiPage=r,exports.pageCount=n;
},{"./tiffDecoder":"UiGp"}],"oXeu":[function(require,module,exports) {
"use strict";module.exports=(e=>{const i=new Uint8Array(e);if(!(i&&i.length>1))return null;const t=(e,t)=>{t=Object.assign({offset:0},t);for(let m=0;m<e.length;m++)if(e[m]!==i[m+t.offset])return!1;return!0};if(t([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(t([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(t([71,73,70]))return{ext:"gif",mime:"image/gif"};if(t([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(t([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((t([73,73,42,0])||t([77,77,0,42]))&&t([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(t([73,73,42,0])||t([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(t([66,77]))return{ext:"bmp",mime:"image/bmp"};if(t([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(t([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(t([80,75,3,4])&&t([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(t([80,75,3,4])&&t([77,69,84,65,45,73,78,70,47,109,111,122,105,108,108,97,46,114,115,97],{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(t([80,75])&&(3===i[2]||5===i[2]||7===i[2])&&(4===i[3]||6===i[3]||8===i[3]))return{ext:"zip",mime:"application/zip"};if(t([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(t([82,97,114,33,26,7])&&(0===i[6]||1===i[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(t([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(t([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(t([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(t([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(t([0,0,0])&&(24===i[3]||32===i[3])&&t([102,116,121,112],{offset:4})||t([51,103,112,53])||t([0,0,0,28,102,116,121,112,109,112,52,50])&&t([109,112,52,49,109,112,52,50,105,115,111,109],{offset:16})||t([0,0,0,28,102,116,121,112,105,115,111,109])||t([0,0,0,28,102,116,121,112,109,112,52,50,0,0,0,0]))return{ext:"mp4",mime:"video/mp4"};if(t([0,0,0,28,102,116,121,112,77,52,86]))return{ext:"m4v",mime:"video/x-m4v"};if(t([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(t([26,69,223,163])){const e=i.subarray(4,4100),t=e.findIndex((e,i,t)=>66===t[i]&&130===t[i+1]);if(t>=0){const i=t+3,m=t=>Array.from(t).every((t,m)=>e[i+m]===t.charCodeAt(0));if(m("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(m("webm"))return{ext:"webm",mime:"video/webm"}}}return t([0,0,0,20,102,116,121,112,113,116,32,32])||t([102,114,101,101],{offset:4})||t([102,116,121,112,113,116,32,32],{offset:4})||t([109,100,97,116],{offset:4})||t([119,105,100,101],{offset:4})?{ext:"mov",mime:"video/quicktime"}:t([82,73,70,70])&&t([65,86,73],{offset:8})?{ext:"avi",mime:"video/x-msvideo"}:t([48,38,178,117,142,102,207,17,166,217])?{ext:"wmv",mime:"video/x-ms-wmv"}:t([0,0,1,186])?{ext:"mpg",mime:"video/mpeg"}:t([73,68,51])||t([255,251])?{ext:"mp3",mime:"audio/mpeg"}:t([102,116,121,112,77,52,65],{offset:4})||t([77,52,65,32])?{ext:"m4a",mime:"audio/m4a"}:t([79,112,117,115,72,101,97,100],{offset:28})?{ext:"opus",mime:"audio/opus"}:t([79,103,103,83])?{ext:"ogg",mime:"audio/ogg"}:t([102,76,97,67])?{ext:"flac",mime:"audio/x-flac"}:t([82,73,70,70])&&t([87,65,86,69],{offset:8})?{ext:"wav",mime:"audio/x-wav"}:t([35,33,65,77,82,10])?{ext:"amr",mime:"audio/amr"}:t([37,80,68,70])?{ext:"pdf",mime:"application/pdf"}:t([77,90])?{ext:"exe",mime:"application/x-msdownload"}:67!==i[0]&&70!==i[0]||!t([87,83],{offset:1})?t([123,92,114,116,102])?{ext:"rtf",mime:"application/rtf"}:t([0,97,115,109])?{ext:"wasm",mime:"application/wasm"}:t([119,79,70,70])&&(t([0,1,0,0],{offset:4})||t([79,84,84,79],{offset:4}))?{ext:"woff",mime:"application/font-woff"}:t([119,79,70,50])&&(t([0,1,0,0],{offset:4})||t([79,84,84,79],{offset:4}))?{ext:"woff2",mime:"application/font-woff"}:t([76,80],{offset:34})&&(t([0,0,1],{offset:8})||t([1,0,2],{offset:8})||t([2,0,2],{offset:8}))?{ext:"eot",mime:"application/octet-stream"}:t([0,1,0,0,0])?{ext:"ttf",mime:"application/font-sfnt"}:t([79,84,84,79,0])?{ext:"otf",mime:"application/font-sfnt"}:t([0,0,1,0])?{ext:"ico",mime:"image/x-icon"}:t([70,76,86,1])?{ext:"flv",mime:"video/x-flv"}:t([37,33])?{ext:"ps",mime:"application/postscript"}:t([253,55,122,88,90,0])?{ext:"xz",mime:"application/x-xz"}:t([83,81,76,105])?{ext:"sqlite",mime:"application/x-sqlite3"}:t([78,69,83,26])?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:t([67,114,50,52])?{ext:"crx",mime:"application/x-google-chrome-extension"}:t([77,83,67,70])||t([73,83,99,40])?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:t([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121])?{ext:"deb",mime:"application/x-deb"}:t([33,60,97,114,99,104,62])?{ext:"ar",mime:"application/x-unix-archive"}:t([237,171,238,219])?{ext:"rpm",mime:"application/x-rpm"}:t([31,160])||t([31,157])?{ext:"Z",mime:"application/x-compress"}:t([76,90,73,80])?{ext:"lz",mime:"application/x-lzip"}:t([208,207,17,224,161,177,26,225])?{ext:"msi",mime:"application/x-msi"}:t([6,14,43,52,2,5,1,1,13,1,2,1,1,2])?{ext:"mxf",mime:"application/mxf"}:t([66,76,69,78,68,69,82])?{ext:"blend",mime:"application/x-blender"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}});
},{}],"Yzdr":[function(require,module,exports) {
"use strict";const e=require("file-type"),t=new Set(["jpg","png","gif","webp","tif","bmp","jxr","psd"]);module.exports=(p=>{const r=e(p);return t.has(r&&r.ext)?r:null});
},{"file-type":"oXeu"}],"4k85":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var i=require("../Stack"),o=t(i);function t(i){return i&&i.__esModule?i:{default:i}}function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i.algorithm,e=void 0===t?"matchToPrevious":t,r=i.ignoreBorder,s=void 0===r?[0,0]:r;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});var n="matchToPrevious"===e,h=this[0],a=[];a[0]={position:[0,0],image:this[0]};for(var p=[0,0],v=1;v<this.length;v++){var c=h.getBestMatch(this[v],{border:s});a[v]={position:[c[0]+p[0],c[1]+p[1]],image:this[v]},n&&(p[0]+=c[0],p[1]+=c[1],h=this[v])}for(var d=0,u=0,g=0,l=0,f=0;f<a.length;f++){var m=a[f];m.position[0]>d&&(d=m.position[0]),m.position[0]<u&&(u=m.position[0]),m.position[1]>g&&(g=m.position[1]),m.position[1]<l&&(l=m.position[1])}u=0-u,l=0-l;for(var b=0;b<a.length;b++){var P=a[b];P.crop=P.image.crop({x:d-P.position[0],y:g-P.position[1],width:h.width-u-d,height:h.height-l-g})}for(var _=[],w=0;w<a.length;w++)_[w]=a[w].crop;return new o.default(_)}
},{"../Stack":"hMWD"}],"8ExF":[function(require,module,exports) {
"use strict";function e(){this.checkProcessable("min",{bitDepth:[8,16]});for(var e=this[0].min,t=1;t<this.length;t++)for(var i=0;i<e.length;i++)e[i]=Math.min(e[i],this[t].min[i]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"are6":[function(require,module,exports) {
"use strict";function e(){this.checkProcessable("min",{bitDepth:[8,16]});for(var e=this[0].max,t=1;t<this.length;t++)for(var r=0;r<e.length;r++)e[r]=Math.max(e[r],this[t].max[r]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"JFA9":[function(require,module,exports) {
"use strict";function r(r){var e=r.reduce(function(r,e){return r+e});if(0===e)throw new Error("unreachable");for(var n=0,t=0,o=e/2,i=void 0;;){if(r[n]>0){if(void 0!==i)return(i+n)/2;if((t+=r[n])>o)return n;t===o&&(i=n)}n++}}function e(r){for(var e=0,n=0,t=0;t<r.length;t++)e+=r[t],n+=r[t]*t;return 0===e?0:n/e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.median=r,exports.mean=e;
},{}],"Mswo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/histogram");function t(){this.checkProcessable("median",{bitDepth:[8,16]});for(var t=this.getHistograms({maxSlots:this[0].maxValue+1}),r=new Array(t.length),a=0;a<t.length;a++){var s=t[a];r[a]=(0,e.median)(s)}return r}
},{"../../util/histogram":"JFA9"}],"UrNL":[function(require,module,exports) {
"use strict";function t(t){this.checkProcessable("min",{bitDepth:[8,16]});for(var e=this[0].getHistogram(t),r=1;r<this.length;r++)for(var s=this[r].getHistogram(t),i=0;i<e.length;i++)e[i]+=s[i];return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"lWfH":[function(require,module,exports) {
"use strict";function t(t){this.checkProcessable("min",{bitDepth:[8,16]});for(var e=this[0].getHistograms(t),r=e[0].length,s=1;s<this.length;s++)for(var i=this[s].getHistograms(t),o=0;o<e.length;o++)for(var h=0;h<r;h++)e[o][h]+=i[o][h];return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ZTgr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../../image/Image"),t=a(e);function a(e){return e&&e.__esModule?e:{default:e}}function r(){this.checkProcessable("average",{bitDepth:[8,16]});for(var e=new Uint32Array(this[0].data.length),a=0;a<this.length;a++)for(var r=this[a],i=0;i<this[0].data.length;i++)e[i]+=r.data[i];for(var s=t.default.createFrom(this[0]),h=s.data,n=0;n<this[0].data.length;n++)h[n]=e[n]/this.length;return s}
},{"../../image/Image":"U4ir"}],"MhsT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=require("./transform/matchAndCrop"),t=M(e),r=require("./compute/min"),d=M(r),u=require("./compute/max"),o=M(u),a=require("./compute/median"),i=M(a),n=require("./compute/histogram"),m=M(n),f=require("./compute/histograms"),l=M(f),s=require("./utility/average"),g=M(s);function M(e){return e&&e.__esModule?e:{default:e}}function c(e){e.extendMethod("matchAndCrop",t.default),e.extendMethod("getMin",d.default),e.extendMethod("getMax",o.default),e.extendMethod("getMedian",i.default),e.extendMethod("getHistogram",m.default),e.extendMethod("getHistograms",l.default),e.extendMethod("getAverage",g.default)}
},{"./transform/matchAndCrop":"4k85","./compute/min":"8ExF","./compute/max":"are6","./compute/median":"Mswo","./compute/histogram":"UrNL","./compute/histograms":"lWfH","./utility/average":"ZTgr"}],"hMWD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),t=require("has-own"),r=s(t),i=require("../image/Image"),o=s(i),n=require("./extend"),a=s(n);function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u={configurable:!0,enumerable:!1,get:void 0},f=function(t){function i(e){if(h(this,i),Array.isArray(e))for(var t=c(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e.length)),r=0;r<e.length;r++)t[r]=e[r];else if("number"==typeof e)t=c(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));else t=c(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.computed=null,c(t)}return p(i,Array),e(i,[{key:"checkProcessable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw new TypeError("The process: "+e+" can not be applied on an empty stack");this[0].checkProcessable(e,t);for(var r=1;r<this.length;r++){if((void 0===t.sameSize||t.sameSize)&&this[0].width!==this[r].width)throw new TypeError("The process: "+e+" can not be applied if width is not identical in all images");if((void 0===t.sameSize||t.sameSize)&&this[0].height!==this[r].height)throw new TypeError("The process: "+e+" can not be applied if height is not identical in all images");if((void 0===t.sameAlpha||t.sameAlpha)&&this[0].alpha!==this[r].alpha)throw new TypeError("The process: "+e+" can not be applied if alpha is not identical in all images");if((void 0===t.sameBitDepth||t.sameBitDepth)&&this[0].bitDepth!==this[r].bitDepth)throw new TypeError("The process: "+e+" can not be applied if bitDepth is not identical in all images");if((void 0===t.sameColorModel||t.sameColorModel)&&this[0].colorModel!==this[r].colorModel)throw new TypeError("The process: "+e+" can not be applied if colorModel is not identical in all images");if((void 0===t.sameNumberChannels||t.sameNumberChannels)&&this[0].channels!==this[r].channels)throw new TypeError("The process: "+e+" can not be applied if channels is not identical in all images")}}}],[{key:"load",value:function(e){return Promise.all(e.map(o.default.load)).then(function(e){return new i(e)})}},{key:"extendMethod",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.inPlace,n=void 0!==o&&o,a=r.returnThis,s=void 0===a||a,h=r.partialArgs,c=void 0===h?[]:h;return i.prototype[e]=n?function(){this.computed=null;for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=t.apply(this,[].concat(l(c),r));return s?this:o}:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(this,[].concat(l(c),r))},i}},{key:"extendProperty",value:function(e,t){var o=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).partialArgs,n=void 0===o?[]:o;return u.get=function(){if(null===this.computed)this.computed={};else if((0,r.default)(e,this.computed))return this.computed[e];var i=t.apply(this,n);return this.computed[e]=i,i},Object.defineProperty(i.prototype,e,u),i}}]),i}();exports.default=f,Array[Symbol.species]||(f.prototype.map=function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function");for(var r=new f(this.length),i=0;i<this.length;i++)r[i]=e.call(t,this[i],i,this);return r}),(0,a.default)(f);
},{"has-own":"Skm1","../image/Image":"U4ir","./extend":"MhsT"}],"npdb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=g;var e=require("fast-png"),r=require("fast-jpeg"),t=require("jpeg-js"),a=require("tiff"),n=require("image-type"),i=m(n),o=require("../Image"),u=m(o),f=require("../../stack/Stack"),c=m(f),s=require("../../util/base64"),d=require("../model/model"),l=require("./environment");function m(e){return e&&e.__esModule?e:{default:e}}var p=/^data:[a-z]+\/([a-z]+);base64,/;function g(e,r){if("string"==typeof e)return v(e,r);if(e instanceof ArrayBuffer)return Promise.resolve(h(new Uint8Array(e)));if(e.buffer)return Promise.resolve(h(e));throw new Error('argument to "load" must be a string or buffer.')}function h(e,r){var t=(0,i.default)(e);if(t)switch(t.mime){case"image/png":return w(e);case"image/jpeg":return b(e);case"image/tiff":return q(e);default:return P(a(t.mime))}return P(a("application/octet-stream"));function a(t){return r||(0,s.toBase64URL)(e,t)}}function v(e,r){var t=e.slice(0,64).match(p);return(null!==t?Promise.resolve((0,s.decode)(e.slice(t[0].length))):(0,l.fetchBinary)(e,r)).then(function(r){return h(new Uint8Array(r),t?e:void 0)})}function w(r){var t=(0,e.decode)(r),a=t.bitDepth,n=t.data,i=t.colourType,o=void 0,f=0;switch(i){case 0:o=1;break;case 2:o=3;break;case 4:o=1,f=1;break;case 6:o=3,f=1;break;default:throw new Error("Unexpected colourType: "+i)}return new u.default(t.width,t.height,n,{components:o,alpha:f,bitDepth:a})}function b(e){var a=(0,r.decode)(e),n=void 0;a.exif&&(n=x(a.exif));var i=(0,t.decode)(e,!0);return new u.default(i.width,i.height,i.data,{meta:n})}function q(e){var r=(0,a.decode)(e);return 1===r.length?y(r[0]):new c.default(r.map(y))}function x(e){var r={tiff:e};return e.exif&&(r.exif=e.exif),e.gps&&(r.gps=e.gps),r}function y(e){return new u.default(e.width,e.height,e.data,{components:1,alpha:0,colorModel:d.GREY,bitDepth:e.bitsPerSample.length?e.bitsPerSample[0]:e.bitsPerSample,meta:x(e)})}function P(e,r){return r=r||{},new Promise(function(t,a){var n=new l.DOMImage;n.onload=function(){var e=n.width,a=n.height,i=(0,l.createCanvas)(e,a).getContext("2d");i.drawImage(n,0,0,e,a);var o=i.getImageData(0,0,e,a).data;t(new u.default(e,a,o,r))},n.onerror=function(){a(new Error("Could not load "+e))},n.src=e})}
},{"fast-png":"gBiN","fast-jpeg":"zHB0","jpeg-js":"s9ly","tiff":"FNxQ","image-type":"Yzdr","../Image":"U4ir","../../stack/Stack":"hMWD","../../util/base64":"vZTg","../model/model":"DvVr","./environment":"QYNo"}],"rla0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t={getValueXY:function(t,e,n){return this.data[(e*this.width+t)*this.channels+n]},setValueXY:function(t,e,n,i){return this.data[(e*this.width+t)*this.channels+n]=i,this.computed=null,this},getValue:function(t,e){return this.data[t*this.channels+e]},setValue:function(t,e,n){return this.data[t*this.channels+e]=n,this.computed=null,this},getPixelXY:function(t,e){return this.getPixel(e*this.width+t)},setPixelXY:function(t,e,n){return this.setPixel(e*this.width+t,n)},getPixel:function(t){for(var e=new Array(this.channels),n=t*this.channels,i=0;i<this.channels;i++)e[i]=this.data[n+i];return e},setPixel:function(t,e){for(var n=t*this.channels,i=0;i<e.length;i++)this.data[n+i]=e[i];return this.computed=null,this}};function e(e){for(var n in t)e.prototype[n]=t[n]}
},{}],"8QIG":[function(require,module,exports) {
"use strict";function e(e){return{width:e.width,height:e.height,components:e.components,alpha:e.alpha,colorModel:e.colorModel,bitDepth:e.bitDepth}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"2F61":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOutputImage=u,exports.getOutputImageOrInPlace=a;var e=require("../Image"),t=n(e),r=require("./getImageParameters"),o=n(r);function n(e){return e&&e.__esModule?e:{default:e}}function u(e,r,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.out;if(void 0===a)return u.copy?e.clone():t.default.createFrom(e,n);if(!t.default.isImage(a))throw new TypeError("out must be an Image object");var i=Object.assign((0,o.default)(e),n);for(var l in i)if(a[l]!==i[l])throw new RangeError("cannot use out. Its "+l+' must be "'+i[l]+'" (found "'+a[l]+'")');return a}function a(e,t,r){if(void 0!==t.inPlace&&"boolean"!=typeof t.inPlace)throw new TypeError("inPlace option must be a boolean");if(t.inPlace){if(void 0!==t.out)throw new TypeError("out option must not be set if inPlace option is true");return e}return u(e,t,null,r)}
},{"../Image":"U4ir","./getImageParameters":"8QIG"}],"EfNz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../internal/getOutputImage");function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkProcessable("abs",{bitDepth:[32]});var r=(0,t.getOutputImageOrInPlace)(this,e);return a(this,r),r}function a(t,e){for(var a=0;a<t.data.length;a++)e.data[a]=Math.abs(t.data[a])}
},{"../internal/getOutputImage":"2F61"}],"oKYs":[function(require,module,exports) {
"use strict";function e(e,a){if(1===e.alpha&&1===a.alpha)for(var t=0;t<e.size;t++)a.data[t*a.channels+a.components]=e.data[t*e.channels+e.components]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"e2+9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var t=require("../internal/getOutputImage"),e=require("../internal/copyAlphaChannel"),a=r(e);function r(t){return t&&t.__esModule?t:{default:t}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkProcessable("invert",{bitDepth:[1,8,16]});var r=(0,t.getOutputImageOrInPlace)(this,e);return 1===this.bitDepth?i(this,r):(u(this,r),this!==r&&(0,a.default)(this,r)),r}function i(t,e){for(var a=0;a<t.data.length;a++)e.data[a]=~t.data[a]}function u(t,e){for(var a=0;a<t.data.length;a+=t.channels)for(var r=0;r<t.components;r++)e.data[a+r]=t.maxValue-t.data[a+r]}
},{"../internal/getOutputImage":"2F61","../internal/copyAlphaChannel":"oKYs"}],"yePs":[function(require,module,exports) {
"use strict";function t(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(var t=0;t<this.height;t++)for(var h=t*this.width*this.channels,s=0;s<Math.floor(this.width/2);s++)for(var i=s*this.channels+h,e=(this.width-s-1)*this.channels+h,a=0;a<this.channels;a++){var r=this.data[i+a];this.data[i+a]=this.data[e+a],this.data[e+a]=r}return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"vfwB":[function(require,module,exports) {
"use strict";function t(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(var t=0;t<Math.floor(this.height/2);t++)for(var h=0;h<this.width;h++)for(var s=h*this.channels+t*this.width*this.channels,i=h*this.channels+(this.height-1-t)*this.channels*this.width,e=0;e<this.channels;e++){var a=this.data[s+e];this.data[s+e]=this.data[i+e],this.data[i+e]=a}return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"On2d":[function(require,module,exports) {
"use strict";function r(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).radius,e=void 0===r?1:r;if(e<1)throw new Error("radius must be greater than 1");for(var t=2*e+1,o=new Array(t),a=0;a<t;a++){o[a]=new Array(t);for(var n=0;n<t;n++)o[a][n]=1}for(var i=0;i<o.length;i++)o[i]=1;return this.convolution(o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"gifq":[function(require,module,exports) {
"use strict";module.exports=Number.isNaN||function(e){return e!=e};
},{}],"W3gY":[function(require,module,exports) {
"use strict";var r=require("number-is-nan");function e(e){if("number"!=typeof e||r(e))throw new TypeError("Expected a number")}exports.asc=function(r,n){return e(r),e(n),r-n},exports.desc=function(r,n){return e(r),e(n),n-r};
},{"number-is-nan":"gifq"}],"3KRM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateArrayOfChannels=r,exports.validateChannel=l;var e=require("../image/model/model"),a=n(e);function n(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a.default=e,a}function r(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.channels,r=a.allowAlpha,l=a.defaultAlpha;return"boolean"!=typeof r&&(r=!0),void 0===n?t(e,l):o(e,n,r)}function t(e,a){for(var n=a?e.channels:e.components,r=new Array(n),t=0;t<n;t++)r[t]=t;return r}function o(e,a,n){Array.isArray(a)||(a=[a]);for(var r=0;r<a.length;r++)a[r]=l(e,a[r],n);return a}function l(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===n)throw new RangeError("validateChannel : the channel has to be >=0 and <"+e.channels);if("string"==typeof n){switch(e.colorModel){case a.GREY:break;case a.RGB:if("rgb".includes(n))switch(n){case"r":n=0;break;case"g":n=1;break;case"b":n=2}break;case a.HSL:if("hsl".includes(n))switch(n){case"h":n=0;break;case"s":n=1;break;case"l":n=2}break;case a.HSV:if("hsv".includes(n))switch(n){case"h":n=0;break;case"s":n=1;break;case"v":n=2}break;case a.CMYK:if("cmyk".includes(n))switch(n){case"c":n=0;break;case"m":n=1;break;case"y":n=2;break;case"k":n=3}break;default:throw new Error("Unexpected color model: "+e.colorModel)}if("a"===n){if(!e.alpha)throw new Error("validateChannel : the image does not contain alpha channel");n=e.components}if("string"==typeof n)throw new Error("validateChannel : undefined channel: "+n)}if(n>=e.channels)throw new RangeError("validateChannel : the channel has to be >=0 and <"+e.channels);if(!r&&n>=e.components)throw new RangeError("validateChannel : alpha channel may not be selected");return n}
},{"../image/model/model":"DvVr"}],"2yCE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=require("num-sort"),e=require("../../util/channel"),r=require("../Image"),a=i(r);function i(t){return t&&t.__esModule?t:{default:t}}function s(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.radius,s=void 0===i?1:i,h=r.border,n=void 0===h?"copy":h,o=r.channels;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),s<1)throw new Error("radius must be greater than 0");o=(0,e.validateArrayOfChannels)(this,o,!0);for(var d=s,l=s,u=a.default.createFrom(this),c=(2*d+1)*(2*l+1),f=Math.floor(c/2),v=new Array(c),g=0;g<o.length;g++)for(var m=o[g],p=l;p<this.height-l;p++)for(var w=d;w<this.width-d;w++){for(var b=0,y=-l;y<=l;y++)for(var _=-d;_<=d;_++){var q=((p+y)*this.width+w+_)*this.channels+m;v[b++]=this.data[q]}var M=(p*this.width+w)*this.channels+m,x=v.sort(t.asc)[f];u.data[M]=x}if(this.alpha&&!o.includes(this.channels))for(var A=this.components;A<this.data.length;A+=this.channels)u.data[A]=this.data[A];return u.setBorder({size:[d,l],algorithm:n}),u}
},{"num-sort":"W3gY","../../util/channel":"3KRM","../Image":"U4ir"}],"2MHm":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.radius,o=void 0===a?1:a,t=e.sigma,n=e.channels,s=e.border,i=void 0===s?"copy":s;this.checkProcessable("gaussian",{bitDepth:[8,16]});var c=r(o,t);return this.convolution([c,c],{border:i,channels:n,algorithm:"separable"})}function r(e,r){for(var a=2*e+1,o=new Array(a),t=r||.3*(.5*(a-1)-1)+.8,n=-.5/(t*t),s=0,i=0;i<a;i++){var c=i-e,u=Math.exp(n*c*c);o[i]=u,s+=u}for(var l=0;l<a;l++)o[l]/=s;return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"MT1L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.DISCRETE_LAPLACE_4=[[0,1,0],[1,-4,1],[0,1,0]],E=exports.DISCRETE_LAPLACE_8=[[1,1,1],[1,-8,1],[1,1,1]],r=exports.SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],t=exports.SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],_=exports.SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],s=exports.SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]],o=exports.SECOND_DERIVATIVE=[[-1,-2,0,2,1],[-2,-4,0,4,2],[0,0,0,0,0],[1,2,0,-2,-1],[2,4,0,-4,-2]],p=exports.SECOND_DERIVATIVE_INV=[[1,2,0,-2,-1],[2,4,0,-4,-2],[0,0,0,0,0],[-2,-4,0,4,2],[-1,-2,0,2,1]];
},{}],"qDtU":[function(require,module,exports) {
var f=function(){var f;f="undefined"!=typeof exports?exports:{};var r="0.3.0",t="2013-03";f.toString=function(){return"version "+r+", released "+t};for(var a=0,n=null,o=null,i={init:function(f){if(0===f||0!=(f&f-1))throw new Error("init: radix-2 required");a=f,i._initArray(),i._makeBitReversalTable(),i._makeCosSinTable()},fft1d:function(f,r){i.fft(f,r,1)},ifft1d:function(f,r){var t=1/a;i.fft(f,r,-1);for(var n=0;n<a;n++)f[n]*=t,r[n]*=t},bt1d:function(f,r){i.fft(f,r,-1)},fft2d:function(f,r){for(var t=[],n=[],o=0,e=0;e<a;e++){o=e*a;for(var v=0;v<a;v++)t[v]=f[v+o],n[v]=r[v+o];i.fft1d(t,n);for(var d=0;d<a;d++)f[d+o]=t[d],r[d+o]=n[d]}for(var u=0;u<a;u++){for(var l=0;l<a;l++)o=u+l*a,t[l]=f[o],n[l]=r[o];i.fft1d(t,n);for(var c=0;c<a;c++)f[o=u+c*a]=t[c],r[o]=n[c]}},ifft2d:function(f,r){for(var t=[],n=[],o=0,e=0;e<a;e++){o=e*a;for(var v=0;v<a;v++)t[v]=f[v+o],n[v]=r[v+o];i.ifft1d(t,n);for(var d=0;d<a;d++)f[d+o]=t[d],r[d+o]=n[d]}for(var u=0;u<a;u++){for(var l=0;l<a;l++)o=u+l*a,t[l]=f[o],n[l]=r[o];i.ifft1d(t,n);for(var c=0;c<a;c++)f[o=u+c*a]=t[c],r[o]=n[c]}},fft:function(f,r,t){for(var i,e,v,d,u,l,c,s,y,b=a>>2,h=0;h<a;h++)h<(d=n[h])&&(u=f[h],f[h]=f[d],f[d]=u,u=r[h],r[h]=r[d],r[d]=u);for(var _=1;_<a;_<<=1){e=0,i=a/(_<<1);for(var p=0;p<_;p++){l=o[e+b],c=t*o[e];for(var A=p;A<a;A+=_<<1)s=l*f[v=A+_]+c*r[v],y=l*r[v]-c*f[v],f[v]=f[A]-s,f[A]+=s,r[v]=r[A]-y,r[A]+=y;e+=i}}},_initArray:function(){n="undefined"!=typeof Uint32Array?new Uint32Array(a):[],o="undefined"!=typeof Float64Array?new Float64Array(1.25*a):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var f=0,r=0,t=0;for(n[0]=0;++f<a;){for(t=a>>1;t<=r;)r-=t,t>>=1;r+=t,n[f]=r}},_makeCosSinTable:function(){var f=a>>1,r=a>>2,t=a>>3,n=f+r,i=Math.sin(Math.PI/a),e=2*i*i,v=Math.sqrt(e*(2-e)),d=o[r]=1,u=o[0]=0;i=2*e;for(var l=1;l<t;l++)e+=i*(d-=e),v-=i*(u+=v),o[l]=u,o[r-l]=d;0!==t&&(o[t]=Math.sqrt(.5));for(var c=0;c<r;c++)o[f-c]=o[c];for(var s=0;s<n;s++)o[s+f]=-o[s]}},e=["init","fft1d","ifft1d","fft2d","ifft2d"],v=0;v<e.length;v++)f[e[v]]=i[e[v]];return f.bt=i.bt1d,f.fft=i.fft1d,f.ifft=i.ifft1d,f}.call(this);
},{}],"KVTr":[function(require,module,exports) {
"use strict";var r=require("./fftlib"),e={DEBUG:!1,ifft2DArray:function(e,i,a){var o=new Array(i*a),n=i/2,f=2*(a-1);r.init(n);for(var t={re:new Array(n),im:new Array(n)},m=0;m<a;m++){for(var v=n-1;v>=0;v--)t.re[v]=e[2*v*a+m],t.im[v]=e[(2*v+1)*a+m];r.bt(t.re,t.im);for(v=n-1;v>=0;v--)o[2*v*a+m]=t.re[v],o[(2*v+1)*a+m]=t.im[v]}var l=new Array(n*f);r.init(f);var y={re:new Array(f),im:new Array(f)},A=f*n;for(v=0;v<i;v+=2){y.re[0]=o[v*a],y.im[0]=o[(v+1)*a];for(m=1;m<a;m++)y.re[m]=o[v*a+m],y.im[m]=o[(v+1)*a+m],y.re[f-m]=o[v*a+m],y.im[f-m]=-o[(v+1)*a+m];r.bt(y.re,y.im);var u=v/2*f;for(m=f-1;m>=0;m--)l[u+m]=y.re[m]/A}return l},fft2DArray:function(e,i,a,o){Object.assign({},{inplace:!0});var n=a/2+1,f=2*i,t=new Array(f*n);r.init(a);for(var m,v,l,y,A,u={re:new Array(a),im:new Array(a)},w={re:new Array(a),im:new Array(a)},c={re:new Array(a),im:new Array(a)},s=0;s<i/2;s++){m=2*s*a,u.re=e.slice(m,m+a),m=(2*s+1)*a,u.im=e.slice(m,m+a),r.fft1d(u.re,u.im),this.reconstructTwoRealFFT(u,w,c),v=4*s*n,l=(4*s+1)*n,y=(4*s+2)*n,A=(4*s+3)*n;for(var h=n-1;h>=0;h--)t[v+h]=w.re[h],t[l+h]=w.im[h],t[y+h]=c.re[h],t[A+h]=c.im[h]}w=null,c=null;var D=new Array(f*n);r.init(i);for(var d={re:new Array(i),im:new Array(i)},M=n-1;M>=0;M--){for(s=i-1;s>=0;s--)d.re[s]=t[2*s*n+M],d.im[s]=t[(2*s+1)*n+M],isNaN(d.re[s])&&(d.re[s]=0),isNaN(d.im[s])&&(d.im[s]=0);r.fft1d(d.re,d.im);for(s=i-1;s>=0;s--)D[2*s*n+M]=d.re[s],D[(2*s+1)*n+M]=d.im[s]}return D},reconstructTwoRealFFT:function(r,e,i){var a,o,n,f,t,m=r.re.length;e.re[0]=r.re[0],e.im[0]=0,i.re[0]=r.im[0],i.im[0]=0;for(var v=m/2;v>0;v--)t=m-v,a=.5*(r.re[v]-r.re[t]),o=.5*(r.re[v]+r.re[t]),n=.5*(r.im[v]-r.im[t]),f=.5*(r.im[v]+r.im[t]),e.re[v]=o,e.im[v]=n,e.re[t]=o,e.im[t]=-n,i.re[v]=f,i.im[v]=-a,i.re[t]=f,i.im[t]=a},convolute2DI:function(r,e,i,a){for(var o,n,f=0;f<i/2;f++)for(var t=0;t<a;t++)o=r[2*f*a+t]*e[2*f*a+t]-r[(2*f+1)*a+t]*e[(2*f+1)*a+t],n=r[2*f*a+t]*e[(2*f+1)*a+t]+r[(2*f+1)*a+t]*e[2*f*a+t],r[2*f*a+t]=o,r[(2*f+1)*a+t]=n},convolute:function(r,e,i,a,o){for(var n=new Array(a*i),f=0;f<i*a;f++)n[f]=r[f];n=this.fft2DArray(n,i,a);var t,m=e.length,v=e[0].length,l=new Array(a*i);for(f=0;f<a*i;f++)l[f]=0;for(var y=Math.floor((m-1)/2),A=Math.floor((v-1)/2),u=0;u<m;u++){t=(u-y+i)%i;for(var w=0;w<v;w++)l[t*a+(w-A+a)%a]=e[u][w]}l=this.fft2DArray(l,i,a);var c=2*i,s=a/2+1;return this.convolute2DI(n,l,c,s),this.ifft2DArray(n,c,s)},toRadix2:function(r,e,i){var a,o,n,f,t=i,m=e;if(0===i||0!=(i&i-1)){for(t=0;i>>++t!=0;);(t=1<<t)-i}if(0===e||0!=(e&e-1)){for(m=0;e>>++m!=0;);((m=1<<m)-e)*t}if(m==e&&t==i)return{data:r,rows:e,cols:i};var v=new Array(m*t),l=Math.floor((m-e)/2)-e,y=Math.floor((t-i)/2)-i;for(a=0;a<m;a++)for(n=a*t,f=(a-l)%e*i,o=0;o<t;o++)v[n+o]=r[f+(o-y)%i];return{data:v,rows:m,cols:t}},crop:function(r,e,i,a,o,n){if(e==a&&i==o)return r;Object.assign({},n);var f,t,m,v,l=new Array(o*a),y=Math.floor((e-a)/2),A=Math.floor((i-o)/2);for(m=0;m<a;m++)for(f=m*o,t=(m+y)*i,v=0;v<o;v++)l[f+v]=r[t+(v+A)];return l}};module.exports=e;
},{"./fftlib":"qDtU"}],"2am0":[function(require,module,exports) {
"use strict";exports.FFTUtils=require("./FFTUtils"),exports.FFT=require("./fftlib");
},{"./FFTUtils":"KVTr","./fftlib":"qDtU"}],"ZPo+":[function(require,module,exports) {
var r=require("ml-fft").FFTUtils;function o(o,e,n){var t,s,i=a(o),l=i.data,f=Object.assign({normalize:!1,divisor:1,rows:i.rows,cols:i.cols},n);if(!f.rows||!f.cols)throw new Error("Invalid number of rows or columns "+t+" "+s);t=f.rows,s=f.cols;var c,v,w=f.divisor,u=e.length,h=e[0].length;if(f.normalize)for(w=0,c=0;c<u;c++)for(v=0;v<h;v++)w+=e[c][v];if(0===w)throw new RangeError("convolution: The divisor is equal to zero");var d=r.toRadix2(l,t,s),g=r.convolute(d.data,e,d.rows,d.cols);if(g=r.crop(g,d.rows,d.cols,t,s),0!=w&&1!=w)for(c=0;c<g.length;c++)g[c]/=w;return g}function e(r,o,e){var n,t,s=a(r),i=s.data,l=Object.assign({normalize:!1,divisor:1,rows:s.rows,cols:s.cols},e);if(!l.rows||!l.cols)throw new Error("Invalid number of rows or columns "+n+" "+t);n=l.rows,t=l.cols;var f,c,v,w,u,h,d=l.divisor,g=o.length,m=o[0].length;if(l.normalize)for(d=0,f=0;f<g;f++)for(c=0;c<m;c++)d+=o[f][c];if(0===d)throw new RangeError("convolution: The divisor is equal to zero");var y=new Array(n*t),b=Math.floor(g/2),z=Math.floor(m/2);for(w=0;w<n;w++)for(v=0;v<t;v++){for(u=0,c=0;c<g;c++)for(f=0;f<m;f++)h=o[g-c-1][m-f-1],u+=i[(w+c-b+n)%n*t+(v+f-z+t)%t]*h;y[w*t+v]=u/d}return y}function n(r,o,e){var n=1e3;e&&e.factor&&(n=e.factor);var a,t,s,i,l=new Array(o);n*=-1;var f=(o-1)/2,c=2*r*r;for(a=0;a<o;a++)for(l[a]=new Array(o),i=(a-f)*(a-f),t=0;t<o;t++)s=-((t-f)*(t-f)+i)/c,l[a][t]=Math.round(n*(1+s)*Math.exp(s));return l}function a(r){var o,e,n=r;if("number"!=typeof r[0]){o=r.length,e=r[0].length,n=new Array(o*e);for(var a=0;a<o;a++)for(var t=0;t<e;t++)n[a*e+t]=r[a][t]}else{var s=Math.sqrt(r.length);Number.isInteger(s)&&(o=s,e=s)}return{data:n,rows:o,cols:e}}module.exports={fft:o,direct:e,kernelFactory:{LoG:n},matrix2Array:a};
},{"ml-fft":"2am0"}],"dSqh":[function(require,module,exports) {
"use strict";var e=require("number-is-nan");module.exports=Number.isFinite||function(r){return!("number"!=typeof r||e(r)||r===1/0||r===-1/0)};
},{"number-is-nan":"gifq"}],"6Cqq":[function(require,module,exports) {
var e=require("is-finite");module.exports=Number.isInteger||function(r){return"number"==typeof r&&e(r)&&Math.floor(r)===r};
},{"is-finite":"dSqh"}],"tHgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateKernel=t;var r=require("is-integer"),e=a(r);function a(r){return r&&r.__esModule?r:{default:r}}function t(r){var a=void 0,t=void 0;if(!Array.isArray(r))throw new Error("validateKernel: Invalid Kernel: "+r);if(Array.isArray(r[0])){if(0==(1&r.length)||0==(1&r[0].length))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");a=Math.floor(r.length/2),t=Math.floor(r[0].length/2)}else{var n=Math.sqrt(r.length);if(!(0,e.default)(n))throw new RangeError("validateKernel: Kernel array should be a square");t=a=Math.floor(Math.sqrt(r.length)/2);for(var l=new Array(n),o=0;o<n;o++){l[o]=new Array(n);for(var i=0;i<n;i++)l[o][i]=r[o*n+i]}r=l}return{kernel:r,kWidth:t,kHeight:a}}
},{"is-integer":"6Cqq"}],"GSwn":[function(require,module,exports) {
"use strict";function e(e,r,n){if(void 0===n){const t=e.length+r.length-1;n=new Array(t)}t(n);for(var o=0;o<e.length;o++)for(var f=0;f<r.length;f++)n[o+f]+=e[o]*r[f];return n}function t(e){for(var t=0;t<e.length;t++)e[t]=0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"K6XD":[function(require,module,exports) {
"use strict";function t(t){if(this.size=0|t,this.size<=1||0!=(this.size&this.size-1))throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var r=new Array(2*this.size),i=0;i<r.length;i+=2){const t=Math.PI*i/this.size;r[i]=Math.cos(t),r[i+1]=-Math.sin(t)}this.table=r;for(var s=0,o=1;this.size>o;o<<=1)s++;this._width=s%2==0?s-1:s,this._bitrev=new Array(1<<this._width);for(var n=0;n<this._bitrev.length;n++){this._bitrev[n]=0;for(var e=0;e<this._width;e+=2){var h=this._width-e-2;this._bitrev[n]|=(n>>>e&3)<<h}}this._out=null,this._data=null,this._inv=0}module.exports=t,t.prototype.fromComplexArray=function(t,r){for(var i=r||new Array(t.length>>>1),s=0;s<t.length;s+=2)i[s>>>1]=t[s];return i},t.prototype.createComplexArray=function(){const t=new Array(this._csize);for(var r=0;r<t.length;r++)t[r]=0;return t},t.prototype.toComplexArray=function(t,r){for(var i=r||this.createComplexArray(),s=0;s<i.length;s+=2)i[s]=t[s>>>1],i[s+1]=0;return i},t.prototype.completeSpectrum=function(t){for(var r=this._csize,i=r>>>1,s=2;s<i;s+=2)t[r-s]=t[s],t[r-s+1]=-t[s+1]},t.prototype.transform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._transform4(),this._out=null,this._data=null},t.prototype.realTransform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=0,this._realTransform4(),this._out=null,this._data=null},t.prototype.inverseTransform=function(t,r){if(t===r)throw new Error("Input and output buffers must be different");this._out=t,this._data=r,this._inv=1,this._transform4();for(var i=0;i<t.length;i++)t[i]/=this.size;this._out=null,this._data=null},t.prototype._transform4=function(){var t,r,i=this._out,s=this._csize,o=1<<this._width,n=s/o<<1,e=this._bitrev;if(4===n)for(t=0,r=0;t<s;t+=n,r++){const i=e[r];this._singleTransform2(t,i,o)}else for(t=0,r=0;t<s;t+=n,r++){const i=e[r];this._singleTransform4(t,i,o)}var h=this._inv?-1:1,a=this.table;for(o>>=2;o>=2;o>>=2){var f=(n=s/o<<1)>>>2;for(t=0;t<s;t+=n)for(var _=t+f,u=t,l=0;u<_;u+=2,l+=o){const t=u,r=t+f,s=r+f,o=s+f,n=i[t],e=i[t+1],_=i[r],p=i[r+1],c=i[s],v=i[s+1],m=i[o],d=i[o+1],y=n,w=e,b=a[l],g=h*a[l+1],z=_*b-p*g,T=_*g+p*b,A=a[2*l],x=h*a[2*l+1],C=c*A-v*x,E=c*x+v*A,I=a[3*l],R=h*a[3*l+1],M=m*I-d*R,F=m*R+d*I,P=y+C,S=w+E,j=y-C,k=w-E,q=z+M,B=T+F,D=h*(z-M),G=h*(T-F),H=P+q,J=S+B,K=P-q,L=S-B,N=j+G,O=k-D,Q=j-G,U=k+D;i[t]=H,i[t+1]=J,i[r]=N,i[r+1]=O,i[s]=K,i[s+1]=L,i[o]=Q,i[o+1]=U}}},t.prototype._singleTransform2=function(t,r,i){const s=this._out,o=this._data,n=o[r],e=o[r+1],h=o[r+i],a=o[r+i+1],f=n+h,_=e+a,u=n-h,l=e-a;s[t]=f,s[t+1]=_,s[t+2]=u,s[t+3]=l},t.prototype._singleTransform4=function(t,r,i){const s=this._out,o=this._data,n=this._inv?-1:1,e=2*i,h=3*i,a=o[r],f=o[r+1],_=o[r+i],u=o[r+i+1],l=o[r+e],p=o[r+e+1],c=o[r+h],v=o[r+h+1],m=a+l,d=f+p,y=a-l,w=f-p,b=_+c,g=u+v,z=n*(_-c),T=n*(u-v),A=m+b,x=d+g,C=y+T,E=w-z,I=m-b,R=d-g,M=y-T,F=w+z;s[t]=A,s[t+1]=x,s[t+2]=C,s[t+3]=E,s[t+4]=I,s[t+5]=R,s[t+6]=M,s[t+7]=F},t.prototype._realTransform4=function(){var t,r,i=this._out,s=this._csize,o=1<<this._width,n=s/o<<1,e=this._bitrev;if(4===n)for(t=0,r=0;t<s;t+=n,r++){const i=e[r];this._singleRealTransform2(t,i>>>1,o>>>1)}else for(t=0,r=0;t<s;t+=n,r++){const i=e[r];this._singleRealTransform4(t,i>>>1,o>>>1)}var h=this._inv?-1:1,a=this.table;for(o>>=2;o>=2;o>>=2){var f=(n=s/o<<1)>>>1,_=f>>>1,u=_>>>1;for(t=0;t<s;t+=n)for(var l=0,p=0;l<=u;l+=2,p+=o){var c=t+l,v=c+_,m=v+_,d=m+_,y=i[c],w=i[c+1],b=i[v],g=i[v+1],z=i[m],T=i[m+1],A=i[d],x=i[d+1],C=y,E=w,I=a[p],R=h*a[p+1],M=b*I-g*R,F=b*R+g*I,P=a[2*p],S=h*a[2*p+1],j=z*P-T*S,k=z*S+T*P,q=a[3*p],B=h*a[3*p+1],D=A*q-x*B,G=A*B+x*q,H=C+j,J=E+k,K=C-j,L=E-k,N=M+D,O=F+G,Q=h*(M-D),U=h*(F-G),V=H+N,W=J+O,X=K+U,Y=L-Q;if(i[c]=V,i[c+1]=W,i[v]=X,i[v+1]=Y,0!==l){if(l!==u){var Z=K+-h*U,$=-L+-h*Q,tt=H+-h*N,rt=-J- -h*O,it=t+_-l,st=t+f-l;i[it]=Z,i[it+1]=$,i[st]=tt,i[st+1]=rt}}else{var ot=H-N,nt=J-O;i[m]=ot,i[m+1]=nt}}}},t.prototype._singleRealTransform2=function(t,r,i){const s=this._out,o=this._data,n=o[r],e=o[r+i],h=n+e,a=n-e;s[t]=h,s[t+1]=0,s[t+2]=a,s[t+3]=0},t.prototype._singleRealTransform4=function(t,r,i){const s=this._out,o=this._data,n=this._inv?-1:1,e=2*i,h=3*i,a=o[r],f=o[r+i],_=o[r+e],u=o[r+h],l=a+_,p=a-_,c=f+u,v=n*(f-u),m=l+c,d=p,y=-v,w=l-c,b=p,g=v;s[t]=m,s[t+1]=0,s[t+2]=d,s[t+3]=y,s[t+4]=w,s[t+5]=0,s[t+6]=b,s[t+7]=g};
},{}],"GaPn":[function(require,module,exports) {
function e(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1)}module.exports=e;
},{}],"pVEU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var t=require("fft.js"),e=n(t),r=require("next-power-of-two"),o=n(r);function n(t){return t&&t.__esModule?t:{default:t}}function u(t,r){const n=t.length+r.length-1,u=(0,o.default)(n),a=new e.default(u),{output:l,input:s}=f(r,a,u),{output:p}=f(t,a,u),c=p,i=l;for(var d=0;d<c.length;d+=2){const t=p[d]*l[d]-p[d+1]*l[d+1];c[d+1]=p[d]*l[d+1]+p[d+1]*l[d],c[d]=t}return a.inverseTransform(i,c),a.fromComplexArray(i,s).slice(0,n)}function f(t,e,r){const o=new Array(r);for(var n=0;n<t.length;n++)o[n]=t[n];for(;n<r;n++)o[n]=0;const u=e.toComplexArray(o),f=e.createComplexArray();return e.transform(f,u),{output:f,input:o,fftInput:u}}
},{"fft.js":"K6XD","next-power-of-two":"GaPn"}],"BKWd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fftConvolution=exports.directConvolution=void 0;var o=require("./directConvolution"),e=u(o),t=require("./fftConvolution"),r=u(t);function u(o){return o&&o.__esModule?o:{default:o}}exports.directConvolution=e.default,exports.fftConvolution=r.default;
},{"./directConvolution":"GSwn","./fftConvolution":"pVEU"}],"jnd7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var r=require("ml-convolution");function e(e,o,n,t){var v=new Array(e.length),a=void 0,i=void 0,l=void 0,u=void 0;l=((u=o[1]).length-1)/2,i=new Array(n+u.length-1),a=new Array(n);for(var d=0;d<t;d++){for(var f=0;f<n;f++)a[f]=e[d*n+f];(0,r.directConvolution)(a,u,i);for(var c=0;c<n;c++)v[d*n+c]=i[l+c]}l=((u=o[0]).length-1)/2,i=new Array(t+u.length-1),a=new Array(t);for(var y=0;y<n;y++){for(var g=0;g<t;g++)a[g]=v[g*n+y];(0,r.directConvolution)(a,u,i);for(var h=0;h<t;h++)v[h*n+y]=i[l+h]}return v}
},{"ml-convolution":"BKWd"}],"i/sW":[function(require,module,exports) {
"use strict";function e(e,t){return Math.round(Math.min(Math.max(e,0),t.maxValue))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=e;
},{}],"r09C":[function(require,module,exports) {
"use strict";function r(r){if(!Array.isArray(r))throw new Error("input must be an array");if(0===r.length)throw new Error("input must not be empty");for(var e=r[0],t=1;t<r.length;t++)r[t]>e&&(e=r[t]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"Mi8X":[function(require,module,exports) {
"use strict";function r(r){if(!Array.isArray(r))throw new Error("input must be an array");if(0===r.length)throw new Error("input must not be empty");for(var e=r[0],t=1;t<r.length;t++)r[t]<e&&(e=r[t]);return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"fWvu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var r=require("ml-array-max"),e=n(r),t=require("ml-array-min"),a=n(t);function n(r){return r&&r.__esModule?r:{default:r}}function o(r,t={}){if(!Array.isArray(r))throw new TypeError("input must be an array");if(0===r.length)throw new TypeError("input must not be empty");let n;if(void 0!==t.output){if(!Array.isArray(t.output))throw new TypeError("output option must be an array if specified");n=t.output}else n=new Array(r.length);const o=(0,a.default)(r),u=(0,e.default)(r);if(o===u)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");const{min:i=(t.autoMinMax?o:0),max:s=(t.autoMinMax?u:1)}=t;if(i>=s)throw new RangeError("min option must be smaller than max option");const m=(s-i)/(u-o);for(var l=0;l<r.length;l++)n[l]=(r[l]-o)*m+i;return n}
},{"ml-array-max":"r09C","ml-array-min":"Mi8X"}],"UMPl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../index");class t{constructor(t){var e,o,i,s,a,n,u,f,c,l=(t=r.WrapperMatrix2D.checkMatrix(t)).clone(),h=l.rows,v=l.columns,g=new Array(h),w=1;for(e=0;e<h;e++)g[e]=e;for(f=new Array(h),o=0;o<v;o++){for(e=0;e<h;e++)f[e]=l.get(e,o);for(e=0;e<h;e++){for(c=Math.min(e,o),a=0,i=0;i<c;i++)a+=l.get(e,i)*f[i];f[e]-=a,l.set(e,o,f[e])}for(s=o,e=o+1;e<h;e++)Math.abs(f[e])>Math.abs(f[s])&&(s=e);if(s!==o){for(i=0;i<v;i++)n=l.get(s,i),l.set(s,i,l.get(o,i)),l.set(o,i,n);u=g[s],g[s]=g[o],g[o]=u,w=-w}if(o<h&&0!==l.get(o,o))for(e=o+1;e<h;e++)l.set(e,o,l.get(e,o)/l.get(o,o))}this.LU=l,this.pivotVector=g,this.pivotSign=w}isSingular(){for(var r=this.LU,t=r.columns,e=0;e<t;e++)if(0===r[e][e])return!0;return!1}solve(t){t=r.Matrix.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var o,i,s,a=t.columns,n=t.subMatrixRow(this.pivotVector,0,a-1),u=e.columns;for(s=0;s<u;s++)for(o=s+1;o<u;o++)for(i=0;i<a;i++)n[o][i]-=n[s][i]*e[o][s];for(s=u-1;s>=0;s--){for(i=0;i<a;i++)n[s][i]/=e[s][s];for(o=0;o<s;o++)for(i=0;i<a;i++)n[o][i]-=n[s][i]*e[o][s]}return n}get determinant(){var r=this.LU;if(!r.isSquare())throw new Error("Matrix must be square");for(var t=this.pivotSign,e=r.columns,o=0;o<e;o++)t*=r[o][o];return t}get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,o=t.columns,i=new r.Matrix(e,o),s=0;s<e;s++)for(var a=0;a<o;a++)i[s][a]=s>a?t[s][a]:s===a?1:0;return i}get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,o=t.columns,i=new r.Matrix(e,o),s=0;s<e;s++)for(var a=0;a<o;a++)i[s][a]=s<=a?t[s][a]:0;return i}get pivotPermutationVector(){return this.pivotVector.slice()}}exports.default=t;
},{"../index":"fuYa"}],"NZrV":[function(require,module,exports) {
"use strict";function r(r,t){var e=0;return Math.abs(r)>Math.abs(t)?(e=t/r,Math.abs(r)*Math.sqrt(1+e*e)):0!==t?(e=r/t,Math.abs(t)*Math.sqrt(1+e*e)):0}function t(r,t,e){for(var a=new Array(r),s=0;s<r;s++){a[s]=new Array(t);for(var n=0;n<t;n++)a[s][n]=e}return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hypotenuse=r,exports.getFilled2DArray=t;
},{}],"uExS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../index"),e=require("./util");class r{constructor(r,s={}){var i=(r=t.WrapperMatrix2D.checkMatrix(r)).rows,a=r.columns;const{computeLeftSingularVectors:l=!0,computeRightSingularVectors:o=!0,autoTranspose:h=!1}=s;var f,n=Boolean(l),u=Boolean(o),M=!1;if(i<a)if(h){i=(f=r.transpose()).rows,a=f.columns,M=!0;var m=n;n=u,u=m}else f=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=r.clone();var g=Math.min(i,a),c=Math.min(i+1,a),b=new Array(c),x=(0,e.getFilled2DArray)(i,g,0),v=(0,e.getFilled2DArray)(a,a,0),p=new Array(a),d=new Array(i),w=new Array(c);for(let t=0;t<c;t++)w[t]=t;var N=Math.min(i-1,a),V=Math.max(0,Math.min(a-2,i)),y=Math.max(N,V);for(let t=0;t<y;t++){if(t<N){b[t]=0;for(let r=t;r<i;r++)b[t]=(0,e.hypotenuse)(b[t],f[r][t]);if(0!==b[t]){f[t][t]<0&&(b[t]=-b[t]);for(let e=t;e<i;e++)f[e][t]/=b[t];f[t][t]+=1}b[t]=-b[t]}for(let e=t+1;e<a;e++){if(t<N&&0!==b[t]){let r=0;for(let s=t;s<i;s++)r+=f[s][t]*f[s][e];r=-r/f[t][t];for(let s=t;s<i;s++)f[s][e]+=r*f[s][t]}p[e]=f[t][e]}if(n&&t<N)for(let e=t;e<i;e++)x[e][t]=f[e][t];if(t<V){p[t]=0;for(let r=t+1;r<a;r++)p[t]=(0,e.hypotenuse)(p[t],p[r]);if(0!==p[t]){p[t+1]<0&&(p[t]=0-p[t]);for(let e=t+1;e<a;e++)p[e]/=p[t];p[t+1]+=1}if(p[t]=-p[t],t+1<i&&0!==p[t]){for(let e=t+1;e<i;e++)d[e]=0;for(let e=t+1;e<i;e++)for(let r=t+1;r<a;r++)d[e]+=p[r]*f[e][r];for(let e=t+1;e<a;e++){let r=-p[e]/p[t+1];for(let s=t+1;s<i;s++)f[s][e]+=r*d[s]}}if(u)for(let e=t+1;e<a;e++)v[e][t]=p[e]}}let U=Math.min(a,i+1);if(N<a&&(b[N]=f[N][N]),i<U&&(b[U-1]=0),V+1<U&&(p[V]=f[V][U-1]),p[U-1]=0,n){for(let t=N;t<g;t++){for(let e=0;e<i;e++)x[e][t]=0;x[t][t]=1}for(let t=N-1;t>=0;t--)if(0!==b[t]){for(let e=t+1;e<g;e++){let r=0;for(let s=t;s<i;s++)r+=x[s][t]*x[s][e];r=-r/x[t][t];for(let s=t;s<i;s++)x[s][e]+=r*x[s][t]}for(let e=t;e<i;e++)x[e][t]=-x[e][t];x[t][t]=1+x[t][t];for(let e=0;e<t-1;e++)x[e][t]=0}else{for(let e=0;e<i;e++)x[e][t]=0;x[t][t]=1}}if(u)for(let t=a-1;t>=0;t--){if(t<V&&0!==p[t])for(let e=t+1;e<a;e++){let r=0;for(let s=t+1;s<a;s++)r+=v[s][t]*v[s][e];r=-r/v[t+1][t];for(let s=t+1;s<a;s++)v[s][e]+=r*v[s][t]}for(let e=0;e<a;e++)v[e][t]=0;v[t][t]=1}for(var A=U-1,S=Number.EPSILON;U>0;){let t,r;for(t=U-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+S*Math.abs(b[t]+Math.abs(b[t+1]));if(Math.abs(p[t])<=e||Number.isNaN(p[t])){p[t]=0;break}}if(t===U-2)r=4;else{let e;for(e=U-1;e>=t&&e!==t;e--){let r=(e!==U?Math.abs(p[e]):0)+(e!==t+1?Math.abs(p[e-1]):0);if(Math.abs(b[e])<=S*r){b[e]=0;break}}e===t?r=3:e===U-1?r=1:(r=2,t=e)}switch(t++,r){case 1:{let r=p[U-2];p[U-2]=0;for(let s=U-2;s>=t;s--){let i=(0,e.hypotenuse)(b[s],r),l=b[s]/i,o=r/i;if(b[s]=i,s!==t&&(r=-o*p[s-1],p[s-1]=l*p[s-1]),u)for(let t=0;t<a;t++)i=l*v[t][s]+o*v[t][U-1],v[t][U-1]=-o*v[t][s]+l*v[t][U-1],v[t][s]=i}break}case 2:{let r=p[t-1];p[t-1]=0;for(let s=t;s<U;s++){let a=(0,e.hypotenuse)(b[s],r),l=b[s]/a,o=r/a;if(b[s]=a,r=-o*p[s],p[s]=l*p[s],n)for(let e=0;e<i;e++)a=l*x[e][s]+o*x[e][t-1],x[e][t-1]=-o*x[e][s]+l*x[e][t-1],x[e][s]=a}break}case 3:{const r=Math.max(Math.abs(b[U-1]),Math.abs(b[U-2]),Math.abs(p[U-2]),Math.abs(b[t]),Math.abs(p[t])),s=b[U-1]/r,l=b[U-2]/r,o=p[U-2]/r,h=b[t]/r,f=p[t]/r,M=((l+s)*(l-s)+o*o)/2,m=s*o*(s*o);let g=0;0===M&&0===m||(g=m/(M+(g=M<0?0-Math.sqrt(M*M+m):Math.sqrt(M*M+m))));let c=(h+s)*(h-s)+g,d=h*f;for(let r=t;r<U-1;r++){let s=(0,e.hypotenuse)(c,d);0===s&&(s=Number.MIN_VALUE);let l=c/s,o=d/s;if(r!==t&&(p[r-1]=s),c=l*b[r]+o*p[r],p[r]=l*p[r]-o*b[r],d=o*b[r+1],b[r+1]=l*b[r+1],u)for(let t=0;t<a;t++)s=l*v[t][r]+o*v[t][r+1],v[t][r+1]=-o*v[t][r]+l*v[t][r+1],v[t][r]=s;if(0===(s=(0,e.hypotenuse)(c,d))&&(s=Number.MIN_VALUE),l=c/s,o=d/s,b[r]=s,c=l*p[r]+o*b[r+1],b[r+1]=-o*p[r]+l*b[r+1],d=o*p[r+1],p[r+1]=l*p[r+1],n&&r<i-1)for(let t=0;t<i;t++)s=l*x[t][r]+o*x[t][r+1],x[t][r+1]=-o*x[t][r]+l*x[t][r+1],x[t][r]=s}p[U-2]=c,1;break}case 4:if(b[t]<=0&&(b[t]=b[t]<0?-b[t]:0,u))for(let e=0;e<=A;e++)v[e][t]=-v[e][t];for(;t<A&&!(b[t]>=b[t+1]);){let e=b[t];if(b[t]=b[t+1],b[t+1]=e,u&&t<a-1)for(let r=0;r<a;r++)e=v[r][t+1],v[r][t+1]=v[r][t],v[r][t]=e;if(n&&t<i-1)for(let r=0;r<i;r++)e=x[r][t+1],x[r][t+1]=x[r][t],x[r][t]=e;t++}0,U--}}if(M){var k=v;v=x,x=k}this.m=i,this.n=a,this.s=b,this.U=x,this.V=v}solve(e){var r=e,s=this.threshold,i=this.s.length,a=t.Matrix.zeros(i,i);for(let t=0;t<i;t++)Math.abs(this.s[t])<=s?a[t][t]=0:a[t][t]=1/this.s[t];var l=this.U,o=this.rightSingularVectors,h=o.mmul(a),f=o.rows,n=l.length,u=t.Matrix.zeros(f,n);for(let t=0;t<f;t++)for(let e=0;e<n;e++){let r=0;for(let s=0;s<i;s++)r+=h[t][s]*l[e][s];u[t][e]=r}return u.mmul(r)}solveForDiagonal(e){return this.solve(t.Matrix.diag(e))}inverse(){var e=this.V,r=this.threshold,s=e.length,i=e[0].length,a=new t.Matrix(s,this.s.length);for(let t=0;t<s;t++)for(let s=0;s<i;s++)Math.abs(this.s[s])>r?a[t][s]=e[t][s]/this.s[s]:a[t][s]=0;var l=this.U,o=l.length,h=l[0].length,f=new t.Matrix(s,o);for(let t=0;t<s;t++)for(let e=0;e<o;e++){let r=0;for(let s=0;s<h;s++)r+=a[t][s]*l[e][s];f[t][e]=r}return f}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,s=0,i=r.length;s<i;s++)r[s]>t&&e++;return e}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return t.Matrix.isMatrix(this.U)||(this.U=new t.Matrix(this.U)),this.U}get rightSingularVectors(){return t.Matrix.isMatrix(this.V)||(this.V=new t.Matrix(this.V)),this.V}get diagonalMatrix(){return t.Matrix.diag(this.s)}}exports.default=r;
},{"../index":"fuYa","./util":"NZrV"}],"DKHH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkRowIndex=n,exports.checkColumnIndex=t,exports.checkRowVector=u,exports.checkColumnVector=s,exports.checkIndices=c,exports.checkRowIndices=a,exports.checkColumnIndices=f,exports.checkRange=i,exports.getRange=w,exports.sumByRow=m,exports.sumByColumn=l,exports.sumAll=h;var r=require("./matrix"),e=o(r);function o(r){return r&&r.__esModule?r:{default:r}}function n(r,e,o){var n=o?r.rows:r.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function t(r,e,o){var n=o?r.columns:r.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function u(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function s(r,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==r.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function c(r,e,o){return{row:a(r,e),column:f(r,o)}}function a(r,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some(e=>e<0||e>=r.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function f(r,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some(e=>e<0||e>=r.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function i(r,e,o,n,t){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(g("startRow",e),g("endRow",o),g("startColumn",n),g("endColumn",t),e>o||n>t||e<0||e>=r.rows||o<0||o>=r.rows||n<0||n>=r.columns||t<0||t>=r.columns)throw new RangeError("Submatrix indices are out of range")}function w(r,e){for(var o=new Array(e-r+1),n=0;n<o.length;n++)o[n]=r+n;return o}function m(r){for(var o=e.default.zeros(r.rows,1),n=0;n<r.rows;++n)for(var t=0;t<r.columns;++t)o.set(n,0,o.get(n,0)+r.get(n,t));return o}function l(r){for(var o=e.default.zeros(1,r.columns),n=0;n<r.rows;++n)for(var t=0;t<r.columns;++t)o.set(0,t,o.get(0,t)+r.get(n,t));return o}function h(r){for(var e=0,o=0;o<r.rows;o++)for(var n=0;n<r.columns;n++)e+=r.get(o,n);return e}function g(r,e){if("number"!=typeof e)throw new TypeError(`${r} must be a number`)}
},{"./matrix":"d3nN"}],"nH83":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../abstractMatrix"),t=u(e),r=require("../matrix"),s=u(r);function u(e){return e&&e.__esModule?e:{default:e}}class a extends((0,t.default)()){constructor(e,t,r){super(),this.matrix=e,this.rows=t,this.columns=r}static get[Symbol.species](){return s.default}}exports.default=a;
},{"../abstractMatrix":"45Jg","../matrix":"d3nN"}],"atAY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}class s extends t.default{constructor(e){super(e,e.columns,e.rows)}set(e,t,r){return this.matrix.set(t,e,r),this}get(e,t){return this.matrix.get(t,e)}}exports.default=s;
},{"./base":"nH83"}],"LOf7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}class s extends t.default{constructor(e,t){super(e,1,e.columns),this.row=t}set(e,t,r){return this.matrix.set(this.row,t,r),this}get(e,t){return this.matrix.get(this.row,t)}}exports.default=s;
},{"./base":"nH83"}],"Vm1M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../util"),e=require("./base"),s=r(e);function r(t){return t&&t.__esModule?t:{default:t}}class u extends s.default{constructor(e,s,r,u,i){(0,t.checkRange)(e,s,r,u,i),super(e,r-s+1,i-u+1),this.startRow=s,this.startColumn=u}set(t,e,s){return this.matrix.set(this.startRow+t,this.startColumn+e,s),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}exports.default=u;
},{"../util":"DKHH","./base":"nH83"}],"gnlB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t=require("./base"),s=r(t);function r(e){return e&&e.__esModule?e:{default:e}}class i extends s.default{constructor(t,s,r){var i=(0,e.checkIndices)(t,s,r);super(t,i.row.length,i.column.length),this.rowIndices=i.row,this.columnIndices=i.column}set(e,t,s){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],s),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}exports.default=i;
},{"../util":"DKHH","./base":"nH83"}],"Inl8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t=require("./base"),s=r(t);function r(e){return e&&e.__esModule?e:{default:e}}class i extends s.default{constructor(t,s){super(t,(s=(0,e.checkRowIndices)(t,s)).length,t.columns),this.rowIndices=s}set(e,t,s){return this.matrix.set(this.rowIndices[e],t,s),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}exports.default=i;
},{"../util":"DKHH","./base":"nH83"}],"UA+r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util"),t=require("./base"),s=r(t);function r(e){return e&&e.__esModule?e:{default:e}}class u extends s.default{constructor(t,s){s=(0,e.checkColumnIndices)(t,s),super(t,t.rows,s.length),this.columnIndices=s}set(e,t,s){return this.matrix.set(e,this.columnIndices[t],s),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}exports.default=u;
},{"../util":"DKHH","./base":"nH83"}],"akxw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base"),t=s(e);function s(e){return e&&e.__esModule?e:{default:e}}class r extends t.default{constructor(e,t){super(e,e.rows,1),this.column=t}set(e,t,s){return this.matrix.set(e,this.column,s),this}get(e){return this.matrix.get(e,this.column)}}exports.default=r;
},{"./base":"nH83"}],"ItzX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base"),t=s(e);function s(e){return e&&e.__esModule?e:{default:e}}class r extends t.default{constructor(e){super(e,e.rows,e.columns)}set(e,t,s){return this.matrix.set(this.rows-e-1,t,s),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}exports.default=r;
},{"./base":"nH83"}],"Rj3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./base"),t=s(e);function s(e){return e&&e.__esModule?e:{default:e}}class r extends t.default{constructor(e){super(e,e.rows,e.columns)}set(e,t,s){return this.matrix.set(e,this.columns-t-1,s),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}exports.default=r;
},{"./base":"nH83"}],"45Jg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=V;var t=require("ml-array-rescale"),r=S(t),s=require("./dc/lu"),e=S(s),i=require("./dc/svd"),o=S(i),n=require("./util"),h=require("./views/transpose"),a=S(h),u=require("./views/row"),c=S(u),m=require("./views/sub"),l=S(m),w=require("./views/selection"),f=S(w),g=require("./views/rowSelection"),v=S(g),d=require("./views/columnSelection"),x=S(d),p=require("./views/column"),y=S(p),M=require("./views/flipRow"),b=S(M),R=require("./views/flipColumn"),k=S(R);function S(t){return t&&t.__esModule?t:{default:t}}function V(t){void 0===t&&(t=Object);class s extends t{static get[Symbol.species](){return this}static from1DArray(t,r,s){if(t*r!==s.length)throw new RangeError("Data length does not match given dimensions");for(var e=new this(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)e.set(i,o,s[i*r+o]);return e}static rowVector(t){for(var r=new this(1,t.length),s=0;s<t.length;s++)r.set(0,s,t[s]);return r}static columnVector(t){for(var r=new this(t.length,1),s=0;s<t.length;s++)r.set(s,0,t[s]);return r}static empty(t,r){return new this(t,r)}static zeros(t,r){return this.empty(t,r).fill(0)}static ones(t,r){return this.empty(t,r).fill(1)}static rand(t,r,s){void 0===s&&(s=Math.random);for(var e=this.empty(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)e.set(i,o,s());return e}static randInt(t,r,s,e){void 0===s&&(s=1e3),void 0===e&&(e=Math.random);for(var i=this.empty(t,r),o=0;o<t;o++)for(var n=0;n<r;n++){var h=Math.floor(e()*s);i.set(o,n,h)}return i}static eye(t,r,s){void 0===r&&(r=t),void 0===s&&(s=1);for(var e=Math.min(t,r),i=this.zeros(t,r),o=0;o<e;o++)i.set(o,o,s);return i}static diag(t,r,s){var e=t.length;void 0===r&&(r=e),void 0===s&&(s=r);for(var i=Math.min(e,r,s),o=this.zeros(r,s),n=0;n<i;n++)o.set(n,n,t[n]);return o}static min(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var s=t.rows,e=t.columns,i=new this(s,e),o=0;o<s;o++)for(var n=0;n<e;n++)i.set(o,n,Math.min(t.get(o,n),r.get(o,n)));return i}static max(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var s=t.rows,e=t.columns,i=new this(s,e),o=0;o<s;o++)for(var n=0;n<e;n++)i.set(o,n,Math.max(t.get(o,n),r.get(o,n)));return i}static checkMatrix(t){return s.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var r=this.rows,s=this.columns,e=0;e<r;e++)for(var i=0;i<s;i++)t.call(this,e,i);return this}to1DArray(){for(var t=new Array(this.size),r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)t[r*this.columns+s]=this.get(r,s);return t}to2DArray(){for(var t=new Array(this.rows),r=0;r<this.rows;r++){t[r]=new Array(this.columns);for(var s=0;s<this.columns;s++)t[r][s]=this.get(r,s)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}set(t,r,s){throw new Error("set method is unimplemented")}get(t,r){throw new Error("get method is unimplemented")}repeat(t,r){t=t||1,r=r||1;for(var s=new this.constructor[Symbol.species](this.rows*t,this.columns*r),e=0;e<t;e++)for(var i=0;i<r;i++)s.setSubMatrix(this,this.rows*e,this.columns*i);return s}fill(t){for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,t);return this}neg(){return this.mulS(-1)}getRow(t){(0,n.checkRowIndex)(this,t);for(var r=new Array(this.columns),s=0;s<this.columns;s++)r[s]=this.get(t,s);return r}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,r){(0,n.checkRowIndex)(this,t),r=(0,n.checkRowVector)(this,r);for(var s=0;s<this.columns;s++)this.set(t,s,r[s]);return this}swapRows(t,r){(0,n.checkRowIndex)(this,t),(0,n.checkRowIndex)(this,r);for(var s=0;s<this.columns;s++){var e=this.get(t,s);this.set(t,s,this.get(r,s)),this.set(r,s,e)}return this}getColumn(t){(0,n.checkColumnIndex)(this,t);for(var r=new Array(this.rows),s=0;s<this.rows;s++)r[s]=this.get(s,t);return r}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,r){(0,n.checkColumnIndex)(this,t),r=(0,n.checkColumnVector)(this,r);for(var s=0;s<this.rows;s++)this.set(s,t,r[s]);return this}swapColumns(t,r){(0,n.checkColumnIndex)(this,t),(0,n.checkColumnIndex)(this,r);for(var s=0;s<this.rows;s++){var e=this.get(s,t);this.set(s,t,this.get(s,r)),this.set(s,r,e)}return this}addRowVector(t){t=(0,n.checkRowVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+t[s]);return this}subRowVector(t){t=(0,n.checkRowVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-t[s]);return this}mulRowVector(t){t=(0,n.checkRowVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*t[s]);return this}divRowVector(t){t=(0,n.checkRowVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/t[s]);return this}addColumnVector(t){t=(0,n.checkColumnVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)+t[r]);return this}subColumnVector(t){t=(0,n.checkColumnVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)-t[r]);return this}mulColumnVector(t){t=(0,n.checkColumnVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)*t[r]);return this}divColumnVector(t){t=(0,n.checkColumnVector)(this,t);for(var r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.set(r,s,this.get(r,s)/t[r]);return this}mulRow(t,r){(0,n.checkRowIndex)(this,t);for(var s=0;s<this.columns;s++)this.set(t,s,this.get(t,s)*r);return this}mulColumn(t,r){(0,n.checkColumnIndex)(this,t);for(var s=0;s<this.rows;s++)this.set(s,t,this.get(s,t)*r);return this}max(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.get(r,s)>t&&(t=this.get(r,s));return t}maxIndex(){for(var t=this.get(0,0),r=[0,0],s=0;s<this.rows;s++)for(var e=0;e<this.columns;e++)this.get(s,e)>t&&(t=this.get(s,e),r[0]=s,r[1]=e);return r}min(){for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)this.get(r,s)<t&&(t=this.get(r,s));return t}minIndex(){for(var t=this.get(0,0),r=[0,0],s=0;s<this.rows;s++)for(var e=0;e<this.columns;e++)this.get(s,e)<t&&(t=this.get(s,e),r[0]=s,r[1]=e);return r}maxRow(t){(0,n.checkRowIndex)(this,t);for(var r=this.get(t,0),s=1;s<this.columns;s++)this.get(t,s)>r&&(r=this.get(t,s));return r}maxRowIndex(t){(0,n.checkRowIndex)(this,t);for(var r=this.get(t,0),s=[t,0],e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e),s[1]=e);return s}minRow(t){(0,n.checkRowIndex)(this,t);for(var r=this.get(t,0),s=1;s<this.columns;s++)this.get(t,s)<r&&(r=this.get(t,s));return r}minRowIndex(t){(0,n.checkRowIndex)(this,t);for(var r=this.get(t,0),s=[t,0],e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e),s[1]=e);return s}maxColumn(t){(0,n.checkColumnIndex)(this,t);for(var r=this.get(0,t),s=1;s<this.rows;s++)this.get(s,t)>r&&(r=this.get(s,t));return r}maxColumnIndex(t){(0,n.checkColumnIndex)(this,t);for(var r=this.get(0,t),s=[0,t],e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t),s[0]=e);return s}minColumn(t){(0,n.checkColumnIndex)(this,t);for(var r=this.get(0,t),s=1;s<this.rows;s++)this.get(s,t)<r&&(r=this.get(s,t));return r}minColumnIndex(t){(0,n.checkColumnIndex)(this,t);for(var r=this.get(0,t),s=[0,t],e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t),s[0]=e);return s}diag(){for(var t=Math.min(this.rows,this.columns),r=new Array(t),s=0;s<t;s++)r[s]=this.get(s,s);return r}sum(t){switch(t){case"row":return(0,n.sumByRow)(this);case"column":return(0,n.sumByColumn)(this);default:return(0,n.sumAll)(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)t*=this.get(r,s);return t}norm(t="frobenius"){var r=0;if("max"===t)return this.max();if("frobenius"===t){for(var s=0;s<this.rows;s++)for(var e=0;e<this.columns;e++)r+=this.get(s,e)*this.get(s,e);return Math.sqrt(r)}throw new RangeError(`unknown norm type: ${t}`)}cumulativeSum(){for(var t=0,r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)t+=this.get(r,s),this.set(r,s,t);return this}dot(t){s.isMatrix(t)&&(t=t.to1DArray());var r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");for(var e=0,i=0;i<r.length;i++)e+=r[i]*t[i];return e}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var r=this.rows,s=this.columns,e=t.columns,i=new this.constructor[Symbol.species](r,e),o=new Array(s),n=0;n<e;n++){for(var h=0;h<s;h++)o[h]=t.get(h,n);for(var a=0;a<r;a++){var u=0;for(h=0;h<s;h++)u+=this.get(a,h)*o[h];i.set(a,n,u)}}return i}strassen2x2(t){var r=new this.constructor[Symbol.species](2,2);const s=this.get(0,0),e=t.get(0,0),i=this.get(0,1),o=t.get(0,1),n=this.get(1,0),h=t.get(1,0),a=this.get(1,1),u=t.get(1,1),c=(s+a)*(e+u),m=(n+a)*e,l=s*(o-u),w=a*(h-e),f=(s+i)*u,g=c+w-f+(i-a)*(h+u),v=l+f,d=m+w,x=c-m+l+(n-s)*(e+o);return r.set(0,0,g),r.set(0,1,v),r.set(1,0,d),r.set(1,1,x),r}strassen3x3(t){var r=new this.constructor[Symbol.species](3,3);const s=this.get(0,0),e=this.get(0,1),i=this.get(0,2),o=this.get(1,0),n=this.get(1,1),h=this.get(1,2),a=this.get(2,0),u=this.get(2,1),c=this.get(2,2),m=t.get(0,0),l=t.get(0,1),w=t.get(0,2),f=t.get(1,0),g=t.get(1,1),v=t.get(1,2),d=t.get(2,0),x=t.get(2,1),p=t.get(2,2),y=(s-o)*(-l+g),M=(-s+o+n)*(m-l+g),b=(o+n)*(-m+l),R=s*m,k=(-s+a+u)*(m-w+v),S=(-s+a)*(w-v),V=(a+u)*(-m+w),C=(-i+u+c)*(g+d-x),j=(i-c)*(g-x),I=i*d,q=(u+c)*(-d+x),E=(-i+n+h)*(v+d-p),$=(i-h)*(v-p),A=(n+h)*(-d+p),z=R+I+e*f,D=(s+e+i-o-n-u-c)*g+M+b+R+C+I+q,P=R+k+V+(s+e+i-n-h-a-u)*v+I+E+A,_=y+n*(-m+l+f-g-v-d+p)+M+R+I+E+$,N=y+M+b+R+h*x,O=I+E+$+A+o*w,B=R+k+S+u*(-m+w+f-g-v-d+x)+C+j+I,T=C+j+I+q+a*l,F=R+k+S+V+c*p;return r.set(0,0,z),r.set(0,1,D),r.set(0,2,P),r.set(1,0,_),r.set(1,1,N),r.set(1,2,O),r.set(2,0,B),r.set(2,1,T),r.set(2,2,F),r}mmulStrassen(t){var r=this.clone(),e=r.rows,i=r.columns,o=t.rows,n=t.columns;function h(t,r,e){var i=t.rows,o=t.columns;if(i===r&&o===e)return t;var n=s.zeros(r,e);return n=n.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${e} x ${i} and ${o} x ${n} matrix: dimensions do not match.`);var a=Math.max(e,o),u=Math.max(i,n);return function t(r,e,i,o){if(i<=512||o<=512)return r.mmul(e);i%2==1&&o%2==1?(r=h(r,i+1,o+1),e=h(e,i+1,o+1)):i%2==1?(r=h(r,i+1,o),e=h(e,i+1,o)):o%2==1&&(r=h(r,i,o+1),e=h(e,i,o+1));var n=parseInt(r.rows/2,10),a=parseInt(r.columns/2,10),u=r.subMatrix(0,n-1,0,a-1),c=e.subMatrix(0,n-1,0,a-1),m=r.subMatrix(0,n-1,a,r.columns-1),l=e.subMatrix(0,n-1,a,e.columns-1),w=r.subMatrix(n,r.rows-1,0,a-1),f=e.subMatrix(n,e.rows-1,0,a-1),g=r.subMatrix(n,r.rows-1,a,r.columns-1),v=e.subMatrix(n,e.rows-1,a,e.columns-1),d=t(s.add(u,g),s.add(c,v),n,a),x=t(s.add(w,g),c,n,a),p=t(u,s.sub(l,v),n,a),y=t(g,s.sub(f,c),n,a),M=t(s.add(u,m),v,n,a),b=t(s.sub(w,u),s.add(c,l),n,a),R=t(s.sub(m,g),s.add(f,v),n,a),k=s.add(d,y);k.sub(M),k.add(R);var S=s.add(p,M),V=s.add(x,y),C=s.sub(d,x);C.add(p),C.add(b);var j=s.zeros(2*k.rows,2*k.columns);return(j=(j=(j=(j=j.setSubMatrix(k,0,0)).setSubMatrix(S,k.rows,0)).setSubMatrix(V,0,k.columns)).setSubMatrix(C,k.rows,k.columns)).subMatrix(0,i-1,0,o-1)}(r=h(r,a,u),t=h(t,a,u),a,u)}scaleRows(t,s){if((t=void 0===t?0:t)>=(s=void 0===s?1:s))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),i=0;i<this.rows;i++){var o=(0,r.default)(this.getRow(i),{min:t,max:s});e.setRow(i,o)}return e}scaleColumns(t,s){if((t=void 0===t?0:t)>=(s=void 0===s?1:s))throw new RangeError("min should be strictly smaller than max");for(var e=this.constructor.empty(this.rows,this.columns),i=0;i<this.columns;i++){var o=(0,r.default)(this.getColumn(i),{min:t,max:s});e.setColumn(i,o)}return e}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var r=this.rows,s=this.columns,e=t.rows,i=t.columns,o=new this.constructor[Symbol.species](r*e,s*i),n=0;n<r;n++)for(var h=0;h<s;h++)for(var a=0;a<e;a++)for(var u=0;u<i;u++)o[e*n+a][i*h+u]=this.get(n,h)*t.get(a,u);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)t.set(s,r,this.get(r,s));return t}sortRows(t){void 0===t&&(t=i);for(var r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}sortColumns(t){void 0===t&&(t=i);for(var r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}subMatrix(t,r,s,e){(0,n.checkRange)(this,t,r,s,e);for(var i=new this.constructor[Symbol.species](r-t+1,e-s+1),o=t;o<=r;o++)for(var h=s;h<=e;h++)i[o-t][h-s]=this.get(o,h);return i}subMatrixRow(t,r,s){if(void 0===r&&(r=0),void 0===s&&(s=this.columns-1),r>s||r<0||r>=this.columns||s<0||s>=this.columns)throw new RangeError("Argument out of range");for(var e=new this.constructor[Symbol.species](t.length,s-r+1),i=0;i<t.length;i++)for(var o=r;o<=s;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError(`Row index out of range: ${t[i]}`);e.set(i,o-r,this.get(t[i],o))}return e}subMatrixColumn(t,r,s){if(void 0===r&&(r=0),void 0===s&&(s=this.rows-1),r>s||r<0||r>=this.rows||s<0||s>=this.rows)throw new RangeError("Argument out of range");for(var e=new this.constructor[Symbol.species](s-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=s;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError(`Column index out of range: ${t[i]}`);e.set(o-r,i,this.get(o,t[i]))}return e}setSubMatrix(t,r,s){var e=r+(t=this.constructor.checkMatrix(t)).rows-1,i=s+t.columns-1;(0,n.checkRange)(this,r,e,s,i);for(var o=0;o<t.rows;o++)for(var h=0;h<t.columns;h++)this[r+o][s+h]=t.get(o,h);return this}selection(t,r){for(var s=(0,n.checkIndices)(this,t,r),e=new this.constructor[Symbol.species](t.length,r.length),i=0;i<s.row.length;i++)for(var o=s.row[i],h=0;h<s.column.length;h++){var a=s.column[h];e[i][h]=this.get(o,a)}return e}trace(){for(var t=Math.min(this.rows,this.columns),r=0,s=0;s<t;s++)r+=this.get(s,s);return r}transposeView(){return new a.default(this)}rowView(t){return(0,n.checkRowIndex)(this,t),new c.default(this,t)}columnView(t){return(0,n.checkColumnIndex)(this,t),new y.default(this,t)}flipRowView(){return new b.default(this)}flipColumnView(){return new k.default(this)}subMatrixView(t,r,s,e){return new l.default(this,t,r,s,e)}selectionView(t,r){return new f.default(this,t,r)}rowSelectionView(t){return new v.default(this,t)}columnSelectionView(t){return new x.default(this,t)}det(){var t,r,s,i,o,n;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),r=this.get(0,1),s=this.get(1,0),t*this.get(1,1)-r*s):3===this.columns?(i=this.selectionView([1,2],[1,2]),o=this.selectionView([1,2],[0,2]),n=this.selectionView([1,2],[0,1]),t=this.get(0,0),r=this.get(0,1),s=this.get(0,2),t*i.det()-r*o.det()+s*n.det()):new e.default(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var r=new o.default(this,{autoTranspose:!0}),s=r.leftSingularVectors,e=r.rightSingularVectors,i=r.diagonal,n=0;n<i.length;n++)Math.abs(i[n])>t?i[n]=1/i[n]:i[n]=0;return i=this.constructor[Symbol.species].diag(i),e.mmul(i.mmul(s.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),r=0;r<this.rows;r++)for(var s=0;s<this.columns;s++)t.set(r,s,this.get(r,s));return t}}function i(t,r){return t-r}s.prototype.klass="Matrix",s.random=s.rand,s.diagonal=s.diag,s.prototype.diagonal=s.prototype.diag,s.identity=s.eye,s.prototype.negate=s.prototype.neg,s.prototype.tensorProduct=s.prototype.kroneckerProduct,s.prototype.determinant=s.prototype.det;var h,u="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",m=eval;for(var w of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var g=m(_("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:w[1],op:w[0]})),d=m(_("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:`${w[1]}S`,op:w[0]})),p=m(_("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:`${w[1]}M`,op:w[0]})),M=m(_("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:w[1]}));for(h=1;h<w.length;h++)s.prototype[w[h]]=g,s.prototype[`${w[h]}S`]=d,s.prototype[`${w[h]}M`]=p,s[w[h]]=M}var R=[["~","not"]];for(var S of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach(function(t){R.push([`Math.${t}`,t])}),R)){var V=m(_("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:S[1],method:S[0]})),C=m(_("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:S[1]}));for(h=1;h<S.length;h++)s.prototype[S[h]]=V,s[S[h]]=C}for(var j of[["Math.pow",1,"pow"]]){var I="arg0";for(h=1;h<j[1];h++)I+=`, arg${h}`;if(1!==j[1]){var q=m(_("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:j[2],method:j[0],args:I})),E=m(_(u,{name:j[2],args:I}));for(h=2;h<j.length;h++)s.prototype[j[h]]=q,s[j[h]]=E}else{var $={name:j[2],args:I,method:j[0]},A=m(_("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",$)),z=m(_("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",$)),D=m(_("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",$)),P=m(_("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",$));for(h=2;h<j.length;h++)s.prototype[j[h]]=A,s.prototype[`${j[h]}M`]=D,s.prototype[`${j[h]}S`]=z,s[j[h]]=P}}function _(t,r){for(var s in r)t=t.replace(new RegExp(`%${s}%`,"g"),r[s]);return t}return s}
},{"ml-array-rescale":"fWvu","./dc/lu":"UMPl","./dc/svd":"uExS","./util":"DKHH","./views/transpose":"atAY","./views/row":"LOf7","./views/sub":"Vm1M","./views/selection":"gnlB","./views/rowSelection":"Inl8","./views/columnSelection":"UA+r","./views/column":"akxw","./views/flipRow":"ItzX","./views/flipColumn":"Rj3p"}],"d3nN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./abstractMatrix"),e=s(r),t=require("./util");function s(r){return r&&r.__esModule?r:{default:r}}class n extends((0,e.default)(Array)){constructor(r,e){var t;if(1===arguments.length&&"number"==typeof r)return new Array(r);if(n.isMatrix(r))return r.clone();if(Number.isInteger(r)&&r>0){if(super(r),!(Number.isInteger(e)&&e>0))throw new TypeError("nColumns must be a positive integer");for(t=0;t<r;t++)this[t]=new Array(e)}else{if(!Array.isArray(r))throw new TypeError("First argument must be a positive number or an array");{const s=r;if(r=s.length,"number"!=typeof(e=s[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(r),t=0;t<r;t++){if(s[t].length!==e)throw new RangeError("Inconsistent array dimensions");this[t]=[].concat(s[t])}}}return this.rows=r,this.columns=e,this}set(r,e,t){return this[r][e]=t,this}get(r,e){return this[r][e]}removeRow(r){if((0,t.checkRowIndex)(this,r),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(r,1),this.rows-=1,this}addRow(r,e){return void 0===e&&(e=r,r=this.rows),(0,t.checkRowIndex)(this,r,!0),e=(0,t.checkRowVector)(this,e,!0),this.splice(r,0,e),this.rows+=1,this}removeColumn(r){if((0,t.checkColumnIndex)(this,r),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(r,1);return this.columns-=1,this}addColumn(r,e){void 0===e&&(e=r,r=this.columns),(0,t.checkColumnIndex)(this,r,!0),e=(0,t.checkColumnVector)(this,e);for(var s=0;s<this.rows;s++)this[s].splice(r,0,e[s]);return this.columns+=1,this}}exports.default=n;
},{"./abstractMatrix":"45Jg","./util":"DKHH"}],"JwL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../abstractMatrix"),e=a(t),r=require("../matrix"),s=a(r);function a(t){return t&&t.__esModule?t:{default:t}}class u extends((0,e.default)()){constructor(t,e={}){const{rows:r=1}=e;if(t.length%r!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=t.length/r,this.data=t}set(t,e,r){var s=this._calculateIndex(t,e);return this.data[s]=r,this}get(t,e){var r=this._calculateIndex(t,e);return this.data[r]}_calculateIndex(t,e){return t*this.columns+e}static get[Symbol.species](){return s.default}}exports.default=u;
},{"../abstractMatrix":"45Jg","../matrix":"d3nN"}],"Wck9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../abstractMatrix"),e=a(t),r=require("../matrix"),s=a(r);function a(t){return t&&t.__esModule?t:{default:t}}class u extends((0,e.default)()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}static get[Symbol.species](){return s.default}}exports.default=u;
},{"../abstractMatrix":"45Jg","../matrix":"d3nN"}],"qzLa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrap=n;var r=require("./WrapperMatrix1D"),e=u(r),t=require("./WrapperMatrix2D"),a=u(t);function u(r){return r&&r.__esModule?r:{default:r}}function n(r,t){if(Array.isArray(r))return r[0]&&Array.isArray(r[0])?new a.default(r):new e.default(r,t);throw new Error("the argument is not an array")}
},{"./WrapperMatrix1D":"JwL4","./WrapperMatrix2D":"Wck9"}],"U1MM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../index"),t=require("./util");class e{constructor(e){var o,i,s,a,f=(e=r.WrapperMatrix2D.checkMatrix(e)).clone(),n=e.rows,u=e.columns,l=new Array(u);for(s=0;s<u;s++){var c=0;for(o=s;o<n;o++)c=(0,t.hypotenuse)(c,f.get(o,s));if(0!==c){for(f.get(s,s)<0&&(c=-c),o=s;o<n;o++)f.set(o,s,f.get(o,s)/c);for(f.set(s,s,f.get(s,s)+1),i=s+1;i<u;i++){for(a=0,o=s;o<n;o++)a+=f.get(o,s)*f.get(o,i);for(a=-a/f.get(s,s),o=s;o<n;o++)f.set(o,i,f.get(o,i)+a*f.get(o,s))}}l[s]=-c}this.QR=f,this.Rdiag=l}solve(t){t=r.Matrix.checkMatrix(t);var e=this.QR,o=e.rows;if(t.rows!==o)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var i,s,a,f,n=t.columns,u=t.clone(),l=e.columns;for(a=0;a<l;a++)for(s=0;s<n;s++){for(f=0,i=a;i<o;i++)f+=e[i][a]*u[i][s];for(f=-f/e[a][a],i=a;i<o;i++)u[i][s]+=f*e[i][a]}for(a=l-1;a>=0;a--){for(s=0;s<n;s++)u[a][s]/=this.Rdiag[a];for(i=0;i<a;i++)for(s=0;s<n;s++)u[i][s]-=u[a][s]*e[i][a]}return u.subMatrix(0,l-1,0,n-1)}isFullRank(){for(var r=this.QR.columns,t=0;t<r;t++)if(0===this.Rdiag[t])return!1;return!0}get upperTriangularMatrix(){var t,e,o=this.QR,i=o.columns,s=new r.Matrix(i,i);for(t=0;t<i;t++)for(e=0;e<i;e++)s[t][e]=t<e?o[t][e]:t===e?this.Rdiag[t]:0;return s}get orthogonalMatrix(){var t,e,o,i,s=this.QR,a=s.rows,f=s.columns,n=new r.Matrix(a,f);for(o=f-1;o>=0;o--){for(t=0;t<a;t++)n[t][o]=0;for(n[o][o]=1,e=o;e<f;e++)if(0!==s[o][o]){for(i=0,t=o;t<a;t++)i+=s[t][o]*n[t][e];for(i=-i/s[o][o],t=o;t<a;t++)n[t][e]+=i*s[t][o]}}return n}}exports.default=e;
},{"../index":"fuYa","./util":"NZrV"}],"TRdW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inverse=c,exports.solve=o;var e=require("./dc/lu"),r=s(e),t=require("./dc/qr"),u=s(t),i=require("./dc/svd"),a=s(i),n=require("./index");function s(e){return e&&e.__esModule?e:{default:e}}function c(e,r=!1){return e=n.WrapperMatrix2D.checkMatrix(e),r?new a.default(e).inverse():o(e,n.Matrix.eye(e.rows))}function o(e,t,i=!1){return e=n.WrapperMatrix2D.checkMatrix(e),t=n.WrapperMatrix2D.checkMatrix(t),i?new a.default(e).solve(t):e.isSquare()?new r.default(e).solve(t):new u.default(e).solve(t)}
},{"./dc/lu":"UMPl","./dc/qr":"U1MM","./dc/svd":"uExS","./index":"fuYa"}],"YYy6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearDependencies=d;var e=require("ml-array-max"),r=s(e),t=require("./matrix"),o=s(t),u=require("./dc/svd"),a=s(u);function s(e){return e&&e.__esModule?e:{default:e}}function n(e,r){for(var t=[],o=0;o<e;o++)o!==r&&t.push(o);return t}function l(e,r,t,o=1e-9,u=1e-9){if(e>u)return new Array(r.rows+1).fill(0);for(var a=r.addRow(t,[0]),s=0;s<a.rows;s++)Math.abs(a.get(s,0))<o&&a.set(s,0,0);return a.to1DArray()}function d(e,t={}){const{thresholdValue:u=1e-9,thresholdError:s=1e-9}=t;for(var d=e.rows,f=new o.default(d,d),i=0;i<d;i++){var c=o.default.columnVector(e.getRow(i)),w=e.subMatrixRow(n(d,i)).transposeView(),v=new a.default(w).solve(c),h=(0,r.default)(o.default.sub(c,w.mmul(v)).abs().to1DArray());f.setRow(i,l(h,v,i,u,s))}return f}
},{"ml-array-max":"r09C","./matrix":"d3nN","./dc/svd":"uExS"}],"ECz3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../index"),a=require("./util");class t{constructor(t,h={}){const{assumeSymmetric:i=!1}=h;if(!(t=r.WrapperMatrix2D.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var M,b,n=t.columns,u=(0,a.getFilled2DArray)(n,n,0),l=new Array(n),c=new Array(n),x=t;if(!!i||t.isSymmetric()){for(M=0;M<n;M++)for(b=0;b<n;b++)u[M][b]=x.get(M,b);f(n,c,l,u),o(n,c,l,u)}else{var m=(0,a.getFilled2DArray)(n,n,0),v=new Array(n);for(b=0;b<n;b++)for(M=0;M<n;M++)m[M][b]=x.get(M,b);s(n,m,v,u),e(n,c,l,u,m)}this.n=n,this.e=c,this.d=l,this.V=u}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return r.Matrix.isMatrix(this.V)||(this.V=new r.Matrix(this.V)),this.V}get diagonalMatrix(){var a,t,f=this.n,o=this.e,s=this.d,e=new r.Matrix(f,f);for(a=0;a<f;a++){for(t=0;t<f;t++)e[a][t]=0;e[a][a]=s[a],o[a]>0?e[a][a+1]=o[a]:o[a]<0&&(e[a][a-1]=o[a])}return e}}function f(r,a,t,f){var o,s,e,h,i,M,b,n;for(i=0;i<r;i++)t[i]=f[r-1][i];for(h=r-1;h>0;h--){for(n=0,e=0,M=0;M<h;M++)n+=Math.abs(t[M]);if(0===n)for(a[h]=t[h-1],i=0;i<h;i++)t[i]=f[h-1][i],f[h][i]=0,f[i][h]=0;else{for(M=0;M<h;M++)t[M]/=n,e+=t[M]*t[M];for(o=t[h-1],s=Math.sqrt(e),o>0&&(s=-s),a[h]=n*s,e-=o*s,t[h-1]=o-s,i=0;i<h;i++)a[i]=0;for(i=0;i<h;i++){for(o=t[i],f[i][h]=o,s=a[i]+f[i][i]*o,M=i+1;M<=h-1;M++)s+=f[M][i]*t[M],a[M]+=f[M][i]*o;a[i]=s}for(o=0,i=0;i<h;i++)a[i]/=e,o+=a[i]*t[i];for(b=o/(e+e),i=0;i<h;i++)a[i]-=b*t[i];for(i=0;i<h;i++){for(o=t[i],s=a[i],M=i;M<=h-1;M++)f[M][i]-=o*a[M]+s*t[M];t[i]=f[h-1][i],f[h][i]=0}}t[h]=e}for(h=0;h<r-1;h++){if(f[r-1][h]=f[h][h],f[h][h]=1,0!==(e=t[h+1])){for(M=0;M<=h;M++)t[M]=f[M][h+1]/e;for(i=0;i<=h;i++){for(s=0,M=0;M<=h;M++)s+=f[M][h+1]*f[M][i];for(M=0;M<=h;M++)f[M][i]-=s*t[M]}}for(M=0;M<=h;M++)f[M][h+1]=0}for(i=0;i<r;i++)t[i]=f[r-1][i],f[r-1][i]=0;f[r-1][r-1]=1,a[0]=0}function o(r,t,f,o){var s,e,h,i,M,b,n,u,l,c,x,m,v,g,d,y;for(h=1;h<r;h++)t[h-1]=t[h];t[r-1]=0;var q=0,w=0,p=Number.EPSILON;for(b=0;b<r;b++){for(w=Math.max(w,Math.abs(f[b])+Math.abs(t[b])),n=b;n<r&&!(Math.abs(t[n])<=p*w);)n++;if(n>b){0;do{for(1,s=f[b],u=(f[b+1]-s)/(2*t[b]),l=(0,a.hypotenuse)(u,1),u<0&&(l=-l),f[b]=t[b]/(u+l),f[b+1]=t[b]*(u+l),c=f[b+1],e=s-f[b],h=b+2;h<r;h++)f[h]-=e;for(q+=e,u=f[n],m=x=1,v=x,g=t[b+1],d=0,y=0,h=n-1;h>=b;h--)for(v=m,m=x,y=d,s=x*t[h],e=x*u,l=(0,a.hypotenuse)(u,t[h]),t[h+1]=d*l,d=t[h]/l,u=(x=u/l)*f[h]-d*s,f[h+1]=e+d*(x*s+d*f[h]),M=0;M<r;M++)e=o[M][h+1],o[M][h+1]=d*o[M][h]+x*e,o[M][h]=x*o[M][h]-d*e;u=-d*y*v*g*t[b]/c,t[b]=d*u,f[b]=x*u}while(Math.abs(t[b])>p*w)}f[b]=f[b]+q,t[b]=0}for(h=0;h<r-1;h++){for(M=h,u=f[h],i=h+1;i<r;i++)f[i]<u&&(M=i,u=f[i]);if(M!==h)for(f[M]=f[h],f[h]=u,i=0;i<r;i++)u=o[i][h],o[i][h]=o[i][M],o[i][M]=u}}function s(r,a,t,f){var o,s,e,h,i,M,b,n=r-1;for(M=1;M<=n-1;M++){for(b=0,h=M;h<=n;h++)b+=Math.abs(a[h][M-1]);if(0!==b){for(e=0,h=n;h>=M;h--)t[h]=a[h][M-1]/b,e+=t[h]*t[h];for(s=Math.sqrt(e),t[M]>0&&(s=-s),e-=t[M]*s,t[M]=t[M]-s,i=M;i<r;i++){for(o=0,h=n;h>=M;h--)o+=t[h]*a[h][i];for(o/=e,h=M;h<=n;h++)a[h][i]-=o*t[h]}for(h=0;h<=n;h++){for(o=0,i=n;i>=M;i--)o+=t[i]*a[h][i];for(o/=e,i=M;i<=n;i++)a[h][i]-=o*t[i]}t[M]=b*t[M],a[M][M-1]=b*s}}for(h=0;h<r;h++)for(i=0;i<r;i++)f[h][i]=h===i?1:0;for(M=n-1;M>=1;M--)if(0!==a[M][M-1]){for(h=M+1;h<=n;h++)t[h]=a[h][M-1];for(i=M;i<=n;i++){for(s=0,h=M;h<=n;h++)s+=t[h]*f[h][i];for(s=s/t[M]/a[M][M-1],h=M;h<=n;h++)f[h][i]+=s*t[h]}}}function e(r,a,t,f,o){var s,e,i,M,b,n,u,l,c,x,m,v,g,d,y,q=r-1,w=r-1,p=Number.EPSILON,A=0,E=0,S=0,V=0,N=0,D=0,O=0,P=0;for(s=0;s<r;s++)for((s<0||s>w)&&(t[s]=o[s][s],a[s]=0),e=Math.max(s-1,0);e<r;e++)E+=Math.abs(o[s][e]);for(;q>=0;){for(M=q;M>0&&(0===(D=Math.abs(o[M-1][M-1])+Math.abs(o[M][M]))&&(D=E),!(Math.abs(o[M][M-1])<p*D));)M--;if(M===q)o[q][q]=o[q][q]+A,t[q]=o[q][q],a[q]=0,q--,P=0;else if(M===q-1){if(u=o[q][q-1]*o[q-1][q],V=(S=(o[q-1][q-1]-o[q][q])/2)*S+u,O=Math.sqrt(Math.abs(V)),o[q][q]=o[q][q]+A,o[q-1][q-1]=o[q-1][q-1]+A,l=o[q][q],V>=0){for(O=S>=0?S+O:S-O,t[q-1]=l+O,t[q]=t[q-1],0!==O&&(t[q]=l-u/O),a[q-1]=0,a[q]=0,S=(l=o[q][q-1])/(D=Math.abs(l)+Math.abs(O)),V=O/D,S/=N=Math.sqrt(S*S+V*V),V/=N,e=q-1;e<r;e++)O=o[q-1][e],o[q-1][e]=V*O+S*o[q][e],o[q][e]=V*o[q][e]-S*O;for(s=0;s<=q;s++)O=o[s][q-1],o[s][q-1]=V*O+S*o[s][q],o[s][q]=V*o[s][q]-S*O;for(s=0;s<=w;s++)O=f[s][q-1],f[s][q-1]=V*O+S*f[s][q],f[s][q]=V*f[s][q]-S*O}else t[q-1]=l+S,t[q]=l+S,a[q-1]=O,a[q]=-O;q-=2,P=0}else{if(l=o[q][q],c=0,u=0,M<q&&(c=o[q-1][q-1],u=o[q][q-1]*o[q-1][q]),10===P){for(A+=l,s=0;s<=q;s++)o[s][s]-=l;l=c=.75*(D=Math.abs(o[q][q-1])+Math.abs(o[q-1][q-2])),u=-.4375*D*D}if(30===P&&(D=(D=(c-l)/2)*D+u)>0){for(D=Math.sqrt(D),c<l&&(D=-D),D=l-u/((c-l)/2+D),s=0;s<=q;s++)o[s][s]-=D;A+=D,l=c=u=.964}for(P+=1,b=q-2;b>=M&&(S=((N=l-(O=o[b][b]))*(D=c-O)-u)/o[b+1][b]+o[b][b+1],V=o[b+1][b+1]-O-N-D,N=o[b+2][b+1],S/=D=Math.abs(S)+Math.abs(V)+Math.abs(N),V/=D,N/=D,b!==M)&&!(Math.abs(o[b][b-1])*(Math.abs(V)+Math.abs(N))<p*(Math.abs(S)*(Math.abs(o[b-1][b-1])+Math.abs(O)+Math.abs(o[b+1][b+1]))));)b--;for(s=b+2;s<=q;s++)o[s][s-2]=0,s>b+2&&(o[s][s-3]=0);for(i=b;i<=q-1&&(d=i!==q-1,i!==b&&(S=o[i][i-1],V=o[i+1][i-1],N=d?o[i+2][i-1]:0,0!==(l=Math.abs(S)+Math.abs(V)+Math.abs(N))&&(S/=l,V/=l,N/=l)),0!==l);i++)if(D=Math.sqrt(S*S+V*V+N*N),S<0&&(D=-D),0!==D){for(i!==b?o[i][i-1]=-D*l:M!==b&&(o[i][i-1]=-o[i][i-1]),l=(S+=D)/D,c=V/D,O=N/D,V/=S,N/=S,e=i;e<r;e++)S=o[i][e]+V*o[i+1][e],d&&(S+=N*o[i+2][e],o[i+2][e]=o[i+2][e]-S*O),o[i][e]=o[i][e]-S*l,o[i+1][e]=o[i+1][e]-S*c;for(s=0;s<=Math.min(q,i+3);s++)S=l*o[s][i]+c*o[s][i+1],d&&(S+=O*o[s][i+2],o[s][i+2]=o[s][i+2]-S*N),o[s][i]=o[s][i]-S,o[s][i+1]=o[s][i+1]-S*V;for(s=0;s<=w;s++)S=l*f[s][i]+c*f[s][i+1],d&&(S+=O*f[s][i+2],f[s][i+2]=f[s][i+2]-S*N),f[s][i]=f[s][i]-S,f[s][i+1]=f[s][i+1]-S*V}}}if(0!==E){for(q=r-1;q>=0;q--)if(S=t[q],0===(V=a[q]))for(M=q,o[q][q]=1,s=q-1;s>=0;s--){for(u=o[s][s]-S,N=0,e=M;e<=q;e++)N+=o[s][e]*o[e][q];if(a[s]<0)O=u,D=N;else if(M=s,0===a[s]?o[s][q]=0!==u?-N/u:-N/(p*E):(l=o[s][s+1],c=o[s+1][s],n=(l*D-O*N)/(V=(t[s]-S)*(t[s]-S)+a[s]*a[s]),o[s][q]=n,o[s+1][q]=Math.abs(l)>Math.abs(O)?(-N-u*n)/l:(-D-c*n)/O),p*(n=Math.abs(o[s][q]))*n>1)for(e=s;e<=q;e++)o[e][q]=o[e][q]/n}else if(V<0)for(M=q-1,Math.abs(o[q][q-1])>Math.abs(o[q-1][q])?(o[q-1][q-1]=V/o[q][q-1],o[q-1][q]=-(o[q][q]-S)/o[q][q-1]):(y=h(0,-o[q-1][q],o[q-1][q-1]-S,V),o[q-1][q-1]=y[0],o[q-1][q]=y[1]),o[q][q-1]=0,o[q][q]=1,s=q-2;s>=0;s--){for(x=0,m=0,e=M;e<=q;e++)x+=o[s][e]*o[e][q-1],m+=o[s][e]*o[e][q];if(u=o[s][s]-S,a[s]<0)O=u,N=x,D=m;else if(M=s,0===a[s]?(y=h(-x,-m,u,V),o[s][q-1]=y[0],o[s][q]=y[1]):(l=o[s][s+1],c=o[s+1][s],v=(t[s]-S)*(t[s]-S)+a[s]*a[s]-V*V,g=2*(t[s]-S)*V,0===v&&0===g&&(v=p*E*(Math.abs(u)+Math.abs(V)+Math.abs(l)+Math.abs(c)+Math.abs(O))),y=h(l*N-O*x+V*m,l*D-O*m-V*x,v,g),o[s][q-1]=y[0],o[s][q]=y[1],Math.abs(l)>Math.abs(O)+Math.abs(V)?(o[s+1][q-1]=(-x-u*o[s][q-1]+V*o[s][q])/l,o[s+1][q]=(-m-u*o[s][q]-V*o[s][q-1])/l):(y=h(-N-c*o[s][q-1],-D-c*o[s][q],O,V),o[s+1][q-1]=y[0],o[s+1][q]=y[1])),p*(n=Math.max(Math.abs(o[s][q-1]),Math.abs(o[s][q])))*n>1)for(e=s;e<=q;e++)o[e][q-1]=o[e][q-1]/n,o[e][q]=o[e][q]/n}for(s=0;s<r;s++)if(s<0||s>w)for(e=s;e<r;e++)f[s][e]=o[s][e];for(e=r-1;e>=0;e--)for(s=0;s<=w;s++){for(O=0,i=0;i<=Math.min(e,w);i++)O+=f[s][i]*o[i][e];f[s][e]=O}}}function h(r,a,t,f){var o,s;return Math.abs(t)>Math.abs(f)?[(r+(o=f/t)*a)/(s=t+o*f),(a-o*r)/s]:[((o=t/f)*r+a)/(s=f+o*t),(o*a-r)/s]}exports.default=t;
},{"../index":"fuYa","./util":"NZrV"}],"B9Xj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../index");class t{constructor(t){if(!(t=r.WrapperMatrix2D.checkMatrix(t)).isSymmetric())throw new Error("Matrix is not symmetric");var e,o,i,a=t,s=a.rows,n=new r.Matrix(s,s),f=!0;for(o=0;o<s;o++){var c=n[o],x=0;for(i=0;i<o;i++){var M=n[i],h=0;for(e=0;e<i;e++)h+=M[e]*c[e];c[i]=h=(a.get(o,i)-h)/n[i][i],x+=h*h}for(f&=(x=a.get(o,o)-x)>0,n[o][o]=Math.sqrt(Math.max(x,0)),i=o+1;i<s;i++)n[o][i]=0}if(!f)throw new Error("Matrix is not positive definite");this.L=n}solve(t){t=r.WrapperMatrix2D.checkMatrix(t);var e=this.L,o=e.rows;if(t.rows!==o)throw new Error("Matrix dimensions do not match");var i,a,s,n=t.columns,f=t.clone();for(s=0;s<o;s++)for(a=0;a<n;a++){for(i=0;i<s;i++)f[s][a]-=f[i][a]*e[s][i];f[s][a]/=e[s][s]}for(s=o-1;s>=0;s--)for(a=0;a<n;a++){for(i=s+1;i<o;i++)f[s][a]-=f[i][a]*e[i][s];f[s][a]/=e[s][s]}return f}get lowerTriangularMatrix(){return this.L}}exports.default=t;
},{"../index":"fuYa"}],"fuYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./matrix");Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return l(e).default}}),Object.defineProperty(exports,"Matrix",{enumerable:!0,get:function(){return l(e).default}});var r=require("./abstractMatrix");Object.defineProperty(exports,"abstractMatrix",{enumerable:!0,get:function(){return l(r).default}});var t=require("./wrap/wrap");Object.defineProperty(exports,"wrap",{enumerable:!0,get:function(){return t.wrap}});var n=require("./wrap/WrapperMatrix2D");Object.defineProperty(exports,"WrapperMatrix2D",{enumerable:!0,get:function(){return l(n).default}});var u=require("./wrap/WrapperMatrix1D");Object.defineProperty(exports,"WrapperMatrix1D",{enumerable:!0,get:function(){return l(u).default}});var o=require("./decompositions");Object.defineProperty(exports,"solve",{enumerable:!0,get:function(){return o.solve}}),Object.defineProperty(exports,"inverse",{enumerable:!0,get:function(){return o.inverse}});var i=require("./linearDependencies");Object.defineProperty(exports,"linearDependencies",{enumerable:!0,get:function(){return i.linearDependencies}});var a=require("./dc/svd.js");Object.defineProperty(exports,"SingularValueDecomposition",{enumerable:!0,get:function(){return l(a).default}}),Object.defineProperty(exports,"SVD",{enumerable:!0,get:function(){return l(a).default}});var p=require("./dc/evd.js");Object.defineProperty(exports,"EigenvalueDecomposition",{enumerable:!0,get:function(){return l(p).default}}),Object.defineProperty(exports,"EVD",{enumerable:!0,get:function(){return l(p).default}});var c=require("./dc/cholesky.js");Object.defineProperty(exports,"CholeskyDecomposition",{enumerable:!0,get:function(){return l(c).default}}),Object.defineProperty(exports,"CHO",{enumerable:!0,get:function(){return l(c).default}});var f=require("./dc/lu.js");Object.defineProperty(exports,"LuDecomposition",{enumerable:!0,get:function(){return l(f).default}}),Object.defineProperty(exports,"LU",{enumerable:!0,get:function(){return l(f).default}});var d=require("./dc/qr.js");function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"QrDecomposition",{enumerable:!0,get:function(){return l(d).default}}),Object.defineProperty(exports,"QR",{enumerable:!0,get:function(){return l(d).default}});
},{"./matrix":"d3nN","./abstractMatrix":"45Jg","./wrap/wrap":"qzLa","./wrap/WrapperMatrix2D":"Wck9","./wrap/WrapperMatrix1D":"JwL4","./decompositions":"TRdW","./linearDependencies":"YYy6","./dc/svd.js":"uExS","./dc/evd.js":"ECz3","./dc/cholesky.js":"B9Xj","./dc/lu.js":"UMPl","./dc/qr.js":"U1MM"}],"FJJ/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var r=require("ml-matrix");function e(e){var t=new r.SVD(e,{autoTranspose:!0});if(1!==t.rank)return null;var n=Math.sqrt(t.s[0]);return[t.U.map(function(r){return r[0]*n}),t.V.map(function(r){return r[0]*n})]}
},{"ml-matrix":"fuYa"}],"LE/g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var e=require("ml-matrix-convolution"),t=require("../Image"),i=d(t),r=require("../../util/channel"),h=require("../../util/kernel"),a=require("../operator/convolutionSeparable"),o=d(a),l=require("../internal/clamp"),s=require("./getSeparatedKernel"),n=d(s);function d(e){return e&&e.__esModule?e:{default:e}}function f(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.channels,d=a.bitDepth,f=a.normalize,u=void 0!==f&&f,v=a.divisor,c=void 0===v?1:v,g=a.border,p=void 0===g?"copy":g,w=a.algorithm,m=void 0===w?"auto":w,b=i.default.createFrom(this,{bitDepth:d});if(s=(0,r.validateArrayOfChannels)(this,s,!0),"separable"!==m)t=(0,h.validateKernel)(t).kernel;else if(!Array.isArray(t)||2!==t.length)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===m){var q=(0,n.default)(t);null!==q?(m="separable",t=q):m=(t.length>9||t[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}var y=void 0,M=void 0;"separable"===m?(y=Math.floor(t[0].length/2),M=Math.floor(t[1].length/2)):(y=Math.floor(t.length/2),M=Math.floor(t[0].length/2));var z=b.isClamped,A=new Array(this.height*this.width),_=void 0,k=void 0,x=void 0,C=void 0,D=void 0,K=void 0;for(C=0;C<s.length;C++){for(D=s[C],x=0;x<this.height;x++)for(k=0;k<this.width;k++)A[_=x*this.width+k]=this.data[_*this.channels+D];if("direct"===m)K=(0,e.direct)(A,t,{rows:this.height,cols:this.width,normalize:u,divisor:c});else if("separable"===m){if(K=(0,o.default)(A,t,this.width,this.height),u){c=0;for(var O=0;O<t[0].length;O++)for(var S=0;S<t[1].length;S++)c+=t[0][O]*t[1][S]}if(1!==c)for(var j=0;j<K.length;j++)K[j]/=c}else K=(0,e.fft)(A,t,{rows:this.height,cols:this.width,normalize:u,divisor:c});for(x=0;x<this.height;x++)for(k=0;k<this.width;k++)_=x*this.width+k,b.data[_*this.channels+D]=z?(0,l.clamp)(K[_],b):K[_]}if(this.alpha&&!s.includes(this.channels))for(k=this.components;k<this.data.length;k+=this.channels)b.data[k]=this.data[k];return"periodic"!==p&&b.setBorder({size:[M,y],algorithm:p}),b}
},{"ml-matrix-convolution":"ZPo+","../Image":"U4ir","../../util/channel":"3KRM","../../util/kernel":"tHgk","../operator/convolutionSeparable":"jnd7","../internal/clamp":"i/sW","./getSeparatedKernel":"FJJ/"}],"By7v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../operator/convolution"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction,i=void 0===t?"xy":t,n=e.border,o=void 0===n?"copy":n,s=e.kernelX,l=e.kernelY,a=e.channels,h=e.bitDepth,c=void 0===h?this.bitDepth:h;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),i){case"x":if(!s)throw new Error("kernelX option is missing");return r.default.call(this,s,{channels:a,border:o,bitDepth:c});case"y":if(!l)throw new Error("kernelY option is missing");return r.default.call(this,l,{channels:a,border:o,bitDepth:c});case"xy":if(!s)throw new Error("kernelX option is missing");if(!l)throw new Error("kernelY option is missing");var d=r.default.call(this,s,{channels:a,border:o,bitDepth:32}),u=r.default.call(this,l,{channels:a,border:o,bitDepth:32});return d.hypotenuse(u,{bitDepth:c,channels:a});default:throw new Error("Unknown parameter direction: "+i)}}
},{"../operator/convolution":"LE/g"}],"DM73":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("../../util/kernels"),r=require("./gradientFilter"),t=u(r);function u(e){return e&&e.__esModule?e:{default:e}}function l(r){return t.default.call(this,Object.assign({},r,{kernelX:e.SOBEL_X,kernelY:e.SOBEL_Y}))}
},{"../../util/kernels":"MT1L","./gradientFilter":"By7v"}],"g/FV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("../../util/kernels"),r=require("./gradientFilter"),t=u(r);function u(e){return e&&e.__esModule?e:{default:e}}function l(r){return t.default.call(this,Object.assign({},r,{kernelX:e.SCHARR_X,kernelY:e.SCHARR_Y}))}
},{"../../util/kernels":"MT1L","./gradientFilter":"By7v"}],"Et2r":[function(require,module,exports) {
function r(r,e){r=r||0;for(var n=new Array(r),o=0;o<r;o++)n[o]=e;return n}module.exports=r;
},{}],"COxk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("new-array"),a=t(e),r=require("../../util/channel");function t(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.algorithm,n=void 0===t?"range":t,i=e.channels,h=e.min,s=void 0===h?this.min:h,u=e.max,o=void 0===u?this.max:u;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),(i=(0,r.validateArrayOfChannels)(this,{channels:i})).length!==this.channel&&(Array.isArray(s)&&s.length===this.channels&&(s=s.filter(function(e,a){return i.includes(a)})),Array.isArray(o)&&o.length===this.channels&&(o=o.filter(function(e,a){return i.includes(a)}))),n){case"range":s<0&&(s=0),o>this.maxValue&&(o=this.maxValue),Array.isArray(s)||(s=(0,a.default)(i.length,s)),Array.isArray(o)||(o=(0,a.default)(i.length,o)),l(this,s,o,i);break;default:throw new Error("level: algorithm not implement: "+n)}return this}function l(e,a,r,t){for(var n=new Array(t.length),l=0;l<t.length;l++)0===a[l]&&r[l]===e.maxValue?n[l]=0:r[l]===a[l]?n[l]=0:n[l]=(e.maxValue+1-1e-5)/(r[l]-a[l]),a[l]+=.499995/n[l];for(var i=0;i<t.length;i++){var h=t[i];if(0!==n[i])for(var s=0;s<e.data.length;s+=e.channels)e.data[s+h]=Math.min(Math.max(0,(e.data[s+h]-a[i])*n[i]+.5|0),e.maxValue)}}
},{"new-array":"Et2r","../../util/channel":"3KRM"}],"xNrY":[function(require,module,exports) {
"use strict";var t=Object.prototype.toString;module.exports=function(r){return"Array"===t.call(r).substr(-6,5)};
},{}],"Kc+f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkNumberArray=i;var e=require("is-array-type"),r=u(e),t=require("../image/Image"),a=u(t);function u(e){return e&&e.__esModule?e:{default:e}}function i(e){if(isNaN(e)){if(e instanceof a.default)return e.data;if(!(0,r.default)(e))throw new Error("checkNumberArray: the value should be either a number, array or Image");return e}if(e<=0)throw new Error("checkNumberArray: the value must be greater than 0");return e}
},{"is-array-type":"xNrY","../image/Image":"U4ir"}],"e9e3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../../util/channel"),a=require("../../util/value");function e(e){var h=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("add",{bitDepth:[8,16]}),h=(0,t.validateArrayOfChannels)(this,{channels:h}),e=(0,a.checkNumberArray)(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("add: the data size is different");for(var i=0;i<h.length;i++)for(var r=h[i],s=0;s<this.data.length;s+=this.channels)this.data[s+r]=Math.max(0,Math.min(this.maxValue,this.data[s+r]+e[s+r]>>0))}else for(var n=0;n<h.length;n++)for(var l=h[n],d=0;d<this.data.length;d+=this.channels)this.data[d+l]=Math.min(this.maxValue,this.data[d+l]+e>>0);return this}
},{"../../util/channel":"3KRM","../../util/value":"Kc+f"}],"ZY7E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../../util/channel"),a=require("../../util/value");function e(e){var h=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),h=(0,t.validateArrayOfChannels)(this,{channels:h}),e=(0,a.checkNumberArray)(e),isNaN(e)){if(this.data.length!==e.length)throw new Error("substract: the data size is different");for(var r=0;r<h.length;r++)for(var s=h[r],i=0;i<this.data.length;i+=this.channels)this.data[i+s]=Math.max(0,Math.min(this.maxValue,this.data[i+s]-e[i+s]>>0))}else for(var n=0;n<h.length;n++)for(var l=h[n],c=0;c<this.data.length;c+=this.channels)this.data[c+l]=Math.max(0,this.data[c+l]-e>>0);return this}
},{"../../util/channel":"3KRM","../../util/value":"Kc+f"}],"jUEF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=require("../../util/channel"),e=require("../Image"),a=h(e);function h(t){return t&&t.__esModule?t:{default:t}}function s(e){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=h.bitDepth,r=void 0===s?this.bitDepth:s,i=h.channels,n=h.absolute,o=void 0!==n&&n;if(this.checkProcessable("substractImage",{bitDepth:[8,16]}),this.width!==e.width||this.height!==e.height)throw new Error("substractImage: both images must have the same size");if(this.alpha!==e.alpha||this.bitDepth!==e.bitDepth)throw new Error("substractImage: both images must have the same alpha and bitDepth");if(this.channels!==e.channels)throw new Error("substractImage: both images must have the same number of channels");var l=a.default.createFrom(this,{bitDepth:r});i=(0,t.validateArrayOfChannels)(this,{channels:i});for(var u=0;u<i.length;u++)for(var b=i[u];b<this.data.length;b+=this.channels){var c=this.data[b]-e.data[b];l.data[b]=o?Math.abs(c):Math.max(c,0)}return l}
},{"../../util/channel":"3KRM","../Image":"U4ir"}],"1yW7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../../util/channel"),t=require("../Image"),h=a(t);function a(e){return e&&e.__esModule?e:{default:e}}function i(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.bitDepth,s=void 0===i?this.bitDepth:i,r=a.channels;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==t.width||this.height!==t.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==t.alpha||this.bitDepth!==t.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==t.channels)throw new Error("hypotenuse: both images must have the same number of channels");var n=h.default.createFrom(this,{bitDepth:s});r=(0,e.validateArrayOfChannels)(this,{channels:r});for(var o=n.isClamped,l=0;l<r.length;l++)for(var u=r[l];u<this.data.length;u+=this.channels){var p=Math.hypot(this.data[u],t.data[u]);n.data[u]=o?Math.min(Math.max(Math.round(p),0),n.maxValue):p}return n}
},{"../../util/channel":"3KRM","../Image":"U4ir"}],"rC6P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../../util/channel"),e=require("../../util/value");function a(a){var h=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),a<=0)throw new Error("multiply: the value must be greater than 0");if(h=(0,t.validateArrayOfChannels)(this,{channels:h}),a=(0,e.checkNumberArray)(a),isNaN(a)){if(this.data.length!==a.length)throw new Error("multiply: the data size is different");for(var r=0;r<h.length;r++)for(var i=h[r],l=0;l<this.data.length;l+=this.channels)this.data[l+i]=Math.max(0,Math.min(this.maxValue,this.data[l+i]*a[l+i]>>0))}else for(var s=0;s<h.length;s++)for(var n=h[s],u=0;u<this.data.length;u+=this.channels)this.data[u+n]=Math.min(this.maxValue,this.data[u+n]*a>>0);return this}
},{"../../util/channel":"3KRM","../../util/value":"Kc+f"}],"z3GX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../../util/channel"),e=require("../../util/value");function a(a){var h=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channels;if(this.checkProcessable("divide",{bitDepth:[8,16]}),h=(0,t.validateArrayOfChannels)(this,{channels:h}),a=(0,e.checkNumberArray)(a),isNaN(a)){if(this.data.length!==a.length)throw new Error("divide: the: the data size is different");for(var i=0;i<h.length;i++)for(var r=h[i],s=0;s<this.data.length;s+=this.channels)this.data[s+r]=Math.max(0,Math.min(this.maxValue,this.data[s+r]/a[s+r]>>0))}else for(var n=0;n<h.length;n++)for(var l=h[n],d=0;d<this.data.length;d+=this.channels)this.data[d+l]=Math.min(this.maxValue,this.data[d+l]/a>>0);return this}
},{"../../util/channel":"3KRM","../../util/value":"Kc+f"}],"eRf7":[function(require,module,exports) {
"use strict";function e(e,t){return e<0?(e=0-e,"number"==typeof t?"- "+e.toPrecision(t):"- "+e.toString()):"number"==typeof t?e.toPrecision(t):e.toString()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"0NQ5":[function(require,module,exports) {
"use strict";function r(r,e){if(!Array.isArray(r)||!Array.isArray(e))throw new TypeError("x and y must be arrays");if(r.length!==e.length)throw new RangeError("x and y arrays must have the same length")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"EtRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./maybeToPrecision");Object.defineProperty(exports,"maybeToPrecision",{enumerable:!0,get:function(){return t(r).default}});var e=require("./checkArrayLength");function t(r){return r&&r.__esModule?r:{default:r}}Object.defineProperty(exports,"checkArrayLength",{enumerable:!0,get:function(){return t(e).default}});class n{constructor(){if(new.target===n)throw new Error("BaseRegression must be subclassed")}predict(r){if("number"==typeof r)return this._predict(r);if(Array.isArray(r)){const e=new Array(r.length);for(let t=0;t<r.length;t++)e[t]=this._predict(r[t]);return e}throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)throw new Error("x and y must be arrays of the same length");const t=r.length,n=new Array(t);for(let e=0;e<t;e++)n[e]=this._predict(r[e]);let o=0,s=0,a=0,i=0,u=0,c=0,l=0;for(let r=0;r<t;r++)o+=n[r],s+=e[r],u+=n[r]*n[r],c+=e[r]*e[r],l+=n[r]*e[r],0!==e[r]&&(a+=(e[r]-n[r])*(e[r]-n[r])/e[r]),i=(e[r]-n[r])*(e[r]-n[r]);const h=(t*l-o*s)/Math.sqrt((t*u-o*o)*(t*c-s*s));return{r:h,r2:h*h,chi2:a,rmsd:i*i/t}}}exports.default=n;
},{"./maybeToPrecision":"eRf7","./checkArrayLength":"0NQ5"}],"IoAl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),t=s(e);function s(e){return e&&e.__esModule?e:{default:e}}class i extends t.default{constructor(t,s){super(),!0===t?(this.slope=s.slope,this.intercept=s.intercept,this.coefficients=[s.intercept,s.slope]):((0,e.checkArrayLength)(t,s),r(this,t,s))}toJSON(){return{name:"simpleLinearRegression",slope:this.slope,intercept:this.intercept}}_predict(e){return this.slope*e+this.intercept}computeX(e){return(e-this.intercept)/this.slope}toString(t){let s="f(x) = ";if(0!==this.slope){const i=(0,e.maybeToPrecision)(this.slope,t);if(s+=("1"===i?"":i+" * ")+"x",this.intercept){const i=Math.abs(this.intercept);s+=` ${i===this.intercept?"+":"-"} ${(0,e.maybeToPrecision)(i,t)}`}}else s+=(0,e.maybeToPrecision)(this.intercept,t);return s}toLaTeX(e){return this.toString(e)}static load(e){if("simpleLinearRegression"!==e.name)throw new TypeError("not a SLR model");return new i(!0,e)}}function r(e,t,s){const i=t.length;let r=0,n=0,o=0,c=0;for(let e=0;e<i;e++)r+=t[e],n+=s[e],o+=t[e]*t[e],c+=t[e]*s[e];const p=i*c-r*n;e.slope=p/(i*o-r*r),e.intercept=1/i*n-e.slope*(1/i)*r,e.coefficients=[e.intercept,e.slope]}exports.default=i;
},{"ml-regression-base":"EtRJ"}],"8u8a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),t=r(e),s=require("ml-matrix"),i=r(s);function r(e){return e&&e.__esModule?e:{default:e}}class o extends t.default{constructor(t,s,i){super(),!0===t?(this.degree=s.degree,this.powers=s.powers,this.coefficients=s.coefficients):((0,e.checkArrayLength)(t,s),n(this,t,s,i))}_predict(e){let t=0;for(let s=0;s<this.powers.length;s++)t+=this.coefficients[s]*Math.pow(e,this.powers[s]);return t}toJSON(){return{name:"polynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}toString(e){return this._toFormula(e,!1)}toLaTeX(e){return this._toFormula(e,!0)}_toFormula(t,s){let i="^",r="",o=" * ";s&&(i="^{",r="}",o="");let n="",c="";for(let s=0;s<this.coefficients.length;s++)c="",0!==this.coefficients[s]&&(c=0===this.powers[s]?(0,e.maybeToPrecision)(this.coefficients[s],t):1===this.powers[s]?(0,e.maybeToPrecision)(this.coefficients[s],t)+o+"x":(0,e.maybeToPrecision)(this.coefficients[s],t)+o+"x"+i+this.powers[s]+r,this.coefficients[s]>0&&s!==this.coefficients.length-1?c=" + "+c:s!==this.coefficients.length-1&&(c=" "+c)),n=c+n;return"+"===n.charAt(0)&&(n=n.slice(1)),"f(x) = "+n}static load(e){if("polynomialRegression"!==e.name)throw new TypeError("not a polynomial regression model");return new o(!0,e)}}function n(e,t,r,o){const n=t.length;let c;if(Array.isArray(o))o=(c=o).length;else{o++,c=new Array(o);for(let e=0;e<o;e++)c[e]=e}const f=new i.default(n,o),l=new i.default([r]);for(let e=0;e<o;e++)for(let s=0;s<n;s++)0===c[e]?f[s][e]=1:f[s][e]=Math.pow(t[s],c[e]);const a=f.transposeView(),h=a.mmul(f),u=a.mmul(l.transposeView());e.degree=o-1,e.powers=c,e.coefficients=(0,s.solve)(h,u).to1DArray()}exports.default=o;
},{"ml-regression-base":"EtRJ","ml-matrix":"fuYa"}],"baDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),t=s(e),r=require("ml-regression-simple-linear"),i=s(r);function s(e){return e&&e.__esModule?e:{default:e}}class n extends t.default{constructor(t,r){super(),!0===t?(this.A=r.A,this.B=r.B):((0,e.checkArrayLength)(t,r),o(this,t,r))}_predict(e){return this.B*Math.exp(e*this.A)}toJSON(){return{name:"exponentialRegression",A:this.A,B:this.B}}toString(t){return"f(x) = "+(0,e.maybeToPrecision)(this.B,t)+" * e^("+(0,e.maybeToPrecision)(this.A,t)+" * x)"}toLaTeX(t){return this.A>=0?"f(x) = "+(0,e.maybeToPrecision)(this.B,t)+"e^{"+(0,e.maybeToPrecision)(this.A,t)+"x}":"f(x) = \\frac{"+(0,e.maybeToPrecision)(this.B,t)+"}{e^{"+(0,e.maybeToPrecision)(-this.A,t)+"x}}"}static load(e){if("exponentialRegression"!==e.name)throw new TypeError("not a exponential regression model");return new n(!0,e)}}function o(e,t,r){const s=t.length,n=new Array(s);for(let e=0;e<s;e++)n[e]=Math.log(r[e]);const o=new i.default(t,n);e.A=o.slope,e.B=Math.exp(o.intercept)}exports.default=n;
},{"ml-regression-base":"EtRJ","ml-regression-simple-linear":"IoAl"}],"/oK4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),r=i(e),t=require("ml-regression-simple-linear"),s=i(t);function i(e){return e&&e.__esModule?e:{default:e}}class o extends r.default{constructor(r,t){super(),!0===r?(this.A=t.A,this.B=t.B):((0,e.checkArrayLength)(r,t),n(this,r,t))}_predict(e){return this.A*Math.pow(e,this.B)}toJSON(){return{name:"powerRegression",A:this.A,B:this.B}}toString(r){return"f(x) = "+(0,e.maybeToPrecision)(this.A,r)+" * x^"+(0,e.maybeToPrecision)(this.B,r)}toLaTeX(r){return this.B>=0?"f(x) = "+(0,e.maybeToPrecision)(this.A,r)+"x^{"+(0,e.maybeToPrecision)(this.B,r)+"}":"f(x) = \\frac{"+(0,e.maybeToPrecision)(this.A,r)+"}{x^{"+(0,e.maybeToPrecision)(-this.B,r)+"}}"}static load(e){if("powerRegression"!==e.name)throw new TypeError("not a power regression model");return new o(!0,e)}}function n(e,r,t){const i=r.length,o=new Array(i),n=new Array(i);for(let e=0;e<i;e++)o[e]=Math.log(r[e]),n[e]=Math.log(t[e]);const a=new s.default(o,n);e.A=Math.exp(a.intercept),e.B=a.slope}exports.default=o;
},{"ml-regression-base":"EtRJ","ml-regression-simple-linear":"IoAl"}],"tTjA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("ml-matrix"),s=i(t),r=require("ml-regression-base"),e=i(r);function i(t){return t&&t.__esModule?t:{default:t}}class n extends e.default{constructor(r,e,i={}){const{intercept:n=!0,statistics:o=!0}=i;if(super(),this.statistics=o,!0===r)this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept;else{r=new s.default(r),n&&r.addColumn(new Array(r.length).fill(1));const i=new t.SVD(r,{autoTranspose:!0}).solve(e);if(this.weights=i.to2DArray(),this.inputs=r[0].length,this.outputs=e[0].length,n&&this.inputs--,this.intercept=n,o){const t=r.mmul(i),n=new s.default(e).addM(t.neg()).to2DArray().map(t=>Math.pow(t[0],2)).reduce((t,s)=>t+s)/(e.length-r.columns);this.stdError=Math.sqrt(n),this.stdErrorMatrix=r.transposeView().mmul(r).pseudoInverse().mul(n),this.stdErrors=this.stdErrorMatrix.diagonal().map(t=>Math.sqrt(t)),this.tStats=this.weights.map((t,s)=>0===this.stdErrors[s]?0:t[0]/this.stdErrors[s])}}}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return this._predict(t);if(Array.isArray(t[0])){const s=new Array(t.length);for(let r=0;r<t.length;r++)s[r]=this._predict(t[r]);return s}}throw new TypeError("x must be a matrix or array of numbers")}_predict(t){const s=new Array(this.outputs);if(this.intercept)for(let t=0;t<this.outputs;t++)s[t]=this.weights[this.inputs][t];else s.fill(0);for(let r=0;r<this.inputs;r++)for(let e=0;e<this.outputs;e++)s[e]+=this.weights[r][e]*t[r];return s}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((t,s)=>({label:s===this.weights.length-1?"Intercept":`X Variable ${s+1}`,coefficients:t,standardError:this.stdErrors[s],tStat:this.tStats[s]}))}:void 0}}static load(t){if("multivariateLinearRegression"!==t.name)throw new Error("not a MLR model");return new n(!0,t)}}exports.default=n;
},{"ml-matrix":"fuYa","ml-regression-base":"EtRJ"}],"aPUK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),t=s(e),r=require("ml-regression-polynomial"),i=s(r);function s(e){return e&&e.__esModule?e:{default:e}}class n extends t.default{constructor(e,t,r){if(super(),!0===e)this.A=t.A,this.M=t.M;else{if(e.length!==t.length)throw new RangeError("input and output array have a different length");var s=new i.default(e,t,[r]);this.A=s.coefficients[0],this.M=r}}_predict(e){return this.A*Math.pow(e,this.M)}toJSON(){return{name:"potentialRegression",A:this.A,M:this.M}}toString(t){return"f(x) = "+(0,e.maybeToPrecision)(this.A,t)+" * x^"+this.M}toLaTeX(t){return this.M>=0?"f(x) = "+(0,e.maybeToPrecision)(this.A,t)+"x^{"+this.M+"}":"f(x) = \\frac{"+(0,e.maybeToPrecision)(this.A,t)+"}{x^{"+-this.M+"}}"}static load(e){if("potentialRegression"!==e.name)throw new TypeError("not a potential regression model");return new n(!0,e)}}exports.default=n;
},{"ml-regression-base":"EtRJ","ml-regression-polynomial":"8u8a"}],"4JE2":[function(require,module,exports) {
"use strict";function r(r,t){for(var e=0,n=0;n<r.length;n++)e+=(r[n]-t[n])*(r[n]-t[n]);return e}function t(t,e){return Math.sqrt(r(t,e))}module.exports=t,t.squared=r;
},{}],"L00o":[function(require,module,exports) {
"use strict";const s=require("ml-distance-euclidean").squared,i={sigma:1};class t{constructor(s){s=Object.assign({},i,s),this.sigma=s.sigma,this.divisor=2*s.sigma*s.sigma}compute(i,t){const e=s(i,t);return Math.exp(-e/this.divisor)}}module.exports=t;
},{"ml-distance-euclidean":"4JE2"}],"O0vX":[function(require,module,exports) {
"use strict";const t={degree:1,constant:1,scale:1};class e{constructor(e){e=Object.assign({},t,e),this.degree=e.degree,this.constant=e.constant,this.scale=e.scale}compute(t,e){for(var s=0,c=0;c<t.length;c++)s+=t[c]*e[c];return Math.pow(this.scale*s+this.constant,this.degree)}}module.exports=e;
},{}],"Nx3t":[function(require,module,exports) {
"use strict";const e={sigma:1,degree:1};class t{constructor(t){t=Object.assign({},e,t),this.sigma=t.sigma,this.degree=t.degree}compute(e,t){for(var s=0,a=Math.min(e.length,t.length),h=1;h<=a;++h)s+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(e[h-1],h)-Math.pow(t[h-1],h),2)),this.degree);return s}}module.exports=t;
},{}],"+Fij":[function(require,module,exports) {
"use strict";const s=require("ml-distance-euclidean").squared,i={sigma:1};class t{constructor(s){s=Object.assign({},i,s),this.sigma=s.sigma}compute(i,t){return 1/(1+s(i,t)/(this.sigma*this.sigma))}}module.exports=t;
},{"ml-distance-euclidean":"4JE2"}],"eiSr":[function(require,module,exports) {
"use strict";const s=require("ml-distance-euclidean"),i={sigma:1};class t{constructor(s){s=Object.assign({},i,s),this.sigma=s.sigma,this.divisor=2*s.sigma*s.sigma}compute(i,t){const e=s(i,t);return Math.exp(-e/this.divisor)}}module.exports=t;
},{"ml-distance-euclidean":"4JE2"}],"LkM0":[function(require,module,exports) {
"use strict";class t{compute(t,e){for(var r=Math.min(t.length,e.length),n=0,s=0;s<r;++s)n+=Math.min(t[s],e[s]);return n}}module.exports=t;
},{}],"Gdd6":[function(require,module,exports) {
"use strict";const s=require("ml-distance-euclidean"),t={sigma:1};class e{constructor(s){s=Object.assign({},t,s),this.sigma=s.sigma}compute(t,e){const i=s(t,e);return Math.exp(-i/this.sigma)}}module.exports=e;
},{"ml-distance-euclidean":"4JE2"}],"eXYF":[function(require,module,exports) {
"use strict";const t=require("ml-distance-euclidean").squared,s={constant:1};class n{constructor(t){t=Object.assign({},s,t),this.constant=t.constant}compute(s,n){return Math.sqrt(t(s,n)+this.constant*this.constant)}}module.exports=n;
},{"ml-distance-euclidean":"4JE2"}],"AU/l":[function(require,module,exports) {
"use strict";const t=require("ml-distance-euclidean").squared,s={constant:1};class n{constructor(t){t=Object.assign({},s,t),this.constant=t.constant}compute(s,n){const c=t(s,n);return 1-c/(c+this.constant)}}module.exports=n;
},{"ml-distance-euclidean":"4JE2"}],"H6nJ":[function(require,module,exports) {
"use strict";const t={alpha:.01,constant:-Math.E};class a{constructor(a){a=Object.assign({},t,a),this.alpha=a.alpha,this.constant=a.constant}compute(t,a){for(var s=0,n=0;n<t.length;n++)s+=t[n]*a[n];return Math.tanh(this.alpha*s+this.constant)}}module.exports=a;
},{}],"6PCh":[function(require,module,exports) {
"use strict";const e=require("ml-matrix").Matrix,r=require("ml-kernel-gaussian"),n=require("ml-kernel-polynomial"),i=require("./kernels/anova-kernel"),t=require("./kernels/cauchy-kernel"),l=require("./kernels/exponential-kernel"),o=require("./kernels/histogram-intersection-kernel"),a=require("./kernels/laplacian-kernel"),s=require("./kernels/multiquadratic-kernel"),u=require("./kernels/rational-quadratic-kernel"),c=require("ml-kernel-sigmoid"),k={gaussian:r,rbf:r,polynomial:n,poly:n,anova:i,cauchy:t,exponential:l,histogram:o,min:o,laplacian:a,multiquadratic:s,rational:u,sigmoid:c,mlp:c};class m{constructor(e,r){if(this.kernelType=e,"linear"!==e)if("string"==typeof e){e=e.toLowerCase();var n=k[e];if(!n)throw new Error("unsupported kernel type: "+e);this.kernelFunction=new n(r)}else{if("object"!=typeof e||"function"!=typeof e.compute)throw new TypeError("first argument must be a valid kernel type or instance");this.kernelFunction=e}}compute(r,n){if(void 0===n&&(n=r),"linear"===this.kernelType)return new e(r).mmul(new e(n).transposeView());const i=new e(r.length,n.length);var t,l;if(r===n)for(t=0;t<r.length;t++)for(l=t;l<r.length;l++)i[t][l]=i[l][t]=this.kernelFunction.compute(r[t],r[l]);else for(t=0;t<r.length;t++)for(l=0;l<n.length;l++)i[t][l]=this.kernelFunction.compute(r[t],n[l]);return i}}module.exports=m;
},{"ml-matrix":"fuYa","ml-kernel-gaussian":"L00o","ml-kernel-polynomial":"O0vX","./kernels/anova-kernel":"Nx3t","./kernels/cauchy-kernel":"+Fij","./kernels/exponential-kernel":"eiSr","./kernels/histogram-intersection-kernel":"LkM0","./kernels/laplacian-kernel":"Gdd6","./kernels/multiquadratic-kernel":"eXYF","./kernels/rational-quadratic-kernel":"AU/l","ml-kernel-sigmoid":"H6nJ"}],"y638":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-matrix"),t=require("ml-kernel"),n=i(t),s=require("ml-regression-base"),r=i(s);function i(e){return e&&e.__esModule?e:{default:e}}const l={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class p extends r.default{constructor(t,s,r){if(super(),!0===t)this.alpha=s.alpha,this.inputs=s.inputs,this.kernelType=s.kernelType,this.kernelOptions=s.kernelOptions,this.kernel=new n.default(s.kernelType,s.kernelOptions);else{r=Object.assign({},l,r);const i=new n.default(r.kernelType,r.kernelOptions),p=i.compute(t),a=t.length;p.add(e.Matrix.eye(a,a).mul(r.lambda)),this.alpha=(0,e.solve)(p,s),this.inputs=t,this.kernelType=r.kernelType,this.kernelOptions=r.kernelOptions,this.kernel=i}}_predict(e){return this.kernel.compute([e],this.inputs).mmul(this.alpha)[0]}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(e){if("kernelRidgeRegression"!==e.name)throw new TypeError("not a KRR model");return new p(!0,e)}}exports.default=p;
},{"ml-matrix":"fuYa","ml-kernel":"6PCh","ml-regression-base":"EtRJ"}],"lpji":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("ml-matrix"),t=require("ml-regression-base"),e=o(t);function o(r){return r&&r.__esModule?r:{default:r}}const i={order:2};class s extends e.default{constructor(t,e,o){super(),!0===t?(this.coefficients=r.Matrix.columnVector(e.coefficients),this.order=e.order,e.r&&(this.r=e.r,this.r2=e.r2),e.chi2&&(this.chi2=e.chi2)):(o=Object.assign({},i,o),this.order=o.order,this.coefficients=[],this.X=t,this.y=e,this.train(this.X,this.y,o))}train(t,e){if(r.Matrix.isMatrix(t)||(t=new r.Matrix(t)),r.Matrix.isMatrix(e)||(e=r.Matrix.columnVector(e)),e.rows!==t.rows&&(e=e.transpose()),2!==t.columns)throw new RangeError("You give X with "+t.columns+" columns and it must be 2");if(t.rows!==e.rows)throw new RangeError("X and y must have the same rows");var o=t.rows,i=(this.order+2)*(this.order+1)/2;this.coefficients=new Array(i);var s=t.getColumnVector(0),c=t.getColumnVector(1),h=1/s.clone().apply(a).max(),u=1/c.clone().apply(a).max(),l=1/e.clone().apply(a).max();s.mulColumn(0,h),c.mulColumn(0,u),e.mulColumn(0,l);for(var f=new r.Matrix(o,i),m=0,p=0;p<=this.order;++p)for(var d=this.order-p,w=0;w<=d;++w){var M=n(s,p).mulColumnVector(n(c,w));f.setColumn(m,M),m++}var x=new r.SVD(f.transpose(),{computeLeftSingularVectors:!0,computeRightSingularVectors:!0,autoTranspose:!1}),v=r.Matrix.rowVector(x.diagonal);v=v.apply(function(r,t){this[r][t]>=1e-15?this[r][t]=1/this[r][t]:this[r][t]=0});var g=r.Matrix.zeros(o,i);for(p=0;p<i;++p)g[p][p]=v[0][p];v=g;var y=x.rightSingularVectors,V=x.leftSingularVectors;for(this.coefficients=V.mmul(v.transpose()).mmul(y.transpose()).mmul(e),m=0,p=0;p<=i;++p)for(d=this.order-p,w=0;w<=d;++w)this.coefficients[m][0]=this.coefficients[m][0]*Math.pow(h,p)*Math.pow(u,w)/l,m++}_predict(r){for(var t=r[0],e=r[1],o=0,i=0,s=0;s<=this.order;s++)for(var n=0;n<=this.order-s;n++)o+=Math.pow(t,s)*Math.pow(e,n)*this.coefficients[i][0],i++;return o}toJSON(){return{name:"polyfit2D",order:this.order,coefficients:this.coefficients}}static load(r){if("polyfit2D"!==r.name)throw new TypeError("not a polyfit2D model");return new s(!0,r)}}function n(r,t){for(var e=r.clone(),o=0;o<r.rows;++o)e[o][0]=Math.pow(e[o][0],t);return e}function a(r,t){this[r][t]=Math.abs(this[r][t])}exports.default=s;
},{"ml-matrix":"fuYa","ml-regression-base":"EtRJ"}],"AflA":[function(require,module,exports) {
"use strict";function r(r,t){return r-t}exports.sum=function(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t},exports.max=function(r){for(var t=r[0],n=r.length,e=1;e<n;e++)r[e]>t&&(t=r[e]);return t},exports.min=function(r){for(var t=r[0],n=r.length,e=1;e<n;e++)r[e]<t&&(t=r[e]);return t},exports.minMax=function(r){for(var t=r[0],n=r[0],e=r.length,o=1;o<e;o++)r[o]<t&&(t=r[o]),r[o]>n&&(n=r[o]);return{min:t,max:n}},exports.arithmeticMean=function(r){for(var t=0,n=r.length,e=0;e<n;e++)t+=r[e];return t/n},exports.mean=exports.arithmeticMean,exports.geometricMean=function(r){for(var t=1,n=r.length,e=0;e<n;e++)t*=r[e];return Math.pow(t,1/n)},exports.logMean=function(r){for(var t=0,n=r.length,e=0;e<n;e++)t+=Math.log(r[e]);return t/n},exports.grandMean=function(r,t){for(var n=0,e=0,o=r.length,a=0;a<o;a++)n+=t[a]*r[a],e+=t[a];return n/e},exports.truncatedMean=function(t,n,e){void 0===e&&(e=!1),e||(t=[].concat(t).sort(r));for(var o=t.length,a=Math.floor(o*n),i=0,s=a;s<o-a;s++)i+=t[s];return i/(o-2*a)},exports.harmonicMean=function(r){for(var t=0,n=r.length,e=0;e<n;e++){if(0===r[e])throw new RangeError("value at index "+e+"is zero");t+=1/r[e]}return n/t},exports.contraHarmonicMean=function(r){for(var t=0,n=0,e=r.length,o=0;o<e;o++)t+=r[o]*r[o],n+=r[o];if(n<0)throw new RangeError("sum of values is negative");return t/n},exports.median=function(t,n){void 0===n&&(n=!1),n||(t=[].concat(t).sort(r));var e=t.length,o=Math.floor(e/2);return e%2==0?.5*(t[o-1]+t[o]):t[o]},exports.variance=function(r,t){void 0===t&&(t=!0);for(var n=exports.mean(r),e=0,o=r.length,a=0;a<o;a++){var i=r[a]-n;e+=i*i}return t?e/(o-1):e/o},exports.standardDeviation=function(r,t){return Math.sqrt(exports.variance(r,t))},exports.standardError=function(r){return exports.standardDeviation(r)/Math.sqrt(r.length)},exports.robustMeanAndStdev=function(t){var n=0,e=t.length,o=0;for(o=0;o<e;o++)n+=t[o];n/=e;var a=new Array(e);for(o=0;o<e;o++)a[o]=Math.abs(t[o]-n);return a.sort(r),{mean:n,stdev:e%2==1?a[(e-1)/2]/.6745:.5*(a[e/2]+a[e/2-1])/.6745}},exports.quartiles=function(t,n){void 0===n&&(n=!1),n||(t=[].concat(t).sort(r));var e=t.length/4;return{q1:t[Math.ceil(e)-1],q2:exports.median(t,!0),q3:t[Math.ceil(3*e)-1]}},exports.pooledStandardDeviation=function(r,t){return Math.sqrt(exports.pooledVariance(r,t))},exports.pooledVariance=function(r,t){void 0===t&&(t=!0);for(var n=0,e=0,o=r.length,a=0;a<o;a++){var i=r[a],s=exports.variance(i);n+=(i.length-1)*s,e+=t?i.length-1:i.length}return n/e},exports.mode=function(r){var t,n=r.length,e=new Array(n);for(t=0;t<n;t++)e[t]=0;var o=new Array(n),a=0;for(t=0;t<n;t++){var i=o.indexOf(r[t]);i>=0?e[i]++:(o[a]=r[t],e[a]=1,a++)}var s=0,u=0;for(t=0;t<a;t++)e[t]>s&&(s=e[t],u=t);return o[u]},exports.covariance=function(r,t,n){void 0===n&&(n=!0);var e=exports.mean(r),o=exports.mean(t);if(r.length!==t.length)throw"Vectors do not have the same dimensions";for(var a=0,i=r.length,s=0;s<i;s++){a+=(r[s]-e)*(t[s]-o)}return n?a/(i-1):a/i},exports.skewness=function(r,t){void 0===t&&(t=!0);for(var n=exports.mean(r),e=0,o=0,a=r.length,i=0;i<a;i++){var s=r[i]-n;e+=s*s,o+=s*s*s}var u=e/a,v=o/a/Math.pow(u,1.5);return t?Math.sqrt(a*(a-1))/(a-2)*v:v},exports.kurtosis=function(r,t){void 0===t&&(t=!0);for(var n=exports.mean(r),e=r.length,o=0,a=0,i=0;i<e;i++){var s=r[i]-n;o+=s*s,a+=s*s*s*s}var u=o/e;if(t){var v=o/(e-1);return e*(e+1)/((e-1)*(e-2)*(e-3))*(a/(v*v))-3*((e-1)*(e-1)/((e-2)*(e-3)))}return a/e/(u*u)-3},exports.entropy=function(r,t){void 0===t&&(t=0);for(var n=0,e=r.length,o=0;o<e;o++)n+=r[o]*Math.log(r[o]+t);return-n},exports.weightedMean=function(r,t){for(var n=0,e=r.length,o=0;o<e;o++)n+=r[o]*t[o];return n},exports.weightedStandardDeviation=function(r,t){return Math.sqrt(exports.weightedVariance(r,t))},exports.weightedVariance=function(r,t){for(var n=exports.weightedMean(r,t),e=0,o=r.length,a=0,i=0,s=0;s<o;s++){var u=r[s]-n,v=t[s];e+=v*(u*u),i+=v,a+=v*v}return e*(i/(i*i-a))},exports.center=function(r,t){void 0===t&&(t=!1);var n=r;t||(n=[].concat(r));for(var e=exports.mean(n),o=n.length,a=0;a<o;a++)n[a]-=e},exports.standardize=function(r,t,n){void 0===t&&(t=exports.standardDeviation(r)),void 0===n&&(n=!1);for(var e=r.length,o=n?r:new Array(e),a=0;a<e;a++)o[a]=r[a]/t;return o},exports.cumulativeSum=function(r){var t=r.length,n=new Array(t);n[0]=r[0];for(var e=1;e<t;e++)n[e]=n[e-1]+r[e];return n};
},{}],"Teo7":[function(require,module,exports) {
"use strict";var r=require("./array");function e(r,e){return r-e}exports.max=function(r){for(var e=-1/0,n=0;n<r.length;n++)for(var t=0;t<r[n].length;t++)r[n][t]>e&&(e=r[n][t]);return e},exports.min=function(r){for(var e=1/0,n=0;n<r.length;n++)for(var t=0;t<r[n].length;t++)r[n][t]<e&&(e=r[n][t]);return e},exports.minMax=function(r){for(var e=1/0,n=-1/0,t=0;t<r.length;t++)for(var o=0;o<r[t].length;o++)r[t][o]<e&&(e=r[t][o]),r[t][o]>n&&(n=r[t][o]);return{min:e,max:n}},exports.entropy=function(r,e){void 0===e&&(e=0);for(var n=0,t=r.length,o=r[0].length,a=0;a<t;a++)for(var f=0;f<o;f++)n+=r[a][f]*Math.log(r[a][f]+e);return-n},exports.mean=function(r,e){void 0===e&&(e=0);var n,t,o,a,f=r.length,i=r[0].length;if(-1===e){for(n=[0],t=f*i,o=0;o<f;o++)for(a=0;a<i;a++)n[0]+=r[o][a];n[0]/=t}else if(0===e)for(n=new Array(i),t=f,a=0;a<i;a++){for(n[a]=0,o=0;o<f;o++)n[a]+=r[o][a];n[a]/=t}else{if(1!==e)throw new Error("Invalid dimension");for(n=new Array(f),t=i,a=0;a<f;a++){for(n[a]=0,o=0;o<i;o++)n[a]+=r[a][o];n[a]/=t}}return n},exports.sum=function(r,e){void 0===e&&(e=0);var n,t,o,a=r.length,f=r[0].length;if(-1===e)for(n=[0],t=0;t<a;t++)for(o=0;o<f;o++)n[0]+=r[t][o];else if(0===e)for(n=new Array(f),o=0;o<f;o++)for(n[o]=0,t=0;t<a;t++)n[o]+=r[t][o];else{if(1!==e)throw new Error("Invalid dimension");for(n=new Array(a),o=0;o<a;o++)for(n[o]=0,t=0;t<f;t++)n[o]+=r[o][t]}return n},exports.product=function(r,e){void 0===e&&(e=0);var n,t,o,a=r.length,f=r[0].length;if(-1===e)for(n=[1],t=0;t<a;t++)for(o=0;o<f;o++)n[0]*=r[t][o];else if(0===e)for(n=new Array(f),o=0;o<f;o++)for(n[o]=1,t=0;t<a;t++)n[o]*=r[t][o];else{if(1!==e)throw new Error("Invalid dimension");for(n=new Array(a),o=0;o<a;o++)for(n[o]=1,t=0;t<f;t++)n[o]*=r[o][t]}return n},exports.standardDeviation=function(r,e,n){for(var t=exports.variance(r,e,n),o=t.length,a=0;a<o;a++)t[a]=Math.sqrt(t[a]);return t},exports.variance=function(r,e,n){void 0===n&&(n=!0),e=e||exports.mean(r);var t=r.length;if(0===t)return[];for(var o=r[0].length,a=new Array(o),f=0;f<o;f++){for(var i=0,s=0,v=0,l=0;l<t;l++)i+=v=r[l][f]-e[f],s+=v*v;a[f]=n?(s-i*i/t)/(t-1):(s-i*i/t)/t}return a},exports.median=function(r){for(var n=r.length,t=r[0].length,o=new Array(t),a=0;a<t;a++){for(var f=new Array(n),i=0;i<n;i++)f[i]=r[i][a];f.sort(e);var s=f.length;o[a]=s%2==0?.5*(f[s/2]+f[s/2-1]):f[Math.floor(s/2)]}return o},exports.mode=function(r){var e,n,t=r.length,o=r[0].length,a=new Array(o);for(e=0;e<o;e++){for(var f=new Array(t),i=0;i<t;i++)f[i]=0;var s=new Array(t),v=0;for(n=0;n<t;n++){var l=s.indexOf(r[n][e]);l>=0?f[l]++:(s[v]=r[n][e],f[v]=1,v++)}var h=0,u=0;for(n=0;n<v;n++)f[n]>h&&(h=f[n],u=n);a[e]=s[u]}return a},exports.skewness=function(r,e){void 0===e&&(e=!0);for(var n=exports.mean(r),t=r.length,o=n.length,a=new Array(o),f=0;f<o;f++){for(var i=0,s=0,v=0;v<t;v++){var l=r[v][f]-n[f];i+=l*l,s+=l*l*l}var h=i/t,u=s/t/Math.pow(h,1.5);if(e){var g=Math.sqrt(t*(t-1)),d=t-2;a[f]=g/d*u}else a[f]=u}return a},exports.kurtosis=function(r,e){void 0===e&&(e=!0);for(var n=exports.mean(r),t=r.length,o=r[0].length,a=new Array(o),f=0;f<o;f++){for(var i=0,s=0,v=0;v<t;v++){var l=r[v][f]-n[f];i+=l*l,s+=l*l*l*l}var h=i/t,u=s/t;if(e){var g=i/(t-1),d=t*(t+1)/((t-1)*(t-2)*(t-3)),w=s/(g*g),x=(t-1)*(t-1)/((t-2)*(t-3));a[f]=d*w-3*x}else a[f]=u/(h*h)-3}return a},exports.standardError=function(r){for(var e=r.length,n=exports.standardDeviation(r),t=n.length,o=new Array(t),a=Math.sqrt(e),f=0;f<t;f++)o[f]=n[f]/a;return o},exports.covariance=function(r,e){return exports.scatter(r,void 0,e)},exports.scatter=function(r,e,n){void 0===n&&(n=0),void 0===e&&(0===n?e=r.length-1:1===n&&(e=r[0].length-1));var t=exports.mean(r,n),o=r.length;if(0===o)return[[]];var a,f,i,s,v,l=r[0].length;if(0===n){for(a=new Array(l),f=0;f<l;f++)a[f]=new Array(l);for(f=0;f<l;f++)for(i=f;i<l;i++){for(s=0,v=0;v<o;v++)s+=(r[v][i]-t[i])*(r[v][f]-t[f]);s/=e,a[f][i]=s,a[i][f]=s}}else{if(1!==n)throw new Error("Invalid dimension");for(a=new Array(o),f=0;f<o;f++)a[f]=new Array(o);for(f=0;f<o;f++)for(i=f;i<o;i++){for(s=0,v=0;v<l;v++)s+=(r[i][v]-t[i])*(r[f][v]-t[f]);s/=e,a[f][i]=s,a[i][f]=s}}return a},exports.correlation=function(r){var e,n,t=exports.mean(r),o=exports.standardDeviation(r,!0,t),a=exports.zScores(r,t,o),f=r.length,i=r[0].length,s=new Array(i);for(e=0;e<i;e++)s[e]=new Array(i);for(e=0;e<i;e++)for(n=e;n<i;n++){for(var v=0,l=0,h=a.length;l<h;l++)v+=a[l][n]*a[l][e];v/=f-1,s[e][n]=v,s[n][e]=v}return s},exports.zScores=function(r,e,n){return e=e||exports.mean(r),void 0===n&&(n=exports.standardDeviation(r,!0,e)),exports.standardize(exports.center(r,e,!1),n,!0)},exports.center=function(r,e,n){e=e||exports.mean(r);var t,o,a,f=r,i=r.length;if(!n)for(f=new Array(i),t=0;t<i;t++)f[t]=new Array(r[t].length);for(t=0;t<i;t++){var s=f[t];for(o=0,a=s.length;o<a;o++)s[o]=r[t][o]-e[o]}return f},exports.standardize=function(r,e,n){void 0===e&&(e=exports.standardDeviation(r));var t,o,a,f=r,i=r.length;if(!n)for(f=new Array(i),t=0;t<i;t++)f[t]=new Array(r[t].length);for(t=0;t<i;t++){var s=f[t],v=r[t];for(o=0,a=s.length;o<a;o++)0===e[o]||isNaN(e[o])||(s[o]=v[o]/e[o])}return f},exports.weightedVariance=function(r,e){var n=exports.mean(r),t=r.length;if(0===t)return[];for(var o=r[0].length,a=new Array(o),f=0;f<o;f++){for(var i=0,s=0,v=0,l=0;l<t;l++){var h=r[l][f]-n[f],u=e[l];i+=u*(h*h),v+=u,s+=u*u}a[f]=i*(v/(v*v-s))}return a},exports.weightedMean=function(e,n,t){void 0===t&&(t=0);var o=e.length;if(0===o)return[];var a,f,i,s,v,l,h=e[0].length;if(0===t){for(a=new Array(h),f=0;f<h;f++)a[f]=0;for(f=0;f<o;f++)for(l=e[f],v=n[f],s=0;s<h;s++)a[s]+=l[s]*v}else{if(1!==t)throw new Error("Invalid dimension");for(a=new Array(o),f=0;f<o;f++)a[f]=0;for(s=0;s<o;s++)for(l=e[s],v=n[s],f=0;f<h;f++)a[s]+=l[f]*v}var u=r.sum(n);if(0!==u)for(f=0,i=a.length;f<i;f++)a[f]/=u;return a},exports.weightedCovariance=function(r,e,n,t){t=t||0,n=n||exports.weightedMean(r,e,t);for(var o=0,a=0,f=0,i=e.length;f<i;f++)o+=e[f],a+=e[f]*e[f];var s=o/(o*o-a);return exports.weightedScatter(r,e,n,s,t)},exports.weightedScatter=function(r,e,n,t,o){o=o||0,n=n||exports.weightedMean(r,e,o),void 0===t&&(t=1);var a=r.length;if(0===a)return[[]];var f,i,s,v,l,h=r[0].length;if(0===o){for(f=new Array(h),i=0;i<h;i++)f[i]=new Array(h);for(i=0;i<h;i++)for(s=i;s<h;s++){for(l=0,v=0;v<a;v++)l+=e[v]*(r[v][s]-n[s])*(r[v][i]-n[i]);f[i][s]=l*t,f[s][i]=l*t}}else{if(1!==o)throw new Error("Invalid dimension");for(f=new Array(a),i=0;i<a;i++)f[i]=new Array(a);for(i=0;i<a;i++)for(s=i;s<a;s++){for(l=0,v=0;v<h;v++)l+=e[v]*(r[s][v]-n[s])*(r[i][v]-n[i]);f[i][s]=l*t,f[s][i]=l*t}}return f};
},{"./array":"AflA"}],"0O7R":[function(require,module,exports) {
"use strict";exports.array=require("./array"),exports.matrix=require("./matrix");
},{"./array":"AflA","./matrix":"Teo7"}],"m1S7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),t=i(e),r=require("ml-stat");function i(e){return e&&e.__esModule?e:{default:e}}const s=r.array.median;class n extends t.default{constructor(t,r){super(),!0===t?(this.slope=r.slope,this.intercept=r.intercept,this.coefficients=r.coefficients):((0,e.checkArrayLength)(t,r),o(this,t,r))}toJSON(){return{name:"TheilSenRegression",slope:this.slope,intercept:this.intercept}}_predict(e){return this.slope*e+this.intercept}computeX(e){return(e-this.intercept)/this.slope}toString(t){var r="f(x) = ";if(this.slope){var i=(0,e.maybeToPrecision)(this.slope,t);if(r+=(Math.abs(i-1)<1e-5?"":i+" * ")+"x",this.intercept){var s=Math.abs(this.intercept);r+=" "+(s===this.intercept?"+":"-")+" "+(0,e.maybeToPrecision)(s,t)}}else r+=(0,e.maybeToPrecision)(this.intercept,t);return r}toLaTeX(e){return this.toString(e)}static load(e){if("TheilSenRegression"!==e.name)throw new TypeError("not a Theil-Sen model");return new n(!0,e)}}function o(e,t,r){let i=t.length,n=new Array(i*i),o=0;for(let e=0;e<i;++e)for(let s=e+1;s<i;++s)t[e]!==t[s]&&(n[o++]=(r[s]-r[e])/(t[s]-t[e]));n.length=o;let c=s(n),l=new Array(i);for(let e=0;e<i;++e)l[e]=r[e]-c*t[e];e.slope=c,e.intercept=s(l),e.coefficients=[e.intercept,e.slope]}exports.default=n;
},{"ml-regression-base":"EtRJ","ml-stat":"0O7R"}],"BgsV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ml-regression-base"),t=i(e),r=require("ml-matrix");function i(e){return e&&e.__esModule?e:{default:e}}class o extends t.default{constructor(t,r,i){super(),!0===t?(this.degree=r.degree,this.powers=r.powers,this.coefficients=r.coefficients):((0,e.checkArrayLength)(t,r),s(this,t,r,i))}toJSON(){return{name:"robustPolynomialRegression",degree:this.degree,powers:this.powers,coefficients:this.coefficients}}_predict(e){return c(e,this.powers,this.coefficients)}toString(e){return this._toFormula(e,!1)}toLaTeX(e){return this._toFormula(e,!0)}_toFormula(t,r){let i="^",o="",s=" * ";r&&(i="^{",o="}",s="");let n="",f="";for(let r=0;r<this.coefficients.length;r++)f="",0!==this.coefficients[r]&&(f=0===this.powers[r]?(0,e.maybeToPrecision)(this.coefficients[r],t):1===this.powers[r]?(0,e.maybeToPrecision)(this.coefficients[r],t)+s+"x":(0,e.maybeToPrecision)(this.coefficients[r],t)+s+"x"+i+this.powers[r]+o,this.coefficients[r]>0&&r!==this.coefficients.length-1?f=" + "+f:r!==this.coefficients.length-1&&(f=" "+f)),n=f+n;return"+"===n.charAt(0)&&(n=n.slice(1)),"f(x) = "+n}static load(e){if("robustPolynomialRegression"!==e.name)throw new TypeError("not a RobustPolynomialRegression model");return new o(!0,e)}}function s(e,t,r,i){let o=new Array(i);for(let e=0;e<i;e++)o[e]=e;const s=n(t,r,i);for(var a,h=0;h<s.length;h++){for(var u=f(s[h],o),g=t.slice(),d=0;d<t.length;d++)g[d]=r[d]-c(t[d],o,u),g[d]={residual:g[d]*g[d],coefficients:u};var p=l(g);(!a||p.residual<a.residual)&&(a=p)}e.degree=i,e.powers=o,e.coefficients=a.coefficients}function n(e,t,r){for(var i=Math.floor(e.length/r),o=new Array(i),s=0;s<e.length;s++){for(var n=Math.floor(Math.random()*i),f=0;f<e.length;){if(!o[n]){o[n]=[{x:e[s],y:t[s]}];break}if(o[n].length<r){o[n].push({x:e[s],y:t[s]});break}f++,n=(n+1)%i}if(f===e.length)return o}return o}function f(e,t){for(var i=e.slice(),o=e.slice(),s=0;s<i.length;s++){o[s]=[e[s].y],i[s]=new Array(t.length);for(var n=0;n<t.length;n++)i[s][n]=Math.pow(e[s].x,t[n])}return(0,r.solve)(i,o).to1DArray()}function c(e,t,r){let i=0;for(let o=0;o<t.length;o++)i+=r[o]*Math.pow(e,t[o]);return i}function l(e){e.sort((e,t)=>e.residual-t.residual);var t=e.length,r=Math.floor(t/2);return t%2==0?e[r-1]:e[r]}exports.default=o;
},{"ml-regression-base":"EtRJ","ml-matrix":"fuYa"}],"YcpC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RobustPolynomialRegression=exports.TheilSenRegression=exports.PolinomialFitting2D=exports.KRR=exports.KernelRidgeRegression=exports.NonLinearRegression=exports.NLR=exports.MultivariateLinearRegression=exports.PowerRegression=exports.ExponentialRegression=exports.PolynomialRegression=exports.SLR=exports.SimpleLinearRegression=void 0;var e=require("ml-regression-simple-linear");Object.defineProperty(exports,"SimpleLinearRegression",{enumerable:!0,get:function(){return g(e).default}}),Object.defineProperty(exports,"SLR",{enumerable:!0,get:function(){return g(e).default}});var r=require("ml-regression-polynomial");Object.defineProperty(exports,"PolynomialRegression",{enumerable:!0,get:function(){return g(r).default}});var n=require("ml-regression-exponential");Object.defineProperty(exports,"ExponentialRegression",{enumerable:!0,get:function(){return g(n).default}});var t=require("ml-regression-power");Object.defineProperty(exports,"PowerRegression",{enumerable:!0,get:function(){return g(t).default}});var o=require("ml-regression-multivariate-linear");Object.defineProperty(exports,"MultivariateLinearRegression",{enumerable:!0,get:function(){return g(o).default}});var i=require("./regression/kernel-ridge-regression");Object.defineProperty(exports,"KernelRidgeRegression",{enumerable:!0,get:function(){return g(i).default}}),Object.defineProperty(exports,"KRR",{enumerable:!0,get:function(){return g(i).default}});var s=require("./regression/poly-fit-regression2d");Object.defineProperty(exports,"PolinomialFitting2D",{enumerable:!0,get:function(){return g(s).default}});var l=require("ml-regression-theil-sen");Object.defineProperty(exports,"TheilSenRegression",{enumerable:!0,get:function(){return g(l).default}});var u=require("ml-regression-robust-polynomial");Object.defineProperty(exports,"RobustPolynomialRegression",{enumerable:!0,get:function(){return g(u).default}});var a=require("./regression/potential-regression"),p=g(a);function g(e){return e&&e.__esModule?e:{default:e}}const f={PotentialRegression:p.default};exports.NLR=f,exports.NonLinearRegression=f;
},{"ml-regression-simple-linear":"IoAl","ml-regression-polynomial":"8u8a","ml-regression-exponential":"baDx","ml-regression-power":"/oK4","ml-regression-multivariate-linear":"tTjA","./regression/potential-regression":"aPUK","./regression/kernel-ridge-regression":"y638","./regression/poly-fit-regression2d":"lpji","ml-regression-theil-sen":"m1S7","ml-regression-robust-polynomial":"BgsV"}],"nnZs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("ml-regression"),r=require("../Image"),t=i(r);function i(e){return e&&e.__esModule?e:{default:e}}function s(r,i,s){for(var a=new e.KernelRidgeRegression(r,i,s),u=new Array(this.size),h=0;h<this.width;h++)for(var n=0;n<this.height;n++)u[n*this.width+h]=[h,n];for(var o=a.predict(u),d=t.default.createFrom(this),f=0;f<this.size;f++)d.data[f]=Math.min(this.maxValue,Math.max(0,o[f][0]));return d}
},{"ml-regression":"YcpC","../Image":"U4ir"}],"nF59":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var r=require("../Image"),t=e(r);function e(r){return r&&r.__esModule?r:{default:r}}function a(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r.kernel,a=void 0===e?[[1,1,1],[1,1,1],[1,1,1]]:e,n=r.iterations,l=void 0===n?1:n;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),a.columns%2==0||a.rows%2==0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");var v=!0,u=!0,d=!1,s=void 0;try{r:for(var g,c=a[Symbol.iterator]();!(u=(g=c.next()).done);u=!0){var m=g.value,w=!0,b=!1,y=void 0;try{for(var p,M=m[Symbol.iterator]();!(w=(p=M.next()).done);w=!0){if(1!==p.value){v=!1;break r}}}catch(r){b=!0,y=r}finally{try{!w&&M.return&&M.return()}finally{if(b)throw y}}}}catch(r){d=!0,s=r}finally{try{!u&&c.return&&c.return()}finally{if(d)throw s}}for(var X=this,Y=0;Y<l;Y++)if(1===this.bitDepth)if(v){var x=X.clone();X=f(X,x,a.length,a[0].length)}else{X=h(X,t.default.createFrom(X),a)}else if(v){X=o(X,t.default.createFrom(X),a.length,a[0].length)}else{X=i(X,t.default.createFrom(X),a)}return X}function i(r,t,e){for(var a=e.length,i=e[0].length,o=(a-1)/2,h=(i-1)/2,f=0;f<r.height;f++)for(var n=0;n<r.width;n++){for(var l=0,v=0;v<i;v++)for(var u=0;u<a;u++)if(1===e[u][v]){var d=u-o+n,s=v-h+f;if(!(d<0||s<0||d>=r.width||s>=r.height)){var g=r.getValueXY(d,s,0);g>l&&(l=g)}}t.setValueXY(n,f,0,l)}return t}function o(r,t,e,a){for(var i=(e-1)/2,o=(a-1)/2,h=[],f=0;f<r.width;f++)h.push(0);for(var n=0;n<r.height;n++){for(var l=0;l<r.width;l++){for(var v=0,u=Math.max(0,n-o);u<Math.min(r.height,n+o+1);u++){var d=r.getValueXY(l,u,0);d>v&&(v=d)}h[l]=v}for(var s=0;s<r.width;s++){for(var g=0,c=Math.max(0,s-i);c<Math.min(r.width,s+i+1);c++)h[c]>g&&(g=h[c]);t.setValueXY(s,n,0,g)}}return t}function h(r,t,e){for(var a=e.length,i=e[0].length,o=(a-1)/2,h=(i-1)/2,f=0;f<r.height;f++)for(var n=0;n<r.width;n++){var l=0;r:for(var v=0;v<i;v++)for(var u=0;u<a;u++)if(1===e[u][v]){var d=u-o+n,s=v-h+f;if(!(s<0||d<0||d>=r.width||s>=r.height))if(1===r.getBitXY(d,s)){l=1;break r}}1===l&&t.setBitXY(n,f)}return t}function f(r,t,e,a){for(var i=(e-1)/2,o=(a-1)/2,h=[],f=0;f<r.width;f++)h.push(1);for(var n=0;n<r.height;n++){for(var l=0;l<r.width;l++){h[l]=0;for(var v=Math.max(0,n-o);v<Math.min(r.height,n+o+1);v++)if(1===r.getBitXY(l,v)){h[l]=1;break}}for(var u=0;u<r.width;u++)if(1!==t.getBitXY(u,n))for(var d=Math.max(0,u-i);d<Math.min(r.width,u+i+1);d++)if(1===h[d]){t.setBitXY(u,n);break}}return t}
},{"../Image":"U4ir"}],"clFv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var r=require("../Image"),e=t(r);function t(r){return r&&r.__esModule?r:{default:r}}function a(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.kernel,a=void 0===t?[[1,1,1],[1,1,1],[1,1,1]]:t,n=r.iterations,l=void 0===n?1:n;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),a.columns%2==0||a.rows%2==0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");var u=!0,v=!0,d=!1,s=void 0;try{r:for(var c,g=a[Symbol.iterator]();!(v=(c=g.next()).done);v=!0){var m=c.value,w=!0,b=!1,y=void 0;try{for(var x,p=m[Symbol.iterator]();!(w=(x=p.next()).done);w=!0){if(1!==x.value){u=!1;break r}}}catch(r){b=!0,y=r}finally{try{!w&&p.return&&p.return()}finally{if(b)throw y}}}}catch(r){d=!0,s=r}finally{try{!v&&g.return&&g.return()}finally{if(d)throw s}}for(var M=this,X=0;X<l;X++)if(1===this.bitDepth)if(u){var Y=M.clone();M=f(M,Y,a.length,a[0].length)}else{M=h(M,e.default.createFrom(M),a)}else if(u){M=o(M,e.default.createFrom(M),a.length,a[0].length)}else{M=i(M,e.default.createFrom(M),a)}return M}function i(r,e,t){for(var a=t.length,i=t[0].length,o=(a-1)/2,h=(i-1)/2,f=0;f<r.height;f++)for(var n=0;n<r.width;n++){for(var l=r.maxValue,u=0;u<i;u++)for(var v=0;v<a;v++)if(1===t[v][u]){var d=v-o+n,s=u-h+f;if(!(d<0||s<0||d>=r.width||s>=r.height)){var c=r.getValueXY(d,s,0);c<l&&(l=c)}}e.setValueXY(n,f,0,l)}return e}function o(r,e,t,a){for(var i=(t-1)/2,o=(a-1)/2,h=[],f=0;f<r.width;f++)h.push(0);for(var n=0;n<r.height;n++){for(var l=0;l<r.width;l++){for(var u=r.maxValue,v=Math.max(0,n-o);v<Math.min(r.height,n+o+1);v++){var d=r.getValueXY(l,v,0);d<u&&(u=d)}h[l]=u}for(var s=0;s<r.width;s++){for(var c=r.maxValue,g=Math.max(0,s-i);g<Math.min(r.width,s+i+1);g++)h[g]<c&&(c=h[g]);e.setValueXY(s,n,0,c)}}return e}function h(r,e,t){for(var a=t.length,i=t[0].length,o=(a-1)/2,h=(i-1)/2,f=0;f<r.height;f++)for(var n=0;n<r.width;n++){var l=1;r:for(var u=0;u<i;u++)for(var v=0;v<a;v++)if(1===t[v][u]){var d=v-o+n,s=u-h+f;if(!(s<0||d<0||d>=r.width||s>=r.height))if(0===r.getBitXY(d,s)){l=0;break r}}1===l&&e.setBitXY(n,f)}return e}function f(r,e,t,a){for(var i=(t-1)/2,o=(a-1)/2,h=[],f=0;f<r.width;f++)h.push(0);for(var n=0;n<r.height;n++){for(var l=0;l<r.width;l++){h[l]=1;for(var u=Math.max(0,n-o);u<Math.min(r.height,n+o+1);u++)if(0===r.getBitXY(l,u)){h[l]=0;break}}for(var v=0;v<r.width;v++)if(0!==e.getBitXY(v,n))for(var d=Math.max(0,v-i);d<Math.min(r.width,v+i+1);d++)if(0===h[d]){e.clearBitXY(v,n);break}}return e}
},{"../Image":"U4ir"}],"C96Q":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.kernel,r=void 0===o?[[1,1,1],[1,1,1],[1,1,1]]:o,t=e.iterations,n=void 0===t?1:t;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),r.columns%2==0||r.rows%2==0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");for(var s=this,i=0;i<n;i++)s=(s=s.erode({kernel:r})).dilate({kernel:r});return s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"sFeg":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.kernel,r=void 0===o?[[1,1,1],[1,1,1],[1,1,1]]:o,t=e.iterations,s=void 0===t?1:t;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),r.columns%2==0||r.rows%2==0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");for(var n=this,l=0;l<s;l++)n=n.dilate({kernel:r}).erode({kernel:r});return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"oigp":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.kernel,o=void 0===t?[[1,1,1],[1,1,1],[1,1,1]]:t,r=e.iterations,s=void 0===r?1:r;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2==0||o.rows%2==0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");for(var n=this,a=0;a<s;a++){var i=n.open({kernel:o});n=i.subtractImage(n,{absolute:!0})}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"XNdm":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.kernel,o=void 0===t?[[1,1,1],[1,1,1],[1,1,1]]:t,r=e.iterations,s=void 0===r?1:r;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2==0||o.rows%2==0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");for(var a=this,n=0;n<s;n++){var l=a.close({kernel:o});a=l.subtractImage(a,{absolute:!0})}return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"J8b9":[function(require,module,exports) {
"use strict";function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.kernel,r=void 0===o?[[1,1,1],[1,1,1],[1,1,1]]:o,t=e.iterations,n=void 0===t?1:t;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),r.columns%2==0||r.rows%2==0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");for(var a=this,l=0;l<n;l++){var s=a.dilate({kernel:r}),i=a.erode({kernel:r});a=s.subtractImage(i,{absolute:!0})}return a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kZxW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,r){var e=[],a=!0,n=!1,i=void 0;try{for(var o,h=t[Symbol.iterator]();!(a=(o=h.next()).done)&&(e.push(o.value),!r||e.length!==r);a=!0);}catch(t){n=!0,i=t}finally{try{!a&&h.return&&h.return()}finally{if(n)throw i}}return e}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default=s;var r=require("ml-matrix"),e=require("../Image"),a=n(e);function n(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var r=0,e=0,a=0,n=0,i=t[0][0],o=0,h=1;h<t.length;h++)t[h][0]<i&&(i=t[h][0],o=h);for(var l=t[(o+1)%t.length][0],u=(o+1)%t.length,c=1;c<t.length;c++)t[c][0]<l&&c!==o&&(l=t[c][0],u=c);return t[u][1]<t[o][1]?(r=t[u],n=t[o],o!==(u+1)%4?(e=t[(u+1)%4],a=t[(u+2)%4]):(e=t[(u+2)%4],a=t[(u+3)%4])):(n=t[u],r=t[o],u!==(o+1)%4?(e=t[(o+1)%4],a=t[(o+2)%4]):(e=t[(o+2)%4],a=t[(o+3)%4])),[r,e,a,n]}function o(t,r){return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function h(t,r){return[t[1]*r[2]-t[2]*r[1],t[2]*r[0]-t[0]*r[2],t[0]*r[1]-t[1]*r[0]]}function l(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function u(t,e,a,n,i,u){var c=Math.max(o(t,e),o(n,a)),s=Math.max(o(t,n),o(e,a)),f=0,M=0,v=Math.ceil(i/2),m=Math.ceil(u/2),d=c/s,w=[t[0],t[1],1],x=[e[0],e[1],1],y=[n[0],n[1],1],g=[a[0],a[1],1],p=l(h(w,g),y)/l(h(x,g),y),q=l(h(w,g),x)/l(h(y,g),x),b=[p*x[0]-w[0],p*x[1]-w[1],p*x[2]-w[2]],A=[q*y[0]-w[0],q*y[1]-w[1],q*y[2]-w[2]],V=b[0],D=b[1],_=b[2],S=A[0],j=A[1],E=A[2],I=1/(_*E)*(V*S-(V*E+_*S)*v+_*E*v*v+(D*j-(D*E+_*j)*m+_*E*m*m));I=I>=0?Math.sqrt(I):Math.sqrt(-I);var O=new r.Matrix([[I,0,v],[0,I,m],[0,0,1]]),T=O.transpose(),C=(0,r.inverse)(T),F=(0,r.inverse)(O),P=r.Matrix.rowVector(b),R=r.Matrix.rowVector(A),X=Math.sqrt(l(P.mmul(C).mmul(F).to1DArray(),b)/l(R.mmul(C).mmul(F).to1DArray(),A));return 0===X||0===d?(f=Math.ceil(c),M=Math.ceil(s)):X<d?(f=Math.ceil(c),M=Math.ceil(f/X)):(M=Math.ceil(s),f=Math.ceil(X*M)),[f,M]}function c(t,r,e,a,n,i,o,h,l,u,c,s){var f=(e*t+a*r+n)/(l*t+u*r+1),M=(i*t+o*r+h)/(l*t+u*r+1);return c.getValueXY(Math.floor(f),Math.floor(M),s)}function s(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).calculateRatio,h=void 0===n||n;if(4!==e.length)throw new Error("The array pts must have four elements, which are the four corners. Currently, pts have "+e.length+" elements");var l=t(e,4),s=i([l[0],l[1],l[2],l[3]]),f=t(s,4),M=f[0],v=f[1],m=f[2],d=f[3],w=void 0,x=void 0;if(h){var y=u(M,v,m,d,this.width,this.height),g=t(y,2);w=g[0],x=g[1]}else w=Math.ceil(Math.max(o(M,v),o(d,m))),x=Math.ceil(Math.max(o(M,d),o(v,m)));for(var p=a.default.createFrom(this,{width:w,height:x}),q=t(M,2),b=q[0],A=q[1],V=t(v,2),D=V[0],_=V[1],S=t(m,2),j=S[0],E=S[1],I=t(d,2),O=I[0],T=I[1],C=w-1,F=x-1,P=w-1,R=x-1,X=new r.Matrix([[0,0,1,0,0,0,-0*b,-0*b],[0,C,1,0,0,0,-0*D,-C*D],[F,P,1,0,0,0,-F*j,-0*j],[R,0,1,0,0,0,-R*O,-0*O],[0,0,0,0,0,1,-0*A,-0*A],[0,0,0,0,C,1,-0*_,-C*_],[0,0,0,F,P,1,-F*E,-P*E],[0,0,0,R,0,1,-R*T,-0*T]]),Y=r.Matrix.columnVector([b,D,j,O,A,_,E,T]),k=new r.SingularValueDecomposition(X).solve(Y).to1DArray(),z=t(k,8),B=z[0],G=z[1],H=z[2],J=z[3],K=z[4],L=z[5],N=z[6],Q=z[7],U=new r.Matrix(x,w),W=0;W<this.channels;W++){for(var Z=0;Z<x;Z++)for(var $=0;$<w;$++)U.set(Z,$,c(Z,$,B,G,H,J,K,L,N,Q,this,W));p.setMatrix(U,{channel:W})}return p}
},{"ml-matrix":"fuYa","../Image":"U4ir"}],"UqRp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../Image"),i=h(t);function h(t){return t&&t.__esModule?t:{default:t}}function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.x,e=void 0===h?0:h,r=t.y,o=void 0===r?0:r,s=t.width,n=void 0===s?this.width-e:s,a=t.height,d=void 0===a?this.height-o:a;if(this.checkProcessable("max",{bitDepth:[8,16]}),e=Math.round(e),o=Math.round(o),n=Math.round(n),d=Math.round(d),e>this.width-1||o>this.height-1)throw new RangeError("crop: origin (x:"+e+", y:"+o+") out of range ("+(this.width-1)+"; "+(this.height-1)+")");if(n<=0||d<=0)throw new RangeError("crop: width and height (width:"+n+"; height:"+d+") must be positive numbers");if(e<0||o<0)throw new RangeError("crop: x and y (x:"+e+", y:"+o+") must be positive numbers");if(n>this.width-e||d>this.height-o)throw new RangeError("crop: (x: "+e+", y:"+o+", width:"+n+", height:"+d+") size is out of range");for(var u=i.default.createFrom(this,{width:n,height:d,position:[e,o]}),g=n*this.channels,w=o+d,c=0,f=e*this.channels,v=o;v<w;v++)for(var l=v*this.width*this.channels+f,p=l+g;l<p;l++)u.data[c++]=this.data[l];return u}
},{"../Image":"U4ir"}],"LjiE":[function(require,module,exports) {
"use strict";function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.checkProcessable("cropAlpha",{alpha:1});var h=t.threshold,n=void 0===h?this.maxValue:h,s=r(this,n,this.components);if(-1===s)throw new Error("Could not find new dimensions. Threshold may be too high.");var a=e(this,n,this.components,s),u=o(this,n,this.components,s),f=i(this,n,this.components,s,a,u);return this.crop({x:s,y:a,width:f-s+1,height:u-a+1})}function r(t,r,e){for(var o=0;o<t.width;o++)for(var i=0;i<t.height;i++)if(t.getValueXY(o,i,e)>=r)return o;return-1}function e(t,r,e,o){for(var i=0;i<t.height;i++)for(var h=o;h<t.width;h++)if(t.getValueXY(h,i,e)>=r)return i;return-1}function o(t,r,e,o){for(var i=t.height-1;i>=0;i--)for(var h=o;h<t.width;h++)if(t.getValueXY(h,i,e)>=r)return i;return-1}function i(t,r,e,o,i,h){for(var n=t.width-1;n>=o;n--)for(var s=i;s<=h;s++)if(t.getValueXY(n,s,e)>=r)return n;return-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"INHH":[function(require,module,exports) {
"use strict";function t(t){if("string"==typeof t){var e=t[t.length-1];t=parseFloat(t),"%"===e&&(t/=100)}return t}function e(t,e){if(!e)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof t){if("%"!==t[t.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(t)/100*e}if("number"==typeof t)return t<1?t*e:t;throw Error("getThreshold : the value is not valid")}function r(e,r,o){e=t(e);var i=Math.round(e*r),s=Math.round(e*o);return i<=0&&(i=1),s<=0&&(s=1),{width:i,height:s}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFactor=t,exports.getThreshold=e,exports.factorDimensions=r;
},{}],"izwY":[function(require,module,exports) {
"use strict";function e(e,n){if(n<0||n>=e.height)throw new RangeError("row must be included between 0 and "+(e.height-1)+". Current value: "+n)}function n(e,n){if(n<0||n>=e.width)throw new RangeError("column must be included between 0 and "+(e.width-1)+". Current value: "+n)}function r(e,n){if(n<0||n>=e.channels)throw new RangeError("channel must be included between 0 and "+(e.channels-1)+". Current value: "+n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkRow=e,exports.checkColumn=n,exports.checkChannel=r,exports.checkInterpolation=o;var t=exports.validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function o(e){if("string"!=typeof e)throw new TypeError("interpolation must be a string");if(e=e.toLowerCase(),!t[e])throw new RangeError("invalid interpolation algorithm: "+e);return t[e]}
},{}],"LmX4":[function(require,module,exports) {
"use strict";function t(t,e,r){var o=this.width/e,a=this.height/r;if(this.bitDepth>1)for(var h=0;h<e;h++)for(var i=Math.floor((h+.5)*o),s=0;s<r;s++)for(var f=Math.floor((s+.5)*a),l=0;l<this.channels;l++)t.setValueXY(h,s,l,this.getValueXY(i,f,l));else for(var v=0;v<e;v++)for(var u=Math.floor((v+.5)*o),n=0;n<r;n++){var M=Math.floor((n+.5)*a);this.getBitXY(u,M)&&t.setBitXY(v,n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"JixG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var t=require("../../Image"),e=n(t),i=require("../../../util/converter"),r=require("../../internal/checks"),h=require("./nearestNeighbor"),o=n(h);function n(t){return t&&t.__esModule?t:{default:t}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=t.factor,n=void 0===h?1:h,s=t.interpolation,a=void 0===s?r.validInterpolations.nearestneighbor:s,d=t.preserveAspectRatio,u=void 0===d||d,l=(0,r.checkInterpolation)(a),c=t.width,p=t.height;c||(c=p&&u?Math.round(p*(this.width/this.height)):this.width),p||(p=u?Math.round(c*(this.height/this.width)):this.height);var v=(0,i.factorDimensions)(n,c,p);if(c=v.width,p=v.height,c===this.width&&p===this.height){var g=this.clone();return g.position=[0,0],g}var f=Math.round((this.width-c)/2),w=Math.round((this.height-p)/2),M=e.default.createFrom(this,{width:c,height:p,position:[f,w]});switch(l){case r.validInterpolations.nearestneighbor:o.default.call(this,M,c,p);break;default:throw new Error("unsupported resize interpolation: "+l)}return M}
},{"../../Image":"U4ir","../../../util/converter":"INHH","../../internal/checks":"izwY","./nearestNeighbor":"LmX4"}],"NPzx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("../model/model"),a=require("../Image"),t=r(a);function r(e){return e&&e.__esModule?e:{default:e}}function l(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[e.RGB]});for(var a=t.default.createFrom(this,{colorModel:e.HSV}),r=0,l=this.data,s=0;s<l.length;s+=this.channels){var o=l[s],h=l[s+1],i=l[s+2],u=Math.min(o,h,i),c=Math.max(o,h,i),d=c-u,n=0,f=0===c?0:d/c,m=c;if(c!==u){switch(c){case o:n=(h-i)/d+(h<i?6:0);break;case h:n=(i-o)/d+2;break;case i:n=(o-h)/d+4;break;default:throw new Error("unreachable")}n/=6}a.data[r++]=n*this.maxValue,a.data[r++]=f*this.maxValue,a.data[r++]=m,this.alpha&&(a.data[r++]=l[s+3])}return a}
},{"../model/model":"DvVr","../Image":"U4ir"}],"ViFU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var e=require("../model/model"),a=require("../Image"),t=r(a);function r(e){return e&&e.__esModule?e:{default:e}}function l(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[e.RGB]});for(var a=t.default.createFrom(this,{colorModel:e.HSL}),r=Math.floor(this.maxValue/2),l=0,o=this.data,s=0;s<o.length;s+=this.channels){var h=o[s],i=o[s+1],u=o[s+2],c=Math.max(h,i,u),d=Math.min(h,i,u),n=0,f=0,m=(c+d)/2;if(c!==d){var b=c-d;switch(f=m>r?b/(2-c-d):b/(c+d),c){case h:n=(i-u)/b+(i<u?6:0);break;case i:n=(u-h)/b+2;break;case u:n=(h-i)/b+4;break;default:throw new Error("unreachable")}n/=6}a.data[l++]=n*this.maxValue,a.data[l++]=f*this.maxValue,a.data[l++]=m,this.alpha&&(a.data[l++]=o[s+3])}return a}
},{"../model/model":"DvVr","../Image":"U4ir"}],"QFq4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var a=require("../model/model"),e=require("../Image"),t=l(e);function l(a){return a&&a.__esModule?a:{default:a}}function r(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[a.RGB]});for(var e=t.default.createFrom(this,{components:4,colorModel:a.CMYK}),l=0,r=this.data,u=0;u<r.length;u+=this.channels){var h=r[u],o=r[u+1],s=r[u+2],i=Math.min(this.maxValue-h,this.maxValue-o,this.maxValue-s),d=(this.maxValue-h-i)/(1-i/this.maxValue),n=(this.maxValue-o-i)/(1-i/this.maxValue),m=(this.maxValue-s-i)/(1-i/this.maxValue);e.data[l++]=Math.round(d),e.data[l++]=Math.round(n),e.data[l++]=Math.round(m),e.data[l++]=Math.round(i),this.alpha&&(e.data[l++]=r[u+3])}return e}
},{"../model/model":"DvVr","../Image":"U4ir"}],"1OUP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var e=require("../Image"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function i(){return new t.default(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}
},{"../Image":"U4ir"}],"A/sa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.methods={luma709:function(e,n){return 6966*e[n]+23436*e[n+1]+2366*e[n+2]>>15},luma601:function(e,n){return 9798*e[n]+19235*e[n+1]+3735*e[n+2]>>15},maximum:function(e,n){return Math.max(e[n],e[n+1],e[n+2])},minimum:function(e,n){return Math.min(e[n],e[n+1],e[n+2])},average:function(e,n){return(e[n]+e[n+1]+e[n+2])/3>>0},minmax:function(e,n){return(Math.max(e[n],e[n+1],e[n+2])+Math.min(e[n],e[n+1],e[n+2]))/2},red:function(e,n){return e[n]},green:function(e,n){return e[n+1]},blue:function(e,n){return e[n+2]},cyan:function(n,a,r){var u=e.black(n,a,r);return(r.maxValue-n[0]-u)/(1-u/r.maxValue)>>0},magenta:function(n,a,r){var u=e.black(n,a,r);return(r.maxValue-n[1]-u)/(1-u/r.maxValue)>>0},yellow:function(n,a,r){var u=e.black(n,a,r);return(r.maxValue-n[2]-u)/(1-u/r.maxValue)>>0},black:function(e,n,a){return Math.min(a.maxValue-e[n],a.maxValue-e[n+1],a.maxValue-e[n+2])},hue:function(n,a,r){var u=e.min(n,a),t=e.max(n,a);if(t===u)return 0;var m=0,i=t-u;switch(t){case n[a]:m=(n[a+1]-n[a+2])/i+(n[a+1]<n[a+2]?6:0);break;case n[a+1]:m=(n[a+2]-n[a])/i+2;break;case n[a+2]:m=(n[a]-n[a+1])/i+4;break;default:throw new Error("unreachable")}return m/6*r.maxValue>>0},saturation:function(n,a,r){var u=e.min(n,a),t=e.max(n,a);return 0===t?0:(t-u)/t*r.maxValue},lightness:function(n,a){var r=e.min(n,a);return(e.max(n,a)+r)/2}};Object.defineProperty(e,"luminosity",{enumerable:!1,value:e.lightness}),Object.defineProperty(e,"luminance",{enumerable:!1,value:e.lightness}),Object.defineProperty(e,"min",{enumerable:!1,value:e.minimum}),Object.defineProperty(e,"max",{enumerable:!1,value:e.maximum}),Object.defineProperty(e,"brightness",{enumerable:!1,value:e.maximum});var n=exports.names={};Object.keys(e).forEach(function(e){n[e]=e});
},{}],"OP0V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("../model/model"),e=require("../internal/getOutputImage"),a=require("../internal/clamp"),r=require("./greyAlgorithms");function i(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=i.algorithm,s=void 0===h?"luma709":h,o=i.keepAlpha,l=void 0!==o&&o,p=i.mergeAlpha,n=void 0===p||p;this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(s="red"),l&=this.alpha,n&=this.alpha,l&&(n=!1);var d=(0,e.getOutputImage)(this,i,{components:1,alpha:l,colorModel:t.GREY}),m=r.methods[s.toLowerCase()];if(!m)throw new Error("unsupported grey algorithm: "+s);for(var u=0,c=0;c<this.data.length;c+=this.channels)n?d.data[u++]=(0,a.clamp)(m(this.data,c,this)*this.data[c+this.components]/this.maxValue,this):(d.data[u++]=(0,a.clamp)(m(this.data,c,this),this),d.alpha&&(d.data[u++]=this.data[c+this.components]));return d}
},{"../model/model":"DvVr","../internal/getOutputImage":"2F61","../internal/clamp":"i/sW","./greyAlgorithms":"A/sa"}],"PpZt":[function(require,module,exports) {
"use strict";function r(r){for(var e=0,t=0;t<r.length;t++)if(0!==r[t]){e=t;break}for(var a=r.length-1,o=r.length-1;o>=e;o--)if(0!==r[o]){a=o;break}for(var l=1/(a-e),h=new Array(r.length),n=0,f=0,g=e;g<r.length;g++)n+=g*r[g],f+=r[g],h[g]=n/f;var v=new Array(r.length);n=f=0;for(var M=a;M>0;M--)n+=M*r[M],f+=r[M],v[M-1]=n/f;for(var s=-1,u=Number.MAX_VALUE,b=0;b<r.length;b++){for(var i=0,d=void 0,A=0;A<=b;A++)(d=1/(1+l*Math.abs(A-h[b])))<1e-6||d>.999999||(i+=r[A]*(-d*Math.log(d)-(1-d)*Math.log(1-d)));for(var c=b+1;c<r.length;c++)(d=1/(1+l*Math.abs(c-v[b])))<1e-6||d>.999999||(i+=r[c]*(-d*Math.log(d)-(1-d)*Math.log(1-d)));i<u&&(u=i,s=b)}return s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"zu4O":[function(require,module,exports) {
"use strict";function r(r){for(var t=r.slice(),o=0;!e(t);){for(var n=0,f=0,l=t[0],u=0;u<r.length-1;u++)n=f,f=l,l=t[u+1],t[u]=(n+f+l)/3;if(t[r.length-1]=(f+l)/3,++o>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}for(var a=0,i=1;i<r.length-1;i++)t[i-1]<t[i]&&t[i+1]<t[i]&&(a+=i);return Math.floor(a/2)}function e(r){for(var e=!1,t=0,o=1;o<r.length-1;o++)if(r[o-1]<r[o]&&r[o+1]<r[o]&&++t>2)return!1;return 2===t&&(e=!0),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"lABP":[function(require,module,exports) {
"use strict";function r(r){for(var e=void 0,o=void 0,t=void 0,f=void 0,n=0,d=1;d<r.length;d++)if(r[d]>0){n=d+1;break}for(;;){e=0,t=0;for(var i=0;i<n;i++)t+=r[i],e+=r[i]*i;f=0,o=0;for(var a=n+1;a<r.length;a++)o+=r[a],f+=r[a]*a;if(t>0&&o>0&&(e/=t,f/=o,n===Math.round((e+f)/2)))break;if(++n>r.length-2)throw new Error("Threshold not found")}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"3+V0":[function(require,module,exports) {
"use strict";function o(o,e){var v=void 0,d=void 0,i=void 0,r=void 0,t=void 0,a=void 0,l=void 0,u=void 0,f=void 0,h=void 0,n=void 0;h=0;for(var s=0;s<o.length;s++)h+=s*o[s];l=h/=e;do{v=(a=l)+.5|0,d=0,r=0;for(var g=0;g<=v;g++)d+=g*o[g],r+=o[g];u=0===r?0:d/r,i=0,t=0;for(var M=v+1;M<o.length;M++)i+=M*o[M],t+=o[M];l=(n=(u-(f=0===t?0:i/t))/(Math.log(u)-Math.log(f)))<-Number.EPSILON?n-.5|0:n+.5|0}while(Math.abs(l-a)>.5);return v}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"DMi+":[function(require,module,exports) {
"use strict";function r(r,e){for(var t=new Array(r.length),a=0;a<r.length;a++)t[a]=r[a]/e;var o=new Array(r.length),n=new Array(r.length);o[0]=t[0],n[0]=1-o[0];for(var l=1;l<r.length;l++)o[l]=o[l-1]+t[l],n[l]=1-o[l];for(var h=0,f=0;f<r.length;f++)if(Math.abs(o[f])>=Number.EPSILON){h=f;break}for(var v=r.length-1,g=r.length-1;g>=h;g--)if(Math.abs(n[g])>=Number.EPSILON){v=g;break}for(var u=-1,b=void 0,i=Number.MIN_VALUE,s=void 0,d=void 0,M=h;M<=v;M++){s=0;for(var N=0;N<=M;N++)0!==r[N]&&(s-=t[N]/o[M]*Math.log(t[N]/o[M]));d=0;for(var y=M+1;y<r.length;y++)0!==r[y]&&(d-=t[y]/n[M]*Math.log(t[y]/n[M]));i<(b=s+d)&&(i=b,u=M)}return u}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"QwMd":[function(require,module,exports) {
"use strict";function e(e,t){for(var r=0,o=0;o<e.length;o++)r+=o*e[o];return Math.floor(r/t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"kL2E":[function(require,module,exports) {
"use strict";function o(o,i){for(var n=void 0,v=-2,d=void 0,f=void 0,u=void 0,a=void 0,l=void 0,h=void 0,s=void 0,c=void 0,g=void 0,M=void 0,p=0,x=0;x<o.length;x++)p+=x*o[x];for(n=p/=i;n!==v;){var N=r(o,n),_=r(o,o.length-1),b=t(o,n),j=t(o,o.length-1),q=e(o,n);if(u=N/_,a=(_-N)/_,(g=(c=(d=b/N)/(l=q/N-d*d)-(f=(j-b)/(_-N))/(h=(e(o,o.length-1)-q)/(_-N)-f*f))*c-(s=1/l-1/h)*(d*d/l-f*f/h+Math.log10(l*(a*a)/(h*(u*u)))))<0)return n;v=n,M=(c+Math.sqrt(g))/s,n=isNaN(M)?v:Math.floor(M)}return n}function r(o,r){for(var t=0,e=0;e<=r;e++)t+=o[e];return t}function t(o,r){for(var t=0,e=0;e<=r;e++)t+=e*o[e];return t}function e(o,r){for(var t=0,e=0;e<=r;e++)t+=e*e*o[e];return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;
},{}],"7Jfa":[function(require,module,exports) {
"use strict";function r(r){if(r.length<2)return 0;for(var f=0,u=-1,o=-1,l=new Array(r.length),i=0;i<r.length;i++)l[i]=r[i],r[i]>0&&(o=i);for(;!t(l);)if(l=e(l),++f>1e4)return u;return u=n(l,o)}function e(r){for(var e=new Array(r.length),n=1;n<r.length-1;n++)e[n]=(r[n-1]+r[n]+r[n+1])/3;return e[0]=(r[0]+r[1])/3,e[r.length-1]=(r[r.length-2]+r[r.length-1])/3,e}function n(r,e){for(var n=void 0,t=1;t<e;t++)if(r[t-1]>r[t]&&r[t+1]>=r[t]){n=t;break}return n}function t(r){for(var e=r.length,n=!1,t=0,f=1;f<e-1;f++)if(r[f-1]<r[f]&&r[f+1]<r[f]&&++t>2)return!1;return 2===t&&(n=!0),n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"6Bb0":[function(require,module,exports) {
"use strict";function r(r,e){for(var t,a,o,f,s,n,u=0,i=0,l=0,v=0,c=-1,d=r.length,h=new Array(d),p=0;p<d;p++)h[p]=r[p]/e;for(var M=0;M<d;M++)u+=M*h[M],i+=M*M*h[M],l+=M*M*M*h[M];o=(-i*i+u*l)/(a=1*i-u*u),s=.5*(-(f=(1*-l+i*u)/a)-Math.sqrt(f*f-4*o)),t=((n=.5*(-f+Math.sqrt(f*f-4*o)))-u)/(n-s);for(var b=0;b<d;b++)if((v+=h[b])>t){c=b;break}return c}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"Ct2o":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0,o=0,a=0,f=0,n=0,u=0;u<e.length;u++)n+=u*e[u];for(var l=0;l<e.length;l++){var s=r-(o+=e[l]);if(0!==o&&0!==s){var v=(n-(t+=l*e[l]))/s,i=o*s*(t/o-v)*(t/o-v);i>=a&&(f=l,a=i)}}return f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"1vlb":[function(require,module,exports) {
"use strict";function e(e){for(var t=-1,n=new Array(e.length),o=r(e,e.length-1),u=1,a=0;a<e.length;a++)n[a]=Math.abs(r(e,a)/o-.5),n[a]<u&&(u=n[a],t=a);return t}function r(e,r){for(var t=0,n=0;n<=r;n++)t+=e[n];return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"ZGgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var r=require("num-sort");function a(a,t){for(var e=void 0,o=void 0,h=new Array(a.length),n=new Array(a.length),l=new Array(a.length),v=0,s=0,g=0,M=0,f=0,u=0,b=0;b<a.length;b++)h[b]=a[b]/t;n[0]=h[0],l[0]=1-n[0];for(var i=1;i<a.length;i++)n[i]=n[i-1]+h[i],l[i]=1-n[i];e=0;for(var d=0;d<a.length;d++)if(Math.abs(n[d])>=Number.EPSILON){e=d;break}o=a.length-1;for(var c=a.length-1;c>=e;c--)if(Math.abs(l[c])>=Number.EPSILON){o=c;break}for(var y=e;y<=o;y++){for(var N=0,m=0,p=0,q=0;q<=y;q++)0!==a[q]&&(N-=h[q]/n[y]*Math.log(h[q]/n[y])),m+=Math.sqrt(h[q]/n[y]),p+=h[q]*h[q]/(n[y]*n[y]);for(var w=0,A=0,O=0,P=y+1;P<a.length;P++)0!==a[P]&&(w-=h[P]/l[y]*Math.log(h[P]/l[y])),A+=Math.sqrt(h[P]/l[y]),O+=h[P]*h[P]/(l[y]*l[y]);var k=N+w,x=2*(m*A>0?Math.log(m*A):0),E=-1*(p*O>0?Math.log(p*O):0);k>M&&(M=k,v=y),x>f&&(f=x,s=y),E>u&&(u=E,g=y)}var I=[v,s,g];I.sort(r.asc);var L=void 0;L=Math.abs(I[0]-I[1])<=5?Math.abs(I[1]-I[2])<=5?[1,2,1]:[0,1,3]:Math.abs(I[1]-I[2])<=5?[3,1,0]:[1,2,1];var S=n[I[2]]-n[I[0]];return Math.round(I[0]*(n[I[0]]+.25*S*L[0])+.25*I[1]*S*L[1]+I[2]*(l[I[2]]+.25*S*L[2]))}
},{"num-sort":"W3gY"}],"REAt":[function(require,module,exports) {
"use strict";function r(r,e){for(var a=new Array(r.length),t=0;t<r.length;t++)a[t]=r[t]/e;var o=new Array(r.length),n=new Array(r.length);o[0]=a[0],n[0]=1-o[0];for(var h=1;h<r.length;h++)o[h]=o[h-1]+a[h],n[h]=1-o[h];for(var l=0,v=0;v<r.length;v++)if(Math.abs(o[v])>=Number.EPSILON){l=v;break}for(var f=r.length-1,g=r.length-1;g>=l;g--)if(Math.abs(n[g])>=Number.EPSILON){f=g;break}for(var b=-1,i=Number.MAX_VALUE,u=void 0,s=void 0,d=void 0,M=void 0,A=l;A<=f;A++){d=0,u=.5/o[A];for(var N=1;N<=A;N++)d-=a[N]*Math.log(1-u*o[N-1]);d*=u,M=0,u=.5/n[A];for(var y=A+1;y<r.length;y++)M-=a[y]*Math.log(1-u*n[y]);M*=u,(s=Math.abs(d-M))<i&&(i=s,b=A)}return b}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"8sRi":[function(require,module,exports) {
"use strict";function r(r){for(var e=0,t=0,a=0,n=0,v=0;v<r.length;v++)if(r[v]>0){e=v;break}e>0&&e--;for(var f=r.length-1;f>0;f--)if(r[f]>0){n=f;break}n<r.length-1&&n++;for(var o=0;o<r.length;o++)r[o]>t&&(a=o,t=r[o]);var l=!1;if(a-e<n-a){l=!0;for(var i=0,h=r.length-1;i<h;){var g=r[i];r[i]=r[h],r[h]=g,i++,h--}e=r.length-1-n,a=r.length-1-a}if(e===a)return e;var u=void 0,d=void 0,s=void 0;u=r[a],d=e-a,s=(u/=s=Math.sqrt(u*u+d*d))*e+(d/=s)*r[e];for(var b=e,c=0,p=e+1;p<=a;p++){var k=u*p+d*r[p]-s;k>c&&(b=p,c=k)}if(b--,l){for(var x=0,M=r.length-1;x<M;){var _=r[x];r[x]=r[M],r[M]=_,x++,M--}return r.length-1-b}return b}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"QCs6":[function(require,module,exports) {
"use strict";function r(r,e){for(var t=new Array(r.length),n=0;n<r.length;n++)t[n]=r[n]/e;var a=new Array(r.length);a[0]=t[0];for(var l=1;l<r.length;l++)a[l]=a[l-1]+t[l];var o=new Array(r.length);o[0]=t[0]*t[0];for(var g=1;g<r.length;g++)o[g]=o[g-1]+t[g]*t[g];var h=new Array(r.length);h[r.length-1]=0;for(var v=r.length-2;v>=0;v--)h[v]=h[v+1]+t[v+1]*t[v+1];for(var f=-1,u=Number.MIN_VALUE,s=void 0,y=0;y<r.length;y++)(s=-1*(o[y]*h[y]>0?Math.log(o[y]*h[y]):0)+2*(a[y]*(1-a[y])>0?Math.log(a[y]*(1-a[y])):0))>u&&(u=s,f=y);return f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"O0Ww":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.names=exports.methods=void 0;var e=require("./huang"),r=z(e),t=require("./intermodes"),u=z(t),a=require("./isodata"),i=z(a),n=require("./li"),o=z(n),d=require("./maxEntropy"),l=z(d),s=require("./mean"),m=z(s),f=require("./minError"),q=z(f),p=require("./minimum"),y=z(p),h=require("./moments"),c=z(h),x=require("./otsu"),g=z(x),b=require("./percentile"),v=z(b),E=require("./renyiEntropy.js"),_=z(E),j=require("./shanbhag"),M=z(j),O=require("./triangle"),k=z(O),P=require("./yen"),w=z(P);function z(e){return e&&e.__esModule?e:{default:e}}var A=exports.methods={huang:r.default,intermodes:u.default,isodata:i.default,li:o.default,maxentropy:l.default,mean:m.default,minerror:q.default,minimum:y.default,moments:c.default,otsu:g.default,percentile:v.default,renyientropy:_.default,shanbhag:M.default,triangle:k.default,yen:w.default},B=exports.names={};Object.keys(A).forEach(function(e){B[e]=e});
},{"./huang":"PpZt","./intermodes":"zu4O","./isodata":"lABP","./li":"3+V0","./maxEntropy":"DMi+","./mean":"QwMd","./minError":"kL2E","./minimum":"7Jfa","./moments":"6Bb0","./otsu":"Ct2o","./percentile":"1vlb","./renyiEntropy.js":"ZGgw","./shanbhag":"REAt","./triangle":"8sRi","./yen":"QCs6"}],"QnyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../transform/mask/thresholdAlgorithms");function t(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).algorithm,r=void 0===t?e.names.otsu:t;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});var o=e.methods[r.toLowerCase()];if(o)return o(this.getHistogram(),this.size);throw new Error("unknown thresholding algorithm: "+r)}
},{"../transform/mask/thresholdAlgorithms":"O0Ww"}],"8ot7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;var t=require("../../Image"),e=s(t),a=require("../../../util/converter"),i=require("../../utility/getThreshold"),h=s(i);function s(t){return t&&t.__esModule?t:{default:t}}var r="threshold";function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.algorithm,s=void 0===i?r:i,l=t.threshold,d=void 0===l?.5:l,o=t.useAlpha,u=void 0===o||o,n=t.invert,v=void 0!==n&&n;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),d=s===r?(0,a.getThreshold)(d,this.maxValue):h.default.call(this,t);var c=new e.default(this.width,this.height,{kind:"BINARY",parent:this}),f=0;if(this.alpha&&u)for(var g=0;g<this.data.length;g+=this.channels){var m=this.data[g]+(this.maxValue-this.data[g])*(this.maxValue-this.data[g+1])/this.maxValue;(v&&m<=d||!v&&m>=d)&&c.setBit(f),f++}else for(var p=0;p<this.data.length;p+=this.channels)(v&&this.data[p]<=d||!v&&this.data[p]>=d)&&c.setBit(f),f++;return c}
},{"../../Image":"U4ir","../../../util/converter":"INHH","../../utility/getThreshold":"QnyP"}],"JEwu":[function(require,module,exports) {
"use strict";function e(e,t,r,a){for(var o=e.width,d=e.height,f=t.width,i=e.channels,s=0;s<o;s++)for(var h=0;h<d;h++)for(var n=0;n<i;n++){var u=(h*o+s)*i+n,v=((a+h)*f+r+s)*i+n;t.data[v]=e.data[u]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"sLF+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("new-array"),r=i(e),a=require("../Image"),t=i(a),h=require("../internal/copy"),o=i(h);function i(e){return e&&e.__esModule?e:{default:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.size,h=void 0===a?0:a,i=e.algorithm,s=void 0===i?"copy":i,n=e.color;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===s){if(n.length!==this.channels)throw new Error("pad: the color array must have the same length as the number of channels. Here: "+this.channels);for(var l=0;l<n.length;l++)0===n[l]&&(n[l]=.001)}else n=(0,r.default)(this.channels,null);Array.isArray(h)||(h=[h,h]);var d=this.width+2*h[0],f=this.height+2*h[1],u=this.channels,c=t.default.createFrom(this,{width:d,height:f});(0,o.default)(this,c,h[0],h[1]);for(var v=h[0];v<d-h[0];v++)for(var g=0;g<u;g++){for(var p=n[g]||c.data[(h[1]*d+v)*u+g],y=0;y<h[1];y++)c.data[(y*d+v)*u+g]=p;p=n[g]||c.data[((f-h[1]-1)*d+v)*u+g];for(var m=f-h[1];m<f;m++)c.data[(m*d+v)*u+g]=p}for(var w=0;w<f;w++)for(var b=0;b<u;b++){for(var _=n[b]||c.data[(w*d+h[0])*u+b],q=0;q<h[0];q++)c.data[(w*d+q)*u+b]=_;_=n[b]||c.data[(w*d+d-h[0]-1)*u+b];for(var x=d-h[0];x<d;x++)c.data[(w*d+x)*u+b]=_}return c}
},{"new-array":"Et2r","../Image":"U4ir","../internal/copy":"JEwu"}],"wryd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var t=require("../Image"),e=r(t);function r(t){return t&&t.__esModule?t:{default:t}}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(t))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===t)return this.clone();var r=e.default.createFrom(this,{bitDepth:t});switch(t){case 8:if(1===this.bitDepth)for(var a=0;a<this.size;a++)this.getBit(a)&&(r.data[a]=255);else for(var i=0;i<this.data.length;i++)r.data[i]=this.data[i]>>8;break;case 16:if(1===this.bitDepth)for(var s=0;s<this.size;s++)this.getBit(s)&&(r.data[s]=65535);else for(var h=0;h<this.data.length;h++)r.data[h]=this.data[h]<<8|this.data[h];break;default:throw new Error("colorDepth conversion unexpected case")}return r}
},{"../Image":"U4ir"}],"OXa/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h;var t=require("../Image"),e=r(t),a=require("../internal/checks");function r(t){return t&&t.__esModule?t:{default:t}}function h(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=r.interpolation,i=void 0===h?a.validInterpolations.nearestneighbor:h,s=r.width,l=void 0===s?this.width:s,u=r.height,d=void 0===u?this.height:u;if("number"!=typeof t)throw new TypeError("degrees must be a number");var c=(0,a.checkInterpolation)(i),f=t*Math.PI/180,M=Math.floor(Math.abs(l*Math.cos(f))+Math.abs(d*Math.sin(f))),v=Math.floor(Math.abs(d*Math.cos(f))+Math.abs(l*Math.sin(f))),p=e.default.createFrom(this,{width:M,height:v}),w=Math.cos(-f),g=Math.sin(-f),b=M/2,V=v/2;M%2==0?(b-=.5,v%2==0?V-=.5:V=Math.floor(V)):(b=Math.floor(b),v%2==0?V-=.5:V=Math.floor(V));var m=Math.floor(l/2-b),X=Math.floor(d/2-V);switch(c){case a.validInterpolations.nearestneighbor:return n(this,p,m,X,b,V,w,g);case a.validInterpolations.bilinear:return o(this,p,m,X,b,V,w,g);default:throw new Error("unsupported rotate interpolation: "+c)}}function n(t,e,a,r,h,n,o,i){for(var s=0;s<e.width;s+=1)for(var l=0;l<e.height;l+=1)for(var u=0;u<t.channels;u++){var d=Math.round((s-h)*o-(l-n)*i+h)+a,c=Math.round((l-n)*o+(s-h)*i+n)+r;d<0||d>=t.width||c<0||c>=t.height?1===t.alpha&&u===t.channels-1?e.setValueXY(s,l,u,0):e.setValueXY(s,l,u,t.maxValue):e.setValueXY(s,l,u,t.getValueXY(d,c,u))}return e}function o(t,e,a,r,h,n,o,i){for(var s=t.width*t.channels,l=0;l<e.height;l++)for(var u=0;u<e.width;u++)for(var d=(u-h)*o-(l-n)*i+h+a,c=(l-n)*o+(u-h)*i+n+r,f=0|d,M=0|c,v=d-f,p=c-M,w=0;w<t.channels;w++)if(d<0||d>=t.width||c<0||c>=t.height)1===t.alpha&&w===t.channels-1?e.setValueXY(u,l,w,0):e.setValueXY(u,l,w,t.maxValue);else{var g=(M*t.width+f)*t.channels+w,b=t.data[g],V=t.data[g+t.channels],m=t.data[g+s],X=b+v*(V-b)+p*(m-b)+v*p*(b-V-m+t.data[g+s+t.channels])|0;e.setValueXY(u,l,w,X)}return e}
},{"../Image":"U4ir","../internal/checks":"izwY"}],"NacT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotate=a,exports.rotateLeft=s,exports.rotateRight=u;var t=require("../Image"),e=i(t),r=require("./rotateFree"),h=i(r);function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if("number"!=typeof t)throw new TypeError("angle must be a number");switch(t<0&&(t=360*Math.ceil(-t/360)+t),t%360){case 0:return this.clone();case 90:return u.call(this);case 180:return o.call(this);case 270:return s.call(this);default:return h.default.call(this,t,e)}}function s(){for(var t=e.default.createFrom(this,{width:this.height,height:this.width}),r=t.height-1,h=0;h<this.height;h++)for(var i=0;i<this.width;i++)for(var a=0;a<this.channels;a++)t.setValueXY(h,r-i,a,this.getValueXY(i,h,a));return t}function u(){for(var t=e.default.createFrom(this,{width:this.height,height:this.width}),r=t.width-1,h=0;h<this.height;h++)for(var i=0;i<this.width;i++)for(var a=0;a<this.channels;a++)t.setValueXY(r-h,i,a,this.getValueXY(i,h,a));return t}function o(){for(var t=e.default.createFrom(this),r=t.width-1,h=t.height-1,i=0;i<this.height;i++)for(var a=0;a<this.width;a++)for(var s=0;s<this.channels;s++)t.setValueXY(r-a,h-i,s,this.getValueXY(a,i,s));return t}
},{"../Image":"U4ir","./rotateFree":"OXa/"}],"CZ5S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../internal/getOutputImage"),t=require("../internal/getImageParameters"),r=i(t);function i(e){return e&&e.__esModule?e:{default:e}}function a(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,r.default)(t);this.checkProcessable("insert",a);var u=i.x,n=void 0===u?0:u,o=i.y,l=void 0===o?0:o,s=(0,e.getOutputImageOrInPlace)(this,i,{copy:!0}),h=Math.min(s.height,l+t.height),d=Math.min(s.width,n+t.width);if(1===s.bitDepth)for(var f=l;f<h;f++)for(var g=n;g<d;g++){t.getBitXY(g-n,f-l)?s.setBitXY(g,f):s.clearBitXY(g,f)}else for(var v=l;v<h;v++)for(var c=n;c<d;c++)s.setPixelXY(c,v,t.getPixelXY(c-n,v-l));return s}
},{"../internal/getOutputImage":"2F61","../internal/getImageParameters":"8QIG"}],"/Aa7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("new-array"),h=i(t);function i(t){return t&&t.__esModule?t:{default:t}}function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.size,e=void 0===i?0:i,r=t.algorithm,s=void 0===r?"copy":r,a=t.color;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===s){if(a.length!==this.channels)throw new Error("setBorder: the color array must have the same length as the number of channels. Here: "+this.channels);for(var d=0;d<a.length;d++)0===a[d]&&(a[d]=.001)}else a=(0,h.default)(this.channels,null);Array.isArray(e)||(e=[e,e]);for(var o=e[0],n=e[1],l=this.channels,f=o;f<this.width-o;f++)for(var v=0;v<l;v++){for(var c=a[v]||this.data[(f+this.width*n)*l+v],u=0;u<n;u++)this.data[(u*this.width+f)*l+v]=c;c=a[v]||this.data[(f+this.width*(this.height-n-1))*l+v];for(var w=this.height-n;w<this.height;w++)this.data[(w*this.width+f)*l+v]=c}for(var g=0;g<this.height;g++)for(var y=0;y<l;y++){for(var p=a[y]||this.data[(g*this.width+o)*l+y],b=0;b<o;b++)this.data[(g*this.width+b)*l+y]=p;p=a[y]||this.data[(g*this.width+this.width-o-1)*l+y];for(var m=this.width-o;m<this.width;m++)this.data[(g*this.width+m)*l+y]=p}return this}
},{"new-array":"Et2r"}],"u1Jc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("../Image"),t=s(e),a=require("../../stack/Stack"),r=s(a),o=require("../model/model");function s(e){return e&&e.__esModule?e:{default:e}}function n(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preserveAlpha,a=void 0===e||e;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new r.default([this.clone()]);var s=new r.default,n=this.data;if(this.alpha&&a)for(var l=0;l<this.components;l++){for(var h=t.default.createFrom(this,{components:1,alpha:!0,colorModel:o.GREY}),i=0,c=0;c<n.length;c+=this.channels)h.data[i++]=n[c+l],h.data[i++]=n[c+this.components];s.push(h)}else for(var u=0;u<this.channels;u++){for(var d=t.default.createFrom(this,{components:1,alpha:!1,colorModel:o.GREY}),p=0,f=0;f<n.length;f+=this.channels)d.data[p++]=n[f+u];s.push(d)}return s}
},{"../Image":"U4ir","../../stack/Stack":"hMWD","../model/model":"DvVr"}],"IFbL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("../Image"),t=i(e),a=require("../../util/channel"),h=require("../model/model");function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.keepAlpha,l=void 0!==s&&s,o=i.mergeAlpha,r=void 0!==o&&o;l&=this.alpha,r&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),e=(0,a.validateChannel)(this,e);for(var n=t.default.createFrom(this,{components:1,alpha:l,colorModel:h.GREY}),d=0,u=0;u<this.data.length;u+=this.channels)r?n.data[d++]=this.data[u+e]*this.data[u+this.components]/this.maxValue:(n.data[d++]=this.data[u+e],l&&(n.data[d++]=this.data[u+this.components]));return n}
},{"../Image":"U4ir","../../util/channel":"3KRM","../model/model":"DvVr"}],"OyYE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("../Image"),t=i(e),a=require("../model/model");function i(e){return e&&e.__esModule?e:{default:e}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.mergeAlpha,h=void 0!==s&&s,n=i.keepAlpha,r=void 0!==n&&n;h&=this.alpha,r&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});for(var l=t.default.createFrom(this,{components:1,alpha:r,colorModel:a.GREY}),d=0,c=0;c<this.size;c++){var u=e(this.getPixel(c));h?l.data[d++]=u*this.data[c*this.channels+this.components]/this.maxValue:(l.data[d++]=u,r&&(l.data[d++]=this.data[c*this.channels+this.components]))}return l}function o(e){return(e[0]+e[1]+e[2])/3}
},{"../Image":"U4ir","../model/model":"DvVr"}],"q7Dx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./../../util/channel");function t(t,h){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),h.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),h.width!==this.width||h.height!==this.height)throw new Error("Images must have exactly the same width and height");for(var a=t=(0,e.validateChannel)(this,t),i=0;i<h.data.length;i++)this.data[a]=h.data[i],a+=this.channels;return this}
},{"./../../util/channel":"3KRM"}],"Urfh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("new-array"),e=h(t),i=require("../../util/channel");function h(t){return t&&t.__esModule?t:{default:t}}function r(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h.shift,a=void 0===r?[0,0]:r,s=h.average,l=h.channels,n=h.defaultAlpha,o=h.normalize,u=h.border,m=void 0===u?[0,0]:u;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(m)||(m=[m,m]),l=(0,i.validateArrayOfChannels)(this,{channels:l,defaultAlpha:n}),this.bitDepth!==t.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==t.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==t.colorModel)throw new Error("Both images must have the same colorModel");void 0===s&&(s=!0);for(var d=Math.max(m[0],-a[0]),f=Math.min(this.width-m[0],this.width-a[0]),c=Math.max(m[1],-a[1]),v=Math.min(this.height-m[1],this.height-a[1]),p=(0,e.default)(l.length,0),M=0;M<l.length;M++){var g=l[M],w=o?this.sum[g]:Math.max(this.sum[g],t.sum[g]),b=o?t.sum[g]:Math.max(this.sum[g],t.sum[g]);if(0!==w&&0!==b)for(var x=d;x<f;x++)for(var y=c;y<v;y++){var A=x*this.multiplierX+y*this.multiplierY+g,D=A+a[0]*this.multiplierX+a[1]*this.multiplierY;p[M]+=Math.min(this.data[A]/w,t.data[D]/b)}}return s?p.reduce(function(t,e){return t+e})/p.length:p}
},{"new-array":"Et2r","../../util/channel":"3KRM"}],"CkwG":[function(require,module,exports) {
"use strict";function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sampling,r=void 0===e?[10,10]:e,i=t.painted,a=void 0!==i&&i,h=t.mask;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(r)||(r=[r,r]);for(var n=r[0],o=r[1],s=n*o,l=new Array(s),d=new Array(s),g=this.width/n,v=this.height/o,p=Math.floor(g/2),u=0,c=0;c<n;c++){for(var f=Math.floor(v/2),y=0;y<o;y++){var x=Math.round(p),M=Math.round(f);h&&!h.getBitXY(x,M)||(l[u]=[x,M],d[u]=this.getPixelXY(x,M),u++),f+=v}p+=g}l.length=u,d.length=u;var P={xyS:l,zS:d};return a&&(P.painted=this.rgba8().paintPoints(l)),P}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"VMrM":[function(require,module,exports) {
"use strict";function t(r,a,h){for(var e=new Array(r),o=0;o<r;o++)e[o]=new Array(a);if(h)for(var i=0;i<r;i++)for(var n=0;n<a;n++)e[i][n]=h;return e.width=r,e.height=a,Object.setPrototypeOf(e,t.prototype),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t,t.prototype.localMin=function(t,r){for(var a=this[t][r],h=[t,r],e=Math.max(0,t-1);e<Math.min(this.length,t+2);e++)for(var o=Math.max(0,r-1);o<Math.min(this[0].length,r+2);o++)this[e][o]<a&&(a=this[e][o],h=[e,o]);return{position:h,value:a}},t.prototype.localMax=function(t,r){for(var a=this[t][r],h=[t,r],e=Math.max(0,t-1);e<Math.min(this.length,t+2);e++)for(var o=Math.max(0,r-1);o<Math.min(this[0].length,r+2);o++)this[e][o]>a&&(a=this[e][o],h=[e,o]);return{position:h,value:a}},t.prototype.localSearch=function(t,r,a){for(var h=[],e=Math.max(0,t-1);e<Math.min(this.length,t+2);e++)for(var o=Math.max(0,r-1);o<Math.min(this[0].length,r+2);o++)this[e][o]===a&&h.push([e,o]);return h};
},{}],"lvJz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("../../util/matrix"),t=o(e);function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).border;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==e.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==e.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==e.colorModel)throw new Error("Both images must have the same colorModel");for(var r=new t.default(e.width,e.height,-1/0),i=Math.floor(e.width/2),h=Math.floor(e.height/2),a=i,s=h,l=!1;!l;){for(var n=r.localSearch(i,h,-1/0),u=0;u<n.length;u++){var c=n[u],f=this.getSimilarity(e,{border:o,shift:[a-c[0],s-c[1]]});r[c[0]][c[1]]=f}var d=r.localMax(i,h);d.position[0]!==i||d.position[1]!==h?(i=d.position[0],h=d.position[1]):l=!0}return[i-a,h-s]}
},{"../../util/matrix":"VMrM"}],"hagV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../internal/checks");function t(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.checkProcessable("getRow",{bitDepth:[8,16]}),(0,e.checkRow)(this,t),(0,e.checkChannel)(this,h);for(var s=new Array(this.width),i=0,r=t*this.width*this.channels+h,n=r+this.width*this.channels,c=r;c<n;c+=this.channels)s[i++]=this.data[c];return s}
},{"../internal/checks":"izwY"}],"W9Cq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../internal/checks");function t(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.checkProcessable("getColumn",{bitDepth:[8,16]}),(0,e.checkColumn)(this,t),(0,e.checkChannel)(this,h);for(var s=new Array(this.height),i=0,n=this.width*this.channels,r=h+t*this.channels;r<this.data.length;r+=n)s[i++]=this.data[r];return s}
},{"../internal/checks":"izwY"}],"deNP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("ml-matrix"),t=i(e);function i(e){return e&&e.__esModule?e:{default:e}}function n(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===e){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");e=0}for(var i=new t.default(this.height,this.width),n=0;n<this.height;n++)for(var r=0;r<this.width;r++)i.set(n,r,this.getValueXY(r,n,e));return i}
},{"ml-matrix":"fuYa"}],"7R7R":[function(require,module,exports) {
"use strict";function e(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).channel;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===t){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");t=0}if(!e.length||!e[0].length||this.width!==e.columns||this.height!==e.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(var h=0;h<this.height;h++)for(var i=0;i<this.width;i++)this.setValueXY(i,h,t,e.get(h,i))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"uUSD":[function(require,module,exports) {
"use strict";function e(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});for(var e=new Array(this.size),t=0,s=0;s<this.data.length;s+=this.channels){for(var r=new Array(this.components),a=0;a<this.components;a++)r[a]=this.data[s+a];e[t++]=r}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"lTJ1":[function(require,module,exports) {
"use strict";function t(t){for(var h=this.getClosestCommonParent(t),r=this.getRelativePosition(h,{defaultFurther:!0}),s=e(this,r),o=t.getRelativePosition(h,{defaultFurther:!0}),a=e(t,o),l=i(s,a),n={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]},u=0;u<l.length;u++){var f=l[u],v=[f[0]-r[0],f[1]-r[1]],g=[f[0]-o[0],f[1]-o[1]],d=this.getBitXY(v[0],v[1]),P=t.getBitXY(g[0],g[1]);1===d&&1===P&&n.commonWhitePixels.push(f)}for(var w=0;w<s.length;w++){var p=void 0,x=void 0;0!==w&&(p=Math.floor(w/(this.width-1)),x=w%(this.width-1)),1===this.getBitXY(p,x)&&n.whitePixelsMask1.push(s[w])}for(var c=0;c<a.length;c++){var M=0,m=0;0!==c&&(M=Math.floor(c/(t.width-1)),m=c%(t.width-1)),1===t.getBitXY(M,m)&&n.whitePixelsMask2.push(a[c])}return n}function e(t,e){for(var i=[],h=0;h<t.height;h++)for(var r=0;r<t.width;r++){var s=[h,r];i.push([s[0]+e[0],s[1]+e[1]])}return i}function i(t,e){for(var i=0,h=0,r=[];i<t.length&&h<e.length;)t[i][0]===e[h][0]&&t[i][1]===e[h][1]?(r.push(t[i]),i++,h++):t[i][0]<e[h][0]||t[i][0]===e[h][0]&&t[i][1]<e[h][1]?i++:h++;return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"OejS":[function(require,module,exports) {
"use strict";function r(r){var t=n(this),u=n(r),l=void 0;if(l=t>=u?e(this,t):e(r,u),0===t||0===u)return l;for(var f=this,i=r;t!==u;)if(t>u){if(null===(f=f.parent))return l;t-=1}else{if(null===(i=i.parent))return l;u-=1}for(;f!==i&&null!==f&&null!==i;)if(f=f.parent,i=i.parent,null===f||null===i)return l;return f!==i?l:f}function n(r){for(var n=0,e=r;null!=e.parent;)e=e.parent,n++;return n}function e(r,n){for(var e=r;n>0;)e=e.parent,n-=1;return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"vjo7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=l;const e={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},t=[[-1,0,1],[-2,0,2],[-1,0,1]],a=[[-1,-2,-1],[0,0,0],[1,2,1]],u={bitDepth:32,mode:"periodic"};function l(l,r){l.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),r=Object.assign({},e,r);const o=l.width,g=l.height,n=l.maxValue,s={sigma:r.gaussianBlur,radius:3},h=l.gaussianFilter(s),Y=h.convolution(a,u),i=h.convolution(t,u),V=i.hypotenuse(Y),X=l.constructor,d=new X(o,g,{kind:"GREY",bitDepth:32}),c=new X(o,g,{kind:"GREY",bitDepth:32}),f=new X(o,g,{kind:"GREY"});for(var p=1;p<o-1;p++)for(var v=1;v<g-1;v++){var b=(Math.round(Math.atan2(i.getValueXY(p,v,0),Y.getValueXY(p,v,0))*(5/Math.PI))+5)%5;0===b&&(V.getValueXY(p,v,0)<=V.getValueXY(p,v-1,0)||V.getValueXY(p,v,0)<=V.getValueXY(p,v+1,0))||1===b&&(V.getValueXY(p,v,0)<=V.getValueXY(p-1,v+1,0)||V.getValueXY(p,v,0)<=V.getValueXY(p+1,v-1,0))||2===b&&(V.getValueXY(p,v,0)<=V.getValueXY(p-1,v,0)||V.getValueXY(p,v,0)<=V.getValueXY(p+1,v,0))||3===b&&(V.getValueXY(p,v,0)<=V.getValueXY(p-1,v-1,0)||V.getValueXY(p,v,0)<=V.getValueXY(p+1,v+1,0))||d.setValueXY(p,v,0,V.getValueXY(p,v,0))}for(p=0;p<o*g;++p){var w=d.data[p],k=0;w>r.highThreshold&&(k++,f.data[p]=n),w>r.lowThreshold&&k++,c.data[p]=k}var m=[];for(p=1;p<o-1;++p)for(v=1;v<g-1;++v)if(1===c.getValueXY(p,v,0))e:for(var D=p-1;D<p+2;++D)for(var M=v-1;M<v+2;++M)if(2===c.getValueXY(D,M,0)){m.push([p,v]),f.setValueXY(p,v,0,n);break e}for(;m.length>0;){var T=[];for(p=0;p<m.length;++p)for(v=-1;v<2;++v)for(D=-1;D<2;++D)if(0!==v||0!==D){var x=m[p][0]+v,y=m[p][1]+D;1===c.getValueXY(x,y,0)&&0===f.getValueXY(x,y,0)&&(T.push([x,y]),f.setValueXY(x,y,0,n))}m=T}return f}
},{}],"fFi8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("canny-edge-detector"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(0,t.default)(this,e)}
},{"canny-edge-detector":"vjo7"}],"8kv6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("../Image"),e=i(t);function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).position;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!i&&!(i=t.getRelativePosition(this)))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){for(var r=e.default.createFrom(this,{width:t.width,height:t.height,alpha:1,position:i,parent:this}),a=0;a<t.width;a++)for(var h=0;h<t.height;h++){for(var o=0;o<this.channels;o++){var s=this.getValueXY(a+i[0],h+i[1],o);r.setValueXY(a,h,o,s)}t.getBitXY(a,h)||r.setValueXY(a,h,this.components,0)}return r}for(var n=e.default.createFrom(this,{width:t.width,height:t.height,position:i,parent:this}),l=0;l<t.height;l++)for(var u=0;u<t.width;u++)t.getBitXY(u,l)&&this.getBitXY(u+i[0],l+i[1])&&n.setBitXY(u,l);return n}
},{"../Image":"U4ir"}],"Qcme":[function(require,module,exports) {
var define;
var t;!function(){function i(t,i,h){this.next=h,h&&(h.prev=this),this.prev=i,i&&(i.next=this),this.data=t}function h(){if(!(this instanceof h))return new h;this._head=null,this._tail=null,this.length=0}h.prototype={push:function(t){this._tail=new i(t,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var t=this._tail;return this._tail=t.prev,t.prev&&(t.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),t.data}},unshift:function(t){this._head=new i(t,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var t=this._head;return this._head=t.next,t.next&&(t.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),t.data}},item:function(t){t<0&&(t=this.length+t);for(var i=this._head;t-- >0&&i;)i=i.next;return i?i.data:void 0},slice:function(t,i){if(t||(t=0),i||(i=this.length),i<0&&(i=this.length+i),t<0&&(t=this.length+t),i===t)return[];if(i<t)throw new Error("invalid offset: "+t+","+i+" (length="+this.length+")");for(var h=i-t,n=new Array(h),e=0,s=this._head;t-- >0&&s;)s=s.next;for(;e<h&&s;)n[e++]=s.data,s=s.next;return n},drop:function(){h.call(this)},forEach:function(t,i){for(var h=this._head,n=0,e=this.length;n<e&&h;)t.call(i||this,h.data,n,this),h=h.next,n++},map:function(t,i){var n=new h;return this.forEach(function(h,e,s){n.push(t.call(i||s,h,e,s))}),n},filter:function(t,i){var n=new h;return this.forEach(function(h,e,s){t.call(i||s,h,e,s)&&n.push(h)}),n},reduce:function(t,i,h){var n=0,e=this._head,s=this.length;for(i||(n=1,i=e&&e.data,e=e&&e.next);n<s&&e;)i=t.call(h||this,i,e.data,this),n++,e=e.next;return i}},"undefined"!=typeof exports?module.exports=h:"function"==typeof t&&t.amd?t("FastList",function(){return h}):(function(){return this}()).FastList=h}();
},{}],"WIXw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("fast-list"),e=h(t),i=require("../Image"),s=h(i);function h(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.x,h=void 0===i?0:i,r=t.y,u=void 0===r?0:r,n=t.inPlace,o=void 0===n||n?this:s.default.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),1===this.bitDepth){if(this.getBitXY(h,u))return o;var a=new e.default;for(a.push(new y(h,u));a.length>0;){var f=a.shift();o.setBitXY(f.x,f.y);for(var l=f.x+1;l<this.width&&(!o.getBitXY(l,f.y)&&!this.getBitXY(l,f.y));l++)o.setBitXY(l,f.y),f.y+1<this.height&&!this.getBitXY(l,f.y+1)&&a.push(new y(l,f.y+1)),f.y-1>=0&&!this.getBitXY(l,f.y-1)&&a.push(new y(l,f.y-1));for(var g=f.x-1;g>=0&&(!o.getBitXY(g,f.y)&&!this.getBitXY(g,f.y));g++)o.setBitXY(g,f.y),f.y+1<this.height&&!this.getBitXY(g,f.y+1)&&a.push(new y(g,f.y+1)),f.y-1>=0&&!this.getBitXY(g,f.y-1)&&a.push(new y(g,f.y-1))}}return o}function y(t,e){this.x=t,this.y=e}
},{"fast-list":"Qcme","../Image":"U4ir"}],"1y2O":[function(require,module,exports) {
"use strict";module.exports=function(s){return"#"===s[0]&&(s=s.substr(1)),6===s.length?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16)}:3===s.length?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16)}:void 0};
},{}],"25Gq":[function(require,module,exports) {
"use strict";module.exports=function(a,e,r){var s=[],t=(r=r/100)*(e=e/100),c=a/60,b=t*(1-Math.abs(c%2-1)),n=r-t;switch(parseInt(c,10)){case 0:s=[t,b,0];break;case 1:s=[b,t,0];break;case 2:s=[0,t,b];break;case 3:s=[0,b,t];break;case 4:s=[b,0,t];break;case 5:s=[t,0,b]}return{r:Math.round(255*(s[0]+n)),g:Math.round(255*(s[1]+n)),b:Math.round(255*(s[2]+n))}};
},{}],"fYDw":[function(require,module,exports) {
"use strict";function t(t){var n=t.toString(16);return 1===n.length?"0"+n:n}module.exports=function(n,r,e){return[t(n),t(r),t(e)].join("")};
},{}],"h3pV":[function(require,module,exports) {
"use strict";var r=require("./hsv2rgb"),e=require("./rgb2hex");module.exports=function(u,t,i){var s=r(u,t,i);return e(s.r,s.g,s.b)};
},{"./hsv2rgb":"25Gq","./rgb2hex":"fYDw"}],"3mbY":[function(require,module,exports) {
"use strict";module.exports=function(t,r,a){var n,u=Math.max(t,r,a),h=u-Math.min(t,r,a);return n=0===h?0:t===u?(r-a)/h%6:r===u?(a-t)/h+2:(t-r)/h+4,(n=Math.round(60*n))<0&&(n+=360),{h:n,s:Math.round(100*(0===u?0:h/u)),v:Math.round(u/255*100)}};
},{}],"BLc5":[function(require,module,exports) {
"use strict";module.exports=function(r,t,e,n){return"rgba("+[r,t,e,n/100].join(",")+")"};
},{}],"1vrW":[function(require,module,exports) {
"use strict";module.exports=function(r,t,e,n){return n/=100,{r:parseInt(255*(1-n)+n*r,10),g:parseInt(255*(1-n)+n*t,10),b:parseInt(255*(1-n)+n*e,10)}};
},{}],"yqIR":[function(require,module,exports) {
"use strict";var r=require("./rgba2rgb"),e=require("./rgb2hex");module.exports=function(u,t,b,g){var i=r(u,t,b,g);return e(i.r,i.g,i.b)};
},{"./rgba2rgb":"1vrW","./rgb2hex":"fYDw"}],"+oC6":[function(require,module,exports) {
"use strict";module.exports=function(t,e,r){return{h:t,s:2*(e*=(r<50?r:100-r)/100)/(r+e)*100,v:r+e}};
},{}],"36Q1":[function(require,module,exports) {
"use strict";module.exports=function(r,t,e){var s=(200-t)*e/100;return{h:r,s:t*e/(s<100?s:200-s),l:s/2}};
},{}],"ySdD":[function(require,module,exports) {
"use strict";var r=require("./hsl2hsv"),e=require("./hsv2rgb");module.exports=function(s,u,t){var v=r(s,u,t);return e(v.h,v.s,v.v)};
},{"./hsl2hsv":"+oC6","./hsv2rgb":"25Gq"}],"1VCz":[function(require,module,exports) {
"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};
},{}],"+Rgp":[function(require,module,exports) {
"use strict";function r(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),a.forEach(function(e){t(r,e,n[e])})}return r}function t(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var e=require("./hsl2rgb"),n=require("./colors");function a(r){return i(r)||o(r)||c(r)||u(r)||s(r)||p(r)||f(r)}function i(r){var t=n[r.toLowerCase()];if(t)return{r:t[0],g:t[1],b:t[2],a:100}}function u(r){var t=r.match(/rgb\(([^)]+)\)/);if(t){var e=t[1].split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:100}}}function s(r){var t=r.match(/rgba\(([^)]+)\)/);if(t){var e=t[1].split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:100*e[3]}}}function c(r){if("#"===r[0]&&7===r.length)return{r:parseInt(r.slice(1,3),16),g:parseInt(r.slice(3,5),16),b:parseInt(r.slice(5,7),16),a:100}}function o(r){if("#"===r[0]&&4===r.length)return{r:parseInt(r[1]+r[1],16),g:parseInt(r[2]+r[2],16),b:parseInt(r[3]+r[3],16),a:100}}function p(t){var n=t.match(/hsl\(([^)]+)\)/);if(n){var a=n[1].split(/ *, */),i=parseInt(a[0],10),u=parseInt(a[1],10),s=parseInt(a[2],10);return r({},e(i,u,s),{a:100})}}function f(t){var n=t.match(/hsla\(([^)]+)\)/);if(n){var a=n[1].split(/ *, */),i=parseInt(a[0],10),u=parseInt(a[1],10),s=parseInt(a[2],10),c=parseInt(100*parseFloat(a[3]),10);return r({},e(i,u,s),{a:c})}}module.exports=a;
},{"./hsl2rgb":"ySdD","./colors":"1VCz"}],"3Qyu":[function(require,module,exports) {
module.exports={hex2rgb:require("./dist/hex2rgb"),hsv2hex:require("./dist/hsv2hex"),hsv2rgb:require("./dist/hsv2rgb"),rgb2hex:require("./dist/rgb2hex"),rgb2hsv:require("./dist/rgb2hsv"),rgba:require("./dist/rgba"),rgba2rgb:require("./dist/rgba2rgb"),rgba2hex:require("./dist/rgba2hex"),hsl2hsv:require("./dist/hsl2hsv"),hsv2hsl:require("./dist/hsv2hsl"),hsl2rgb:require("./dist/hsl2rgb"),cssColor:require("./dist/css-color")};
},{"./dist/hex2rgb":"1y2O","./dist/hsv2hex":"h3pV","./dist/hsv2rgb":"25Gq","./dist/rgb2hex":"fYDw","./dist/rgb2hsv":"3mbY","./dist/rgba":"BLc5","./dist/rgba2rgb":"1vrW","./dist/rgba2hex":"yqIR","./dist/hsl2hsv":"+oC6","./dist/hsv2hsl":"36Q1","./dist/hsl2rgb":"ySdD","./dist/css-color":"+Rgp"}],"SZ6y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.css2array=o,exports.getDistinctColors=a,exports.getRandomColor=e,exports.getColors=u;var r=require("color-functions");function o(o){var t=(0,r.cssColor)(o);return[t.r,t.g,t.b,Math.round(255*t.a/100)]}function t(r,o,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(o-r)*t:t<.5?o:t<2/3?r+(o-r)*(2/3-t)*6:r}function n(r,o,n){var a=void 0,e=void 0,u=void 0,i=void 0,s=void 0,d=void 0;return n/=100,0===(o/=100)?i=s=d=255*n:(i=t(a=2*n-(e=n<=.5?n*(o+1):n+o-n*o),e,(u=r/360)+1/3),s=t(a,e,u),d=t(a,e,u-1/3)),{r:i,g:s,b:d}}function a(r){for(var o=new Array(r),t=0,a=0;a<360;a+=360/r){var e=n(a,100,30+ ++t%4*15);o[t-1]=[Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b)]}return o}function e(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}function u(r){var t=r.color,n=r.colors,u=r.randomColors,i=r.numberColors,s=void 0===i?50:i;if(t&&!Array.isArray(t)&&(t=o(t)),t)return[t];if(n)return n=n.map(function(r){return Array.isArray(r)?r:o(r)});if(u){n=new Array(s);for(var d=0;d<s;d++)n[d]=e()}return a(s)}
},{"color-functions":"3Qyu"}],"XP2s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var r=require("../model/model"),a=require("../../util/color");function t(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=s.color,o=void 0===i?"blue":i,l=s.colors,n=s.font,h=void 0===n?"12px Helvetica":n,y=s.rotate,u=void 0===y?0:y;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:r.RGB}),!Array.isArray(t))throw Error("paintLabels: labels must be an array");if(!Array.isArray(e))throw Error("paintLabels: positions must be an array");if(o&&!Array.isArray(o)&&(o=(0,a.css2array)(o)),l=l?l.map(function(r){return Array.isArray(r)?r:(0,a.css2array)(r)}):[o],t.length!==e.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(h)||(h=[h]),Array.isArray(u)||(u=[u]);for(var c=this.getCanvas().getContext("2d"),d=0;d<t.length;d++){c.save();var f=l[d%l.length];c.fillStyle="rgba("+f[0]+","+f[1]+","+f[2]+","+f[3]/this.maxValue+")",c.font=h[d%h.length];var b=e[d];c.translate(b[0],b[1]),c.rotate(u[d%u.length]/180*Math.PI),c.fillText(t[d],0,0),c.restore()}return this.data=Uint8Array.from(c.getImageData(0,0,this.width,this.height).data),this}
},{"../model/model":"DvVr","../../util/color":"SZ6y"}],"PBUu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;var t=require("../model/model"),e=require("../../util/color");function i(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.alpha,a=void 0===r?255:r,l=o.labels,s=void 0===l?[]:l,n=o.labelsPosition,h=void 0===n?[]:n,v=o.labelColor,d=void 0===v?"blue":v,g=o.labelFont,f=void 0===g?"12px Helvetica":g;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:t.RGB});var p=(0,e.getColors)(Object.assign({},o,{numberColors:i.length}));Array.isArray(i)||(i=[i]);for(var u=0;u<i.length;u++)for(var c=i[u],b=p[u%p.length],m=0;m<c.width;m++)for(var y=0;y<c.height;y++)if(c.getBitXY(m,y))for(var M=0;M<Math.min(this.components,b.length);M++)if(255===a)this.setValueXY(m+c.position[0],y+c.position[1],M,b[M]);else{var x=this.getValueXY(m+c.position[0],y+c.position[1],M);x=Math.round((x*(255-a)+b[M]*a)/255),this.setValueXY(m+c.position[0],y+c.position[1],M,x)}if(Array.isArray(s)&&s.length>0){var A=this.getCanvas().getContext("2d");A.fillStyle=d,A.font=f;for(var C=0;C<Math.min(i.length,s.length);C++){var X=h[C]?h[C]:i[C].position;A.fillText(s[C],X[0],X[1])}this.data=Uint8Array.from(A.getImageData(0,0,this.width,this.height).data)}return this}
},{"../model/model":"DvVr","../../util/color":"SZ6y"}],"/yol":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),t=require("ml-matrix"),r=o(t),a=require("../image/Image"),i=o(a),s=require("../image/core/kindNames");function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],l=[[0,1,0],[1,1,1],[0,1,0]],f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=e.kind,a=void 0===r?"cross":r,i=e.shape,s=e.size,o=e.width,f=e.height,v=e.filled,g=void 0===v||v;if(s&&(o=s,f=s),i)switch(i.toLowerCase()){case"square":case"rectangle":this.matrix=u(o,f,{filled:g});break;case"circle":case"ellipse":this.matrix=c(o,f,{filled:g});break;case"triangle":this.matrix=d(o,f,{filled:g});break;default:throw new Error("Shape: unexpected shape: "+i)}else{if(!a)throw new Error("Shape: expected a kind or a shape option");switch(a.toLowerCase()){case"cross":this.matrix=h;break;case"smallcross":this.matrix=l;break;default:throw new Error("Shape: unexpected kind: "+a)}}this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}return e(t,[{key:"getPoints",value:function(){for(var e=this.matrix,t=[],r=0;r<e.length;r++)for(var a=0;a<e[0].length;a++)e[r][a]&&t.push([a-this.halfWidth,r-this.halfHeight]);return t}},{key:"getMask",value:function(){for(var e=new i.default(this.width,this.height,{kind:s.BINARY}),t=0;t<this.matrix.length;t++)for(var r=0;r<this.matrix[0].length;r++)this.matrix[t][r]&&e.setBitXY(r,t);return e}}]),t}();function u(e,t,a){var i=r.default.zeros(t,e);if(a.filled)for(var s=0;s<t;s++)for(var o=0;o<e;o++)i.set(s,o,1);else{for(var n=[0,t-1],h=0;h<n.length;h++)for(var l=n[h],f=0;f<e;f++)i.set(l,f,1);for(var u=0;u<t;u++)for(var c=[0,e-1],d=0;d<c.length;d++){var v=c[d];i.set(u,v,1)}}return i}function c(e,t,a){var i=r.default.zeros(t,e,a),s=1-t%2,o=1-e%2,n=Math.floor((e-1)/2),h=Math.floor((t-1)/2),l=n*n,f=h*h;if(a.filled)for(var u=0;u<=h;u++)for(var c=n-Math.floor(Math.sqrt(l-l*u*u/f));c<=n;c++)i.set(h-u,c,1),i.set(h+u+s,c,1),i.set(h-u,e-c-1,1),i.set(h+u+s,e-c-1,1);else{for(var d=0;d<=h;d++){var v=n-Math.floor(Math.sqrt(l-l*d*d/f));i.set(h-d,v,1),i.set(h+d+s,v,1),i.set(h-d,e-v-1,1),i.set(h+d+s,e-v-1,1)}for(var g=0;g<=n;g++){var m=h-Math.floor(Math.sqrt(f-f*g*g/l));i.set(m,n-g,1),i.set(m,n+g+o,1),i.set(t-m-1,n-g,1),i.set(t-m-1,n+g+o,1)}}return i}function d(e,t,a){if(!a.filled)throw new Error("Non filled triangle is not implemented");for(var i=r.default.zeros(t,e,a),s=0;s<t;s++)for(var o=Math.floor((1-s/t)*e/2),n=o;n<e-o;n++)i.set(s,n,1);return i}exports.default=f;
},{"ml-matrix":"fuYa","../image/Image":"U4ir","../image/core/kindNames":"69CM"}],"URu+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=h;var t=require("../../util/Shape"),e=r(t),i=require("../../util/color");function r(t){return t&&t.__esModule?t:{default:t}}function h(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=r.shape;this.checkProcessable("paintPoints",{bitDepth:[8,16]});for(var s=(0,i.getColors)(Object.assign({},r,{numberColors:t.length})),n=new e.default(h).getPoints(),a=Math.min(this.channels,s[0].length),l=0;l<t.length;l++)for(var o=s[l%s.length],u=t[l][0],c=t[l][1],d=0;d<n.length;d++){var f=n[d][0],g=n[d][1];if(u+f>=0&&c+g>=0&&u+f<this.width&&c+g<this.height)for(var v=(u+f+(c+g)*this.width)*this.channels,p=0;p<a;p++)this.data[v+p]=o[p]}return this}
},{"../../util/Shape":"/yol","../../util/color":"SZ6y"}],"0xf9":[function(require,module,exports) {
"use strict";function t(t){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=h.color,a=void 0===e?[this.maxValue,0,0]:e,i=h.closed,s=void 0!==i&&i;this.checkProcessable("paintPoints",{bitDepth:[8,16]});for(var r=Math.min(this.channels,a.length),o=0;o<t.length-1+s;o++)for(var n=t[o],l=t[(o+1)%t.length],d=l[0]-n[0],c=l[1]-n[1],u=Math.max(Math.abs(d),Math.abs(c)),v=d/u,f=c/u,M=n[0],b=n[1],g=0;g<=u;g++){var p=Math.round(M),x=Math.round(b);if(p>=0&&x>=0&&p<this.width&&x<this.height)for(var m=(p+x*this.width)*this.channels,P=0;P<r;P++)this.data[m+P]=a[P];M+=v,b+=f}return this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"HyqQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/color");function t(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object.assign({},r);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});for(var l=(0,e.getColors)(Object.assign({},r,{numberColors:t.length})),s=0;s<t.length;s++)o.color=l[s%l.length],this.paintPolyline(t[s],o);return this}
},{"../../util/color":"SZ6y"}],"bfCO":[function(require,module,exports) {
"use strict";function t(t){for(var e=[],h=0;h<t.length;h++)t[h][0]===t[(h+1)%t.length][0]&&t[h][1]===t[(h+1)%t.length][1]||t[h][0]===t[(h-1+t.length)%t.length][0]&&t[h][1]===t[(h-1+t.length)%t.length][1]||t[(h+1)%t.length][0]===t[(h-1+t.length)%t.length][0]&&t[(h-1+t.length)%t.length][1]===t[(h+1)%t.length][1]||e.push(t[h]);return e}function e(t,e){if(t[0]===e[0])return{a:0,b:t[0],vertical:!0};var h=(e[1]-t[1])/(e[0]-t[0]);return{a:h,b:t[1]-h*t[0],vertical:!1}}function h(t,e,h,i){if(!0===h.vertical)return h.b<=t;if(0===h.a)return!1;var r=(e-h.b)/h.a;return r<t&&r>=0&&r<=i}function i(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.color,l=void 0===n?[this.maxValue,0,0]:n,a=r.filled,s=void 0!==a&&a;this.checkProcessable("paintPoints",{bitDepth:[8,16]}),r.closed=!0;var o=t(i);if(!1===s)return this.paintPolyline(i,r);for(var g=Array(this.height),f=0;f<this.height;f++){g[f]=[];for(var v=0;v<this.width;v++)g[f].push(0)}for(var u=0;u<o.length;u++)for(var c=e(o[u],o[(u+1)%o.length]),d=0;d<this.height;d++)for(var p=0;p<this.width;p++)h(p,d,c,this.height)&&(g[d][p]=0===g[d][p]?1:0);for(var b=0;b<this.height;b++)for(var P=0;P<this.width;P++)if(1===g[b][P])for(var w=Math.min(this.channels,l.length),y=(P+b*this.width)*this.channels,x=0;x<w;x++)this.data[y+x]=l[x];return this.paintPolyline(i,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=i;
},{}],"ZkWU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/color");function t(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({},o);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});for(var s=(0,e.getColors)(Object.assign({},o,{numberColors:t.length})),l=0;l<t.length;l++)r.color=s[l%s.length],this.paintPolygon(t[l],r);return this}
},{"../../util/color":"SZ6y"}],"L62R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getHistogram=s,exports.getHistograms=h;var t=require("new-array"),e=i(t),a=require("is-integer"),r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.maxSlots,a=void 0===e?256:e,r=t.channel,i=t.useAlpha,s=void 0===i||i;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===r){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");r=0}return o.call(this,r,{useAlpha:s,maxSlots:a})}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.maxSlots,a=void 0===e?256:e,r=t.useAlpha,i=void 0===r||r;this.checkProcessable("getHistograms",{bitDepth:[8,16]});for(var s=new Array(i?this.components:this.channels),h=0;h<s.length;h++)s[h]=o.call(this,h,{useAlpha:i,maxSlots:a});return s}function o(t,a){var i=a.useAlpha,s=a.maxSlots;if(1===this.bitDepth){for(var h=[0,0],o=0;o<this.height;o++)for(var n=0;n<this.width;n++){var l=this.getBitXY(o,n);0===l?h[0]+=1:1===l&&(h[1]+=1)}return h}var u=Math.log2(s);if(!(0,r.default)(u))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");var c=0;this.bitDepth>u&&(c=this.bitDepth-u);var f=this.data,p=(0,e.default)(Math.pow(2,Math.min(this.bitDepth,u)),0);if(i&&this.alpha)for(var v=this.channels-t-1,g=t;g<f.length;g+=this.channels)p[f[g]>>c]+=f[g+v]/this.maxValue;else for(var m=t;m<f.length;m+=this.channels)p[f[m]>>c]++;return p}
},{"new-array":"Et2r","is-integer":"6Cqq"}],"xnan":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var t=require("new-array"),e=a(t);function a(t){return t&&t.__esModule?t:{default:t}}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.useAlpha,o=void 0===a||a,r=t.nbSlots,s=void 0===r?512:r;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});var h=Math.log(s)/Math.log(8);if(h!==Math.floor(h))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");for(var l=this.bitDepth-h,n=this.data,i=(0,e.default)(Math.pow(8,h),0),u=Math.pow(2,2*h),p=Math.pow(2,h),c=0;c<n.length;c+=this.channels){var d=(n[c]>>l)*u+(n[c+1]>>l)*p+(n[c+2]>>l);o&&this.alpha?i[d]+=n[c+this.channels-1]/this.maxValue:i[d]++}return i}
},{"new-array":"Et2r"}],"6LWP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("new-array"),t=a(e);function a(e){return e&&e.__esModule?e:{default:e}}function r(){this.checkProcessable("min",{bitDepth:[8,16,32]});for(var e=(0,t.default)(this.channels,1/0),a=0;a<this.data.length;a+=this.channels)for(var r=0;r<this.channels;r++)this.data[a+r]<e[r]&&(e[r]=this.data[a+r]);return e}
},{"new-array":"Et2r"}],"ReRJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=require("new-array"),t=a(e);function a(e){return e&&e.__esModule?e:{default:e}}function r(){this.checkProcessable("max",{bitDepth:[8,16,32]});for(var e=(0,t.default)(this.channels,-1/0),a=0;a<this.data.length;a+=this.channels)for(var r=0;r<this.channels;r++)this.data[a+r]>e[r]&&(e[r]=this.data[a+r]);return e}
},{"new-array":"Et2r"}],"5l24":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=require("new-array"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function s(){this.checkProcessable("sum",{bitDepth:[8,16]});for(var e=(0,t.default)(this.channels,0),r=0;r<this.data.length;r+=this.channels)for(var s=0;s<this.channels;s++)e[s]+=this.data[r+s];return e}
},{"new-array":"Et2r"}],"1wPo":[function(require,module,exports) {
"use strict";function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.checkProcessable("getMoment",{bitDepth:[1]});for(var h=0,i=0;i<this.width;i++)for(var o=0;o<this.height;o++)1===this.getBitXY(i,o)&&(h+=Math.pow(i,t)*Math.pow(o,e));return h}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"NhqF":[function(require,module,exports) {
"use strict";function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.mask,e=t.region,h=void 0===e?3:e,a=t.removeClosePoints,s=void 0===a?0:a,o=t.invert,r=void 0!==o&&o,d=t.maxEquals,v=void 0===d?2:d;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1});for(var l=r?0:1,n=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],f=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],c=(h*=4)<=8?1:2,p=[],u=c;u<this.height-c;u++)for(var w=c;w<this.width-c;w++)if(!i||i.getBitXY(w,u)===l){for(var g=0,m=0,M=this.data[w+u*this.width],x=0;x<h;x++)r?this.data[w+n[x]+(u+f[x])*this.width]>M&&g++:this.data[w+n[x]+(u+f[x])*this.width]<M&&g++,this.data[w+n[x]+(u+f[x])*this.width]===M&&m++;g+m===h&&m<=v&&p.push([w,u])}if(s>0)for(var b=0;b<p.length;b++)for(var P=b+1;P<p.length;P++)Math.sqrt(Math.pow(p[b][0]-p[P][0],2)+Math.pow(p[b][1]-p[P][1],2))<s&&(p[b][0]=p[b][0]+p[P][0]>>1,p[b][1]=p[b][1]+p[P][1]>>1,p.splice(P,1),P--);return p}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"ZWv1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/histogram");function t(){for(var t=this.getHistograms({maxSlots:this.maxValue+1}),r=new Array(t.length),a=0;a<t.length;a++){var s=t[a];r[a]=(0,e.mean)(s)}return r}
},{"../../util/histogram":"JFA9"}],"cUpQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("../../util/histogram");function t(){for(var t=this.getHistograms({maxSlots:this.maxValue+1}),r=new Array(t.length),a=0;a<t.length;a++){var s=t[a];r[a]=(0,e.median)(s)}return r}
},{"../../util/histogram":"JFA9"}],"WSqG":[function(require,module,exports) {
"use strict";function t(){this.checkProcessable("points",{bitDepth:[1]});for(var t=new Array(this.size),e=0,i=0;i<this.width;i++)for(var r=0;r<this.height;r++)1===this.getBitXY(i,r)&&(t[e++]=[i,r]);return t.length=e,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"jTRY":[function(require,module,exports) {
"use strict";function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this===t)return[0,0];for(var r=[0,0],i=this;i;){if(i===t)return r;i.position&&(r[0]+=i.position[0],r[1]+=i.position[1]),i=i.parent}return!!e.defaultFurther&&r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"OflB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("ml-matrix");function t(){return this.checkProcessable("getSvd",{bitDepth:[1]}),new e.SVD(this.points)}
},{"ml-matrix":"fuYa"}],"8/TK":[function(require,module,exports) {
"use strict";function t(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).alpha,e=void 0===t?1:t;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});var s=0;if(void 0!==e){for(var a=this.components;a<this.data.length;a+=this.channels)this.data[a]===e&&s++;return s}return this.size}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"xH8p":[function(require,module,exports) {
"use strict";function r(r,o={}){o.sorted||r.sort(e);const n=r.length,s=new Array(2*n);for(var c=0,u=0;u<n;u++){const e=r[u];for(;c>=2&&t(s[c-2],s[c-1],e)<=0;)c--;s[c++]=e}const f=c+1;for(u=n-2;u>=0;u--){const e=r[u];for(;c>=f&&t(s[c-2],s[c-1],e)<=0;)c--;s[c++]=e}return s.slice(0,c-1)}function t(r,t,e){return(t[1]-r[1])*(e[0]-r[0])-(t[0]-r[0])*(e[1]-r[1])}function e(r,t){return r[0]===t[0]?r[1]-t[1]:r[0]-t[0]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"6lN3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("monotone-chain-convex-hull"),t=o(e);function o(e){return e&&e.__esModule?e:{default:e}}function n(){this.checkProcessable("monotoneChainConvexHull",{bitDepth:1});var e=this.getPoints();return(0,t.default)(e,{sorted:!0})}
},{"monotone-chain-convex-hull":"xH8p"}],"1m1+":[function(require,module,exports) {
"use strict";function r(r){for(var t=0;t<r.length;t++)r[t][0]=Math.round(r[t][0]),r[t][1]=Math.round(r[t][1]);return r}function t(r,t){return[r[0]-t[0],r[1]-t[1]]}function n(r){var t=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2));return[r[0]/t,r[1]/t]}function e(r,t,n){void 0===n&&(n=new Array(t.length));for(var e=Math.cos(r),o=Math.sin(r),u=0;u<n.length;++u)n[u]=[e*t[u][0]-o*t[u][1],o*t[u][0]+e*t[u][1]];return n}function o(r,t){return r[0]*t[0]+r[1]*t[1]}function u(r,e,u){var a=o(n(t(e,r)),n(t(u,r)));return Math.acos(a)}function a(r){var t=i(r),n=t[0][0],e=t[0][1],o=t[1][0],u=t[1][1];return[[n,e],[o,e],[o,u],[n,u]]}function i(r){for(var t=1/0,n=1/0,e=-1/0,o=-1/0,u=0;u<r.length;u++)r[u][0]<t&&(t=r[u][0]),r[u][0]>e&&(e=r[u][0]),r[u][1]<n&&(n=r[u][1]),r[u][1]<o&&(o=r[u][1]);return[[t,n],[e,o]]}function s(r,t){void 0===t&&(t=new Array(r.length));for(var n=i(r),e=n[0][0],o=n[0][1],u=0;u<r.length;u++)t[u][0]=r[u][0]-e,t[u][1]=r[u][1]-o;return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.round=r,exports.difference=t,exports.normalize=n,exports.rotate=e,exports.dot=o,exports.angle=u,exports.boundary=a,exports.minMax=i,exports.moveToZeroZero=s;
},{}],"0WyK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=require("../../util/points"),t=require("./monotoneChainConvexHull"),r=n(t);function n(e){return e&&e.__esModule?e:{default:e}}function a(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).originalPoints,n=void 0===t?r.default.call(this):t;if(0===n.length)return[];if(1===n.length)return[n[0],n[0],n[0],n[0]];for(var a=new Array(n.length),l=1/0,i=0,u=void 0,h=0;h<a.length;h++){var v=o(n[h],n[(h+1)%a.length]);(0,e.rotate)(-v,n,a);for(var f=a[h][0],s=a[h][1],d=a[(h+1)%a.length][0],g=a[(h+1)%a.length][1],c=!0,M=0,b=0,p=0,_=0;_<a.length;_++){var x=(a[_][0]-f)/(d-f);!0===c?(c=!1,M=x,b=x):(x<M&&(M=x),x>b&&(b=x));var m=(-(d-f)*a[_][1]+d*s-g*f)/(d-f);Math.abs(m)>Math.abs(p)&&(p=m)}var q=[f+M*(d-f),s],y=[f+b*(d-f),s],C=Math.abs(p*(M-b)*(d-f));C<l&&(i=v,l=C,u=[q,y,[y[0],y[1]-p],[q[0],q[1]-p]])}return(0,e.rotate)(i,u,u),u}function o(t,r){var n=(0,e.difference)(r,t),a=(0,e.normalize)(n),o=Math.acos(a[0]);return a[1]<0?-o:o}
},{"../../util/points":"1m1+","./monotoneChainConvexHull":"6lN3"}],"lu0y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=$t;var e=require("./filter/abs"),t=Zt(e),r=require("./filter/invert"),d=Zt(r),o=require("./filter/flipX"),i=Zt(o),a=require("./filter/flipY"),l=Zt(a),u=require("./filter/blurFilter"),n=Zt(u),f=require("./filter/medianFilter"),h=Zt(f),x=require("./filter/gaussianFilter"),s=Zt(x),M=require("./filter/sobelFilter"),m=Zt(M),p=require("./filter/scharrFilter"),g=Zt(p),q=require("./filter/gradientFilter"),c=Zt(q),y=require("./filter/level"),P=Zt(y),b=require("./filter/add"),v=Zt(b),C=require("./filter/subtract"),F=Zt(C),H=require("./filter/subtractImage"),k=Zt(H),R=require("./filter/hypotenuse"),A=Zt(R),B=require("./filter/multiply"),L=Zt(B),w=require("./filter/divide"),G=Zt(w),I=require("./filter/background"),S=Zt(I),_=require("./morphology/dilate"),z=Zt(_),D=require("./morphology/erode"),E=Zt(D),T=require("./morphology/open"),X=Zt(T),Y=require("./morphology/close"),j=Zt(Y),O=require("./morphology/topHat"),J=Zt(O),K=require("./morphology/blackHat"),N=Zt(K),Q=require("./morphology/morphologicalGradient"),U=Zt(Q),V=require("./transform/warping"),W=Zt(V),Z=require("./transform/crop"),$=Zt(Z),ee=require("./transform/cropAlpha"),te=Zt(ee),re=require("./transform/resize/resize"),de=Zt(re),oe=require("./transform/hsv"),ie=Zt(oe),ae=require("./transform/hsl"),le=Zt(ae),ue=require("./transform/cmyk"),ne=Zt(ue),fe=require("./transform/rgba8"),he=Zt(fe),xe=require("./transform/grey"),se=Zt(xe),Me=require("./transform/mask/mask"),me=Zt(Me),pe=require("./transform/pad"),ge=Zt(pe),qe=require("./transform/colorDepth"),ce=Zt(qe),ye=require("./transform/rotate"),Pe=require("./transform/insert"),be=Zt(Pe),ve=require("./utility/setBorder"),Ce=Zt(ve),Fe=require("./utility/split"),He=Zt(Fe),ke=require("./utility/getChannel"),Re=Zt(ke),Ae=require("./utility/combineChannels"),Be=Zt(Ae),Le=require("./utility/setChannel"),we=Zt(Le),Ge=require("./utility/getSimilarity"),Ie=Zt(Ge),Se=require("./utility/getPixelsGrid"),_e=Zt(Se),ze=require("./utility/getBestMatch"),De=Zt(ze),Ee=require("./utility/getRow"),Te=Zt(Ee),Xe=require("./utility/getColumn"),Ye=Zt(Xe),je=require("./utility/getMatrix"),Oe=Zt(je),Je=require("./utility/setMatrix"),Ke=Zt(Je),Ne=require("./utility/getPixelsArray"),Qe=Zt(Ne),Ue=require("./utility/getIntersection"),Ve=Zt(Ue),We=require("./utility/getClosestCommonParent"),Ze=Zt(We),$e=require("./utility/getThreshold"),et=Zt($e),tt=require("./operator/cannyEdge"),rt=Zt(tt),dt=require("./operator/convolution"),ot=Zt(dt),it=require("./operator/extract"),at=Zt(it),lt=require("./operator/floodFill"),ut=Zt(lt),nt=require("./operator/paintLabels"),ft=Zt(nt),ht=require("./operator/paintMasks"),xt=Zt(ht),st=require("./operator/paintPoints"),Mt=Zt(st),mt=require("./operator/paintPolyline"),pt=Zt(mt),gt=require("./operator/paintPolylines"),qt=Zt(gt),ct=require("./operator/paintPolygon"),yt=Zt(ct),Pt=require("./operator/paintPolygons"),bt=Zt(Pt),vt=require("./compute/histogram"),Ct=require("./compute/colorHistogram"),Ft=Zt(Ct),Ht=require("./compute/min"),kt=Zt(Ht),Rt=require("./compute/max"),At=Zt(Rt),Bt=require("./compute/sum"),Lt=Zt(Bt),wt=require("./compute/moment"),Gt=Zt(wt),It=require("./compute/localMaxima"),St=Zt(It),_t=require("./compute/mean"),zt=Zt(_t),Dt=require("./compute/median"),Et=Zt(Dt),Tt=require("./compute/points"),Xt=Zt(Tt),Yt=require("./compute/relativePosition"),jt=Zt(Yt),Ot=require("./compute/svd"),Jt=Zt(Ot),Kt=require("./compute/countAlphaPixels"),Nt=Zt(Kt),Qt=require("./compute/monotoneChainConvexHull"),Ut=Zt(Qt),Vt=require("./compute/minimalBoundingRectangle"),Wt=Zt(Vt);function Zt(e){return e&&e.__esModule?e:{default:e}}function $t(e){var r={inPlace:!0};e.extendMethod("invert",d.default),e.extendMethod("abs",t.default),e.extendMethod("level",P.default,r),e.extendMethod("add",v.default,r),e.extendMethod("subtract",F.default,r),e.extendMethod("subtractImage",k.default),e.extendMethod("multiply",L.default,r),e.extendMethod("divide",G.default,r),e.extendMethod("hypotenuse",A.default),e.extendMethod("background",S.default),e.extendMethod("flipX",i.default),e.extendMethod("flipY",l.default),e.extendMethod("blurFilter",n.default),e.extendMethod("medianFilter",h.default),e.extendMethod("gaussianFilter",s.default),e.extendMethod("sobelFilter",m.default),e.extendMethod("gradientFilter",c.default),e.extendMethod("scharrFilter",g.default),e.extendMethod("dilate",z.default),e.extendMethod("erode",E.default),e.extendMethod("open",X.default),e.extendMethod("close",j.default),e.extendMethod("topHat",J.default),e.extendMethod("blackHat",N.default),e.extendMethod("morphologicalGradient",U.default),e.extendMethod("warpingFourPoints",W.default),e.extendMethod("crop",$.default),e.extendMethod("cropAlpha",te.default),e.extendMethod("resize",de.default).extendMethod("scale",de.default),e.extendMethod("hsv",ie.default),e.extendMethod("hsl",le.default),e.extendMethod("cmyk",ne.default),e.extendMethod("rgba8",he.default),e.extendMethod("grey",se.default).extendMethod("gray",se.default),e.extendMethod("mask",me.default),e.extendMethod("pad",ge.default),e.extendMethod("colorDepth",ce.default),e.extendMethod("setBorder",Ce.default,r),e.extendMethod("rotate",ye.rotate),e.extendMethod("rotateLeft",ye.rotateLeft),e.extendMethod("rotateRight",ye.rotateRight),e.extendMethod("insert",be.default),e.extendMethod("getRow",Te.default),e.extendMethod("getColumn",Ye.default),e.extendMethod("getMatrix",Oe.default),e.extendMethod("setMatrix",Ke.default),e.extendMethod("getPixelsArray",Qe.default),e.extendMethod("getIntersection",Ve.default),e.extendMethod("getClosestCommonParent",Ze.default),e.extendMethod("getThreshold",et.default),e.extendMethod("split",He.default),e.extendMethod("getChannel",Re.default),e.extendMethod("combineChannels",Be.default),e.extendMethod("setChannel",we.default),e.extendMethod("getSimilarity",Ie.default),e.extendMethod("getPixelsGrid",_e.default),e.extendMethod("getBestMatch",De.default),e.extendMethod("cannyEdge",rt.default),e.extendMethod("convolution",ot.default),e.extendMethod("extract",at.default),e.extendMethod("floodFill",ut.default),e.extendMethod("paintLabels",ft.default,r),e.extendMethod("paintMasks",xt.default,r),e.extendMethod("paintPoints",Mt.default,r),e.extendMethod("paintPolyline",pt.default,r),e.extendMethod("paintPolylines",qt.default,r),e.extendMethod("paintPolygon",yt.default,r),e.extendMethod("paintPolygons",bt.default,r),e.extendMethod("countAlphaPixels",Nt.default),e.extendMethod("monotoneChainConvexHull",Ut.default),e.extendMethod("minimalBoundingRectangle",Wt.default),e.extendMethod("getHistogram",vt.getHistogram).extendProperty("histogram",vt.getHistogram),e.extendMethod("getHistograms",vt.getHistograms).extendProperty("histograms",vt.getHistograms),e.extendMethod("getColorHistogram",Ft.default).extendProperty("colorHistogram",Ft.default),e.extendMethod("getMin",kt.default).extendProperty("min",kt.default),e.extendMethod("getMax",At.default).extendProperty("max",At.default),e.extendMethod("getSum",Lt.default).extendProperty("sum",Lt.default),e.extendMethod("getMoment",Gt.default).extendProperty("moment",Gt.default),e.extendMethod("getLocalMaxima",St.default),e.extendMethod("getMedian",Et.default).extendProperty("median",Et.default),e.extendMethod("getMean",zt.default).extendProperty("mean",zt.default),e.extendMethod("getPoints",Xt.default).extendProperty("points",Xt.default),e.extendMethod("getRelativePosition",jt.default),e.extendMethod("getSvd",Jt.default).extendProperty("svd",Jt.default)}
},{"./filter/abs":"EfNz","./filter/invert":"e2+9","./filter/flipX":"yePs","./filter/flipY":"vfwB","./filter/blurFilter":"On2d","./filter/medianFilter":"2yCE","./filter/gaussianFilter":"2MHm","./filter/sobelFilter":"DM73","./filter/scharrFilter":"g/FV","./filter/gradientFilter":"By7v","./filter/level":"COxk","./filter/add":"e9e3","./filter/subtract":"ZY7E","./filter/subtractImage":"jUEF","./filter/hypotenuse":"1yW7","./filter/multiply":"rC6P","./filter/divide":"z3GX","./filter/background":"nnZs","./morphology/dilate":"nF59","./morphology/erode":"clFv","./morphology/open":"C96Q","./morphology/close":"sFeg","./morphology/topHat":"oigp","./morphology/blackHat":"XNdm","./morphology/morphologicalGradient":"J8b9","./transform/warping":"kZxW","./transform/crop":"UqRp","./transform/cropAlpha":"LjiE","./transform/resize/resize":"JixG","./transform/hsv":"NPzx","./transform/hsl":"ViFU","./transform/cmyk":"QFq4","./transform/rgba8":"1OUP","./transform/grey":"OP0V","./transform/mask/mask":"8ot7","./transform/pad":"sLF+","./transform/colorDepth":"wryd","./transform/rotate":"NacT","./transform/insert":"CZ5S","./utility/setBorder":"/Aa7","./utility/split":"u1Jc","./utility/getChannel":"IFbL","./utility/combineChannels":"OyYE","./utility/setChannel":"q7Dx","./utility/getSimilarity":"Urfh","./utility/getPixelsGrid":"CkwG","./utility/getBestMatch":"lvJz","./utility/getRow":"hagV","./utility/getColumn":"W9Cq","./utility/getMatrix":"deNP","./utility/setMatrix":"7R7R","./utility/getPixelsArray":"uUSD","./utility/getIntersection":"lTJ1","./utility/getClosestCommonParent":"OejS","./utility/getThreshold":"QnyP","./operator/cannyEdge":"fFi8","./operator/convolution":"LE/g","./operator/extract":"8kv6","./operator/floodFill":"WIXw","./operator/paintLabels":"XP2s","./operator/paintMasks":"PBUu","./operator/paintPoints":"URu+","./operator/paintPolyline":"0xf9","./operator/paintPolylines":"HyqQ","./operator/paintPolygon":"bfCO","./operator/paintPolygons":"ZkWU","./compute/histogram":"L62R","./compute/colorHistogram":"xnan","./compute/min":"6LWP","./compute/max":"ReRJ","./compute/sum":"5l24","./compute/moment":"1wPo","./compute/localMaxima":"NhqF","./compute/mean":"ZWv1","./compute/median":"cUpQ","./compute/points":"WSqG","./compute/relativePosition":"jTRY","./compute/svd":"OflB","./compute/countAlphaPixels":"8/TK","./compute/monotoneChainConvexHull":"6lN3","./compute/minimalBoundingRectangle":"0WyK"}],"PKXl":[function(require,module,exports) {
"use strict";function e(e){for(var t=e.data,r=[1,0,-1,0],a=[0,1,0,-1],i=e.minMax,h=-i.min,o=i.max+h,f=[],l=0;l<=o;l++)f.push(Object.create(null));for(var n=0;n<e.width;n++)for(var v=0;v<e.height;v++){var d=t[n+v*e.width];if(0!==d){for(var u=Object.create(null),c=!1,s=0;s<4;s++){var b=n+r[s],g=v+a[s];if(b>=0&&g>=0&&b<e.width&&g<e.height){var j=t[b+g*e.width];d!==j&&(c=!0,0!==j&&void 0===u[j]&&(u[j]=!0,f[j+h][d]?f[j+h][d]++:f[j+h][d]=1))}else c=!0}c&&(f[d+h][d]?f[d+h][d]++:f[d+h][d]=1)}}for(var p={},w=0;w<f.length;w++)Object.keys(f[w]).length>0&&(p[w-h]=f[w]);return p}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"Aknm":[function(require,module,exports) {
"use strict";function r(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.algorithm,e=void 0===t?"commonBorderLength":t,o=r.minCommonBorderLength,a=void 0===o?5:o,n=r.maxCommonBorderLength,i=void 0===n?100:n,v=r.minCommonBorderRatio,l=void 0===v?.3:v,m=r.maxCommonBorderRatio,f=void 0===m?1:m,d=function(r,t,e){return r[e]>=a&&r[e]<=i};"function"==typeof e&&(d=e),"commonborderratio"===e.toLowerCase()&&(d=function(r,t,e){var o=Math.min(r[e]/r[t],1);return o>=l&&o<=f});var y=this.commonBorderLength,u={},h={},c=!0,s=!1,b=void 0;try{for(var x,g=Object.keys(y)[Symbol.iterator]();!(c=(x=g.next()).done);c=!0){var w=x.value,B=y[w],j=Object.keys(B),p=!0,C=!1,L=void 0;try{for(var M,O=j[Symbol.iterator]();!(p=(M=O.next()).done);p=!0){var k=M.value;if(k!==w&&d(B,w,k)){var S=k;h[k]&&(S=h[k]);var N=w;if(h[w]&&(N=h[w]),Number(S)!==N){var R=Math.min(S,N),_=Math.max(S,N);if(u[R]||(u[R]={}),u[R][_]=!0,h[_]=R,u[_]){var A=!0,P=!1,q=void 0;try{for(var z,D=Object.keys(u[_])[Symbol.iterator]();!(A=(z=D.next()).done);A=!0){var E=z.value;u[R][E]=!0,h[E]=R}}catch(r){P=!0,q=r}finally{try{!A&&D.return&&D.return()}finally{if(P)throw q}}delete u[_]}}}}}catch(r){C=!0,L=r}finally{try{!p&&O.return&&O.return()}finally{if(C)throw L}}}}catch(r){s=!0,b=r}finally{try{!c&&g.return&&g.return()}finally{if(s)throw b}}var F=this.minMax,G=-F.min,H=F.max+G,I=new Array(H+1).fill(0),J=!0,K=!1,Q=void 0;try{for(var T,U=Object.keys(h)[Symbol.iterator]();!(J=(T=U.next()).done);J=!0){var V=T.value;I[Number(V)+G]=h[V]}}catch(r){K=!0,Q=r}finally{try{!J&&U.return&&U.return()}finally{if(K)throw Q}}for(var W=this.data,X=0;X<W.length;X++){var Y=W[X];if(0!==Y){var Z=I[Y+G];0!==Z&&(W[X]=Z)}}return this.computed={},this}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"lGm0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),t=require("./util/commonBorderLength"),i=a(t),n=require("./util/mergeRoi"),o=a(n);function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i){r(this,t),this.parent=e,this.width=e.width,this.height=e.height,this.data=i,this.negative=0,this.positive=0,this.computed={}}return e(t,[{key:"mergeRoi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.call(this,e)}},{key:"rowsInfo",value:function(){for(var e=new Array(this.height),t=0,i=0;i<this.data.length;i+=this.width){var n={row:t,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};e[t++]=n;for(var o={},a={},r=[],s=this.data[i],h=0,u=i;u<i+this.width;u++){var l=this.data[u];s!==l&&(s=l,r.push(h),h=0),h++,l>0?(n.positivePixel++,o[l]||(o[l]=!0)):l<0?(n.negativePixel++,a[l]||(a[l]=!0)):n.zeroPixel++}r.push(h),n.medianChange=r.sort(function(e,t){return e-t})[Math.floor(r.length/2)],n.positiveRoiIDs=Object.keys(o),n.negativeRoiIDs=Object.keys(a),n.positiveRoi=n.positiveRoiIDs.length,n.negativeRoi=n.negativeRoiIDs.length}return e}},{key:"colsInfo",value:function(){for(var e=new Array(this.width),t=0,i=0;i<this.width;i++){var n={col:t,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};e[t++]=n;for(var o={},a={},r=[],s=this.data[i],h=0,u=i;u<i+this.data.length;u+=this.width){var l=this.data[u];s!==l&&(s=l,r.push(h),h=0),h++,l>0?(n.positivePixel++,o[l]||(o[l]=!0)):l<0?(n.negativePixel++,a[l]||(a[l]=!0)):n.zeroPixel++}r.push(h),n.medianChange=r.sort(function(e,t){return e-t})[Math.floor(r.length/2)],n.positiveRoiIDs=Object.keys(o),n.negativeRoiIDs=Object.keys(a),n.positiveRoi=n.positiveRoiIDs.length,n.negativeRoi=n.negativeRoiIDs.length}return e}},{key:"total",get:function(){return this.negative+this.positive}},{key:"minMax",get:function(){if(!this.computed.minMax){for(var e=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER,i=0;i<this.data.length;i++)this.data[i]<e&&(e=this.data[i]),this.data[i]>t&&(t=this.data[i]);this.computed.minMax={min:e,max:t}}return this.computed.minMax}},{key:"commonBorderLength",get:function(){return(0,i.default)(this)}}]),t}();exports.default=s;
},{"./util/commonBorderLength":"PKXl","./util/mergeRoi":"Aknm"}],"+UGs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var t=require("../RoiMap"),i=e(t);function e(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowCorners,r=void 0!==e&&e,h=65535,n=new Int16Array(t.size),d=0,o=0,w=new Uint16Array(h+1),a=new Uint16Array(h+1),g=0;g<t.width;g++)for(var u=0;u<t.height;u++)0===n[u*t.width+g]&&s(g,u);function s(i,e){var g=0,u=0,s=t.getBitXY(i,e),f=s?++d:--o;if(d>32767||o<-32768)throw new Error("Too many regions of interest");for(w[0]=i,a[0]=e;g<=u;){var l=w[g&h],Y=a[g&h];if(n[Y*t.width+l]=f,l>0&&0===n[Y*t.width+l-1]&&t.getBitXY(l-1,Y)===s&&(w[++u&h]=l-1,a[u&h]=Y,n[Y*t.width+l-1]=-32768),Y>0&&0===n[(Y-1)*t.width+l]&&t.getBitXY(l,Y-1)===s&&(w[++u&h]=l,a[u&h]=Y-1,n[(Y-1)*t.width+l]=-32768),l<t.width-1&&0===n[Y*t.width+l+1]&&t.getBitXY(l+1,Y)===s&&(w[++u&h]=l+1,a[u&h]=Y,n[Y*t.width+l+1]=-32768),Y<t.height-1&&0===n[(Y+1)*t.width+l]&&t.getBitXY(l,Y+1)===s&&(w[++u&h]=l,a[u&h]=Y+1,n[(Y+1)*t.width+l]=-32768),r&&(l>0&&Y>0&&0===n[(Y-1)*t.width+l-1]&&t.getBitXY(l-1,Y-1)===s&&(w[++u&h]=l-1,a[u&h]=Y-1,n[(Y-1)*t.width+l-1]=-32768),l<t.width-1&&Y>0&&0===n[(Y-1)*t.width+l+1]&&t.getBitXY(l+1,Y-1)===s&&(w[++u&h]=l+1,a[u&h]=Y-1,n[(Y-1)*t.width+l+1]=-32768),l>0&&Y<t.height-1&&0===n[(Y+1)*t.width+l-1]&&t.getBitXY(l-1,Y+1)===s&&(w[++u&h]=l-1,a[u&h]=Y+1,n[(Y+1)*t.width+l-1]=-32768),l<t.width-1&&Y<t.height-1&&0===n[(Y+1)*t.width+l+1]&&t.getBitXY(l+1,Y+1)===s&&(w[++u&h]=l+1,a[u&h]=Y+1,n[(Y+1)*t.width+l+1]=-32768)),u-++g>h)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new i.default(t,n)}
},{"../RoiMap":"lGm0"}],"GJ+w":[function(require,module,exports) {
"use strict";class n{constructor(){this.nodes=new Map}add(n){var r=this.nodes.get(n);return r||(r=new t(n),this.nodes.set(n,r)),r}union(n,t){const r=this.find(n),e=this.find(t);r!==e&&(r.rank<e.rank?r.parent=e:r.rank>e.rank?e.parent=r:(e.parent=r,r.rank++))}find(n){for(var t=n;null!==t.parent;)t=t.parent;for(var r=n;null!==r.parent;){var e=r;r=r.parent,e.parent=t}return t}connected(n,t){return this.find(n)===this.find(t)}}function t(n){this.value=n,this.parent=null,this.rank=0}module.exports=n;
},{}],"T3HN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=d;var e=require("ml-disjoint-set"),r=u(e),l=require("../RoiMap"),n=u(l);function u(e){return e&&e.__esModule?e:{default:e}}var t=[-1,0],a=[0,-1],i=[null,null],o=[-1,-1,0,1],v=[0,-1,-1,-1],f=[null,null,null,null];function d(e){var l=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowCorners,u=4;void 0!==l&&l&&(u=8);var d=void 0,s=void 0,g=void 0;if(8===u)d=o,s=v,g=f;else{if(4!==u)throw new RangeError("unsupported neighbours count: "+u);d=t,s=a,g=i}for(var h=e.size,w=e.width,p=e.height,c=new Array(h),_=new Uint32Array(h),y=new r.default,M=1,b=0;b<p;b++)for(var j=0;j<w;j++){var q=j+b*w;if(e.getBit(q)){for(var x=null,A=0;A<g.length;A++){var B=j+d[A],R=b+s[A];if(B>=0&&R>=0&&B<w&&R<p){var m=c[B+R*w];m?(g[A]=m,(!x||g[A].value<x.value)&&(x=g[A])):g[A]=null}}if(x){c[q]=x;for(var z=0;z<g.length;z++)g[z]&&g[z]!==x&&y.union(x,g[z])}else c[q]=y.add(M++)}}for(var C=0;C<p;C++)for(var E=0;E<w;E++){var O=E+C*w;e.getBit(O)&&(_[O]=y.find(c[O]).value)}return new n.default(e,_)}
},{"ml-disjoint-set":"GJ+w","../RoiMap":"lGm0"}],"QXOD":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(t){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"8rhI":[function(require,module,exports) {
var process = require("process");
var r=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;var t=require("../RoiMap"),a=i(t);function i(r){return r&&r.__esModule?r:{default:r}}function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.allowCorner,i=void 0===t||t,e=r.onlyTop,n=void 0!==e&&e,o=(r.invert,this);o.checkProcessable("fromMaxima",{components:[1]});var d=1,f=2,u=0,w=0,h=new Int16Array(o.size),c=new Int8Array(o.size),v=new Float32Array(o.size),s=1048575,l=new Uint16Array(s+1),y=new Uint16Array(s+1),p=0,A=0,b=new Uint16Array(s+1),m=new Uint16Array(s+1),x=0,M=0;for(!function(r){for(var t=r.maxima,a=void 0===t||t,e=1;e<o.height-1;e++)for(var n=1;n<o.width-1;n++){var d=n+e*o.width;if(0===c[d]){var f=a?o.data[d]:-o.data[n+e*o.width];if(o.data[e*o.width+n-1]>f)continue;if(o.data[e*o.width+n+1]>f)continue;if(o.data[(e-1)*o.width+n]>f)continue;if(o.data[(e+1)*o.width+n]>f)continue;if(i){if(o.data[(e-1)*o.width+n-1]>f)continue;if(o.data[(e-1)*o.width+n+1]>f)continue;if(o.data[(e+1)*o.width+n-1]>f)continue;if(o.data[(e+1)*o.width+n+1]>f)continue}h[d]=a?++u:--w;var v=U(n,e);v||(a?--u:++w)}}}(o);p<A;){_(l[p&s],y[p&s],f),p++}return new a.default(o,h);function U(r,t){var a=A;x=0,M=1,b[0]=r,m[0]=t;for(var i=!0;x<M;){i&=_(b[x&s],m[x&s],d),x++}if(!i){for(var e=0;e<M;e++){var n=b[e&s],f=m[e&s]*o.width+n;h[f]=0}A=a}return i}function _(r,t,a){for(var i=h[t*o.width+r],e=o.data[t*o.width+r],u=t-1;u<=t+1;u++)for(var w=r-1;w<=r+1;w++){var p=u*o.width+w;if(0===c[p])switch(c[p]=1,v[p]=o.data[p]-e,a){case d:if(0===v[p]){if(0===w||0===u||w===o.width-1||u===o.height-1)return!1;h[p]=i,b[M&s]=w,m[M&s]=u,M++}else{if(v[p]>0)return!1;n||(h[p]=i,l[A&s]=w,y[A&s]=u,A++)}break;case f:v[p]<=0&&(h[p]=i,l[A&s]=w,y[A&s]=u,A++);break;default:throw new Error("unreachable")}}return!0}}
},{"../RoiMap":"lGm0","process":"QXOD"}],"I9NG":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(i){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=i();else if("function"==typeof t&&t.amd)t([],i);else{("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this).PriorityQueue=i()}}(function(){return function t(e,i,r){function o(n,s){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!s&&h)return h(n,!0);if(a)return a(n,!0);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[n]={exports:{}};e[n][0].call(p.exports,function(t){var i=e[n][1][t];return o(i||t)},p,p.exports,t,e,i,r)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}({1:[function(t,e,i){var r,o,a,n,s,h={}.hasOwnProperty;r=t("./PriorityQueue/AbstractPriorityQueue"),o=t("./PriorityQueue/ArrayStrategy"),n=t("./PriorityQueue/BinaryHeapStrategy"),a=t("./PriorityQueue/BHeapStrategy"),(s=function(t){function e(t){t||(t={}),t.strategy||(t.strategy=n),t.comparator||(t.comparator=function(t,e){return(t||0)-(e||0)}),e.__super__.constructor.call(this,t)}return function(t,e){for(var i in e)h.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,r),e}()).ArrayStrategy=o,s.BinaryHeapStrategy=n,s.BHeapStrategy=a,e.exports=s},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(t,e,i){e.exports=function(){function t(t){var e;if(null==(null!=t?t.strategy:void 0))throw"Must pass options.strategy, a strategy";if(null==(null!=t?t.comparator:void 0))throw"Must pass options.comparator, a comparator";this.priv=new t.strategy(t),this.length=(null!=t&&null!=(e=t.initialValues)?e.length:void 0)||0}return t.prototype.queue=function(t){this.length++,this.priv.queue(t)},t.prototype.dequeue=function(t){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},t.prototype.peek=function(t){if(!this.length)throw"Empty queue";return this.priv.peek()},t.prototype.clear=function(){return this.length=0,this.priv.clear()},t}()},{}],3:[function(t,e,i){var r;r=function(t,e,i){var r,o,a;for(o=0,r=t.length;o<r;)i(t[a=o+r>>>1],e)>=0?o=a+1:r=a;return o},e.exports=function(){function t(t){var e;this.options=t,this.comparator=this.options.comparator,this.data=(null!=(e=this.options.initialValues)?e.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return t.prototype.queue=function(t){var e;e=r(this.data,t,this.comparator),this.data.splice(e,0,t)},t.prototype.dequeue=function(){return this.data.pop()},t.prototype.peek=function(){return this.data[this.data.length-1]},t.prototype.clear=function(){this.data.length=0},t}()},{}],4:[function(t,e,i){e.exports=function(){function t(t){var e,i,r,o,a,n,s,h;for(this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.pageSize=(null!=t?t.pageSize:void 0)||512,this.length=0,s=0;1<<s<this.pageSize;)s+=1;if(1<<s!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=s,this._emptyMemoryPageTemplate=e=[],i=0,a=this.pageSize;0<=a?i<a:i>a;0<=a?++i:--i)e.push(null);if(this._memory=[],this._mask=this.pageSize-1,t.initialValues)for(r=0,o=(n=t.initialValues).length;r<o;r++)h=n[r],this.queue(h)}return t.prototype.queue=function(t){this.length+=1,this._write(this.length,t),this._bubbleUp(this.length,t)},t.prototype.dequeue=function(){var t,e;return t=this._read(1),e=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,e),this._bubbleDown(1,e)),t},t.prototype.peek=function(){return this._read(1)},t.prototype.clear=function(){this.length=0,this._memory.length=0},t.prototype._write=function(t,e){var i;for(i=t>>this._shift;i>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[i][t&this._mask]=e},t.prototype._read=function(t){return this._memory[t>>this._shift][t&this._mask]},t.prototype._bubbleUp=function(t,e){var i,r,o,a;for(i=this.comparator;t>1&&(r=t&this._mask,t<this.pageSize||r>3?o=t&~this._mask|r>>1:r<2?(o=t-this.pageSize>>this._shift,o+=o&~(this._mask>>1),o|=this.pageSize>>1):o=t-2,!(i(a=this._read(o),e)<0));)this._write(o,e),this._write(t,a),t=o},t.prototype._bubbleDown=function(t,e){var i,r,o,a,n;for(n=this.comparator;t<this.length;)if(t>this._mask&&!(t&this._mask-1)?i=r=t+2:t&this.pageSize>>1?(i=(t&~this._mask)>>1,r=(i=(i|=t&this._mask>>1)+1<<this._shift)+1):r=(i=t+(t&this._mask))+1,i!==r&&r<=this.length)if(o=this._read(i),a=this._read(r),n(o,e)<0&&n(o,a)<=0)this._write(i,e),this._write(t,o),t=i;else{if(!(n(a,e)<0))break;this._write(r,e),this._write(t,a),t=r}else{if(!(i<=this.length))break;if(!(n(o=this._read(i),e)<0))break;this._write(i,e),this._write(t,o),t=i}},t}()},{}],5:[function(t,e,i){e.exports=function(){function t(t){var e;this.comparator=(null!=t?t.comparator:void 0)||function(t,e){return t-e},this.length=0,this.data=(null!=(e=t.initialValues)?e.slice(0):void 0)||[],this._heapify()}return t.prototype._heapify=function(){var t,e,i;if(this.data.length>0)for(t=e=1,i=this.data.length;1<=i?e<i:e>i;t=1<=i?++e:--e)this._bubbleUp(t)},t.prototype.queue=function(t){this.data.push(t),this._bubbleUp(this.data.length-1)},t.prototype.dequeue=function(){var t,e;return e=this.data[0],t=this.data.pop(),this.data.length>0&&(this.data[0]=t,this._bubbleDown(0)),e},t.prototype.peek=function(){return this.data[0]},t.prototype.clear=function(){this.length=0,this.data.length=0},t.prototype._bubbleUp=function(t){for(var e,i;t>0&&(e=t-1>>>1,this.comparator(this.data[t],this.data[e])<0);)i=this.data[e],this.data[e]=this.data[t],this.data[t]=i,t=e},t.prototype._bubbleDown=function(t){var e,i,r,o,a;for(e=this.data.length-1;o=(i=1+(t<<1))+1,r=t,i<=e&&this.comparator(this.data[i],this.data[r])<0&&(r=i),o<=e&&this.comparator(this.data[o],this.data[r])<0&&(r=o),r!==t;)a=this.data[r],this.data[r]=this.data[t],this.data[t]=a,t=r},t}()},{}]},{},[1])(1)});
},{}],"H2KG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.dxs=[1,0,-1,0,1,1,-1,-1],s=exports.dys=[0,1,0,-1,1,-1,1,-1];
},{}],"rRKE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=require("js-priority-queue"),t=u(e),r=require("../RoiMap"),a=u(r),i=require("../../../util/dxdy.js");function u(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.points,u=e.mask,o=e.image,n=e.fillMaxValue,d=void 0===n?this.maxValue:n,s=e.invert,l=void 0!==s&&s,f=o||this;f.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),l=!l,r||(r=f.getLocalMaxima({invert:l,mask:u}));for(var v=l?0:1,c=new Int16Array(f.size),h=f.width,p=f.height,g=new t.default({comparator:function(e,t){return e[2]-t[2]},strategy:t.default.BinaryHeapStrategy}),y=0;y<r.length;y++){var m=r[y][0]+r[y][1]*h;c[m]=y+1;var x=f.data[m];(l&&x<=d||!l&&x>=d)&&g.queue([r[y][0],r[y][1],x])}for(;g.length>0;)for(var q=g.dequeue(),M=q[0]+q[1]*h,w=0;w<4;w++){var _=q[0]+i.dxs[w],b=q[1]+i.dys[w];if(_>=0&&b>=0&&_<h&&b<p){var j=_+b*h;if(!u||u.getBit(j)===v){var k=f.data[j];(l&&k<=d||!l&&k>=d)&&0===c[j]&&(c[j]=c[M],g.queue([q[0]+i.dxs[w],q[1]+i.dys[w],k]))}}}return new a.default(f,c)}
},{"js-priority-queue":"I9NG","../RoiMap":"lGm0","../../../util/dxdy.js":"H2KG"}],"dhNs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("../RoiMap"),t=n(e),r=require("../../../util/Shape"),i=n(r);function n(e){return e&&e.__esModule?e:{default:e}}function u(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new i.default(r),u=new Int16Array(this.size),h=0,s=n.getPoints(),a=0;a<e.length;a++){h++;for(var o=e[a][0],l=e[a][1],d=0;d<s.length;d++){var f=s[d][0],v=s[d][1];o+f>=0&&l+v>=0&&o+f<this.width&&l+v<this.height&&(u[o+f+(l+v)*this.width]=h)}}return new t.default(this,u)}
},{"../RoiMap":"lGm0","../../../util/Shape":"/yol"}],"8Mnn":[function(require,module,exports) {
"use strict";module.exports=t;var r=+(Math.pow(2,27)+1);function t(t,e,o){var u=t*e,a=r*t,n=a-(a-t),s=t-n,c=r*e,i=c-(c-e),p=e-i,v=s*p-(u-n*i-s*i-n*p);return o?(o[0]=v,o[1]=u,o):[v,u]}
},{}],"Q8bh":[function(require,module,exports) {
"use strict";function r(r,t){var n=r+t,e=n-r,a=r-(n-e)+(t-e);return a?[a,n]:[n]}function t(t,n){var e=0|t.length,a=0|n.length;if(1===e&&1===a)return r(t[0],n[0]);var o,u,f=new Array(e+a),h=0,i=0,l=0,s=Math.abs,v=t[i],c=s(v),g=n[l],b=s(g);c<b?(u=v,(i+=1)<e&&(c=s(v=t[i]))):(u=g,(l+=1)<a&&(b=s(g=n[l]))),i<e&&c<b||l>=a?(o=v,(i+=1)<e&&(c=s(v=t[i]))):(o=g,(l+=1)<a&&(b=s(g=n[l])));for(var d,m,p=o+u,w=p-o,x=u-w,y=x,A=p;i<e&&l<a;)c<b?(o=v,(i+=1)<e&&(c=s(v=t[i]))):(o=g,(l+=1)<a&&(b=s(g=n[l]))),(x=(u=y)-(w=(p=o+u)-o))&&(f[h++]=x),y=A-((d=A+p)-(m=d-A))+(p-m),A=d;for(;i<e;)(x=(u=y)-(w=(p=(o=v)+u)-o))&&(f[h++]=x),y=A-((d=A+p)-(m=d-A))+(p-m),A=d,(i+=1)<e&&(v=t[i]);for(;l<a;)(x=(u=y)-(w=(p=(o=g)+u)-o))&&(f[h++]=x),y=A-((d=A+p)-(m=d-A))+(p-m),A=d,(l+=1)<a&&(g=n[l]);return y&&(f[h++]=y),A&&(f[h++]=A),h||(f[h++]=0),f.length=h,f}module.exports=t;
},{}],"cd+A":[function(require,module,exports) {
"use strict";function r(r,t,e){var u=r+t,n=u-r,o=t-n,s=r-(u-n);return e?(e[0]=s+o,e[1]=u,e):[s+o,u]}module.exports=r;
},{}],"jbtT":[function(require,module,exports) {
"use strict";var r=require("two-product"),e=require("two-sum");function t(t,u){var a=t.length;if(1===a){var n=r(t[0],u);return n[0]?n:[n[1]]}var o=new Array(2*a),v=[.1,.1],i=[.1,.1],s=0;r(t[0],u,v),v[0]&&(o[s++]=v[0]);for(var c=1;c<a;++c){r(t[c],u,i);var f=v[1];e(f,i[0],v),v[0]&&(o[s++]=v[0]);var l=i[1],w=v[1],d=l+w,g=w-(d-l);v[1]=d,g&&(o[s++]=g)}return v[1]&&(o[s++]=v[1]),0===s&&(o[s++]=0),o.length=s,o}module.exports=t;
},{"two-product":"8Mnn","two-sum":"cd+A"}],"8fBv":[function(require,module,exports) {
"use strict";function r(r,t){var n=r+t,e=n-r,a=r-(n-e)+(t-e);return a?[a,n]:[n]}function t(t,n){var e=0|t.length,a=0|n.length;if(1===e&&1===a)return r(t[0],-n[0]);var o,u,f=new Array(e+a),h=0,i=0,l=0,s=Math.abs,v=t[i],c=s(v),g=-n[l],b=s(g);c<b?(u=v,(i+=1)<e&&(c=s(v=t[i]))):(u=g,(l+=1)<a&&(b=s(g=-n[l]))),i<e&&c<b||l>=a?(o=v,(i+=1)<e&&(c=s(v=t[i]))):(o=g,(l+=1)<a&&(b=s(g=-n[l])));for(var d,m,p=o+u,w=p-o,x=u-w,y=x,A=p;i<e&&l<a;)c<b?(o=v,(i+=1)<e&&(c=s(v=t[i]))):(o=g,(l+=1)<a&&(b=s(g=-n[l]))),(x=(u=y)-(w=(p=o+u)-o))&&(f[h++]=x),y=A-((d=A+p)-(m=d-A))+(p-m),A=d;for(;i<e;)(x=(u=y)-(w=(p=(o=v)+u)-o))&&(f[h++]=x),y=A-((d=A+p)-(m=d-A))+(p-m),A=d,(i+=1)<e&&(v=t[i]);for(;l<a;)(x=(u=y)-(w=(p=(o=g)+u)-o))&&(f[h++]=x),y=A-((d=A+p)-(m=d-A))+(p-m),A=d,(l+=1)<a&&(g=-n[l]);return y&&(f[h++]=y),A&&(f[h++]=A),h||(f[h++]=0),f.length=h,f}module.exports=t;
},{}],"GDiG":[function(require,module,exports) {
"use strict";var r=require("two-product"),n=require("robust-sum"),t=require("robust-scale"),e=require("robust-subtract"),u=5,a=1.1102230246251565e-16,o=(3+16*a)*a,i=(7+56*a)*a;function s(r,n){for(var t=new Array(r.length-1),e=1;e<r.length;++e)for(var u=t[e-1]=new Array(r.length-1),a=0,o=0;a<r.length;++a)a!==n&&(u[o++]=r[e][a]);return t}function h(r){for(var n=new Array(r),t=0;t<r;++t){n[t]=new Array(r);for(var e=0;e<r;++e)n[t][e]=["m",e,"[",r-t-1,"]"].join("")}return n}function l(r){return 1&r?"-":""}function c(r){if(1===r.length)return r[0];if(2===r.length)return["sum(",r[0],",",r[1],")"].join("");var n=r.length>>1;return["sum(",c(r.slice(0,n)),",",c(r.slice(n)),")"].join("")}function f(r){if(2===r.length)return[["sum(prod(",r[0][0],",",r[1][1],"),prod(-",r[0][1],",",r[1][0],"))"].join("")];for(var n=[],t=0;t<r.length;++t)n.push(["scale(",c(f(s(r,t))),",",l(t),r[0][t],")"].join(""));return n}function p(u){for(var a=[],o=[],i=h(u),l=[],p=0;p<u;++p)0==(1&p)?a.push.apply(a,f(s(i,p))):o.push.apply(o,f(s(i,p))),l.push("m"+p);var g=c(a),v=c(o),b="orientation"+u+"Exact",m=["function ",b,"(",l.join(),"){var p=",g,",n=",v,",d=sub(p,n);return d[d.length-1];};return ",b].join("");return new Function("sum","prod","scale","sub",m)(n,r,t,e)}var g=p(3),v=p(4),b=[function(){return 0},function(){return 0},function(r,n){return n[0]-r[0]},function(r,n,t){var e,u=(r[1]-t[1])*(n[0]-t[0]),a=(r[0]-t[0])*(n[1]-t[1]),i=u-a;if(u>0){if(a<=0)return i;e=u+a}else{if(!(u<0))return i;if(a>=0)return i;e=-(u+a)}var s=o*e;return i>=s||i<=-s?i:g(r,n,t)},function(r,n,t,e){var u=r[0]-e[0],a=n[0]-e[0],o=t[0]-e[0],s=r[1]-e[1],h=n[1]-e[1],l=t[1]-e[1],c=r[2]-e[2],f=n[2]-e[2],p=t[2]-e[2],g=a*l,b=o*h,m=o*s,d=u*l,j=u*h,w=a*s,y=c*(g-b)+f*(m-d)+p*(j-w),M=(Math.abs(g)+Math.abs(b))*Math.abs(c)+(Math.abs(m)+Math.abs(d))*Math.abs(f)+(Math.abs(j)+Math.abs(w))*Math.abs(p),A=i*M;return y>A||-y>A?y:v(r,n,t,e)}];function m(r){var n=b[r.length];return n||(n=b[r.length]=p(r.length)),n.apply(void 0,r)}function d(){for(;b.length<=u;)b.push(p(b.length));for(var r=[],n=["slow"],t=0;t<=u;++t)r.push("a"+t),n.push("o"+t);var e=["function getOrientation(",r.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(t=2;t<=u;++t)e.push("case ",t,":return o",t,"(",r.slice(0,t).join(),");");e.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(e.join(""));var a=Function.apply(void 0,n);module.exports=a.apply(void 0,[m].concat(b));for(t=0;t<=u;++t)module.exports[t]=b[t]}d();
},{"two-product":"8Mnn","robust-sum":"Q8bh","robust-scale":"jbtT","robust-subtract":"8fBv"}],"sLYW":[function(require,module,exports) {
module.exports=i;var r=require("robust-orientation");function i(i,e){for(var a=e[0],f=e[1],t=i.length,n=1,u=t,v=0,o=t-1;v<u;o=v++){var h=i[v],m=i[o],l=h[1],s=m[1];if(s<l){if(s<f&&f<l){if(0===(M=r(h,m,e)))return 0;n^=0<M|0}else if(f===l){if(l<i[(v+1)%t][1]){if(0===(M=r(h,m,e)))return 0;n^=0<M|0}}}else if(l<s){if(l<f&&f<s){if(0===(M=r(h,m,e)))return 0;n^=M<0|0}else if(f===l){if(i[(v+1)%t][1]<l){var M;if(0===(M=r(h,m,e)))return 0;n^=M<0|0}}}else if(f===l){var x=Math.min(h[0],m[0]),b=Math.max(h[0],m[0]);if(0===v){for(;o>0;){var k=(o+t-1)%t;if((g=i[k])[1]!==f)break;var c=g[0];x=Math.min(x,c),b=Math.max(b,c),o=k}if(0===o)return x<=a&&a<=b?0:1;u=o+1}for(var d=i[(o+t-1)%t][1];v+1<u;){var g;if((g=i[v+1])[1]!==f)break;c=g[0];x=Math.min(x,c),b=Math.max(b,c),v+=1}if(x<=a&&a<=b)return 0;var p=i[(v+1)%t][1];a<x&&d<f!=p<f&&(n^=1)}}return 2*n-1}
},{"robust-orientation":"GDiG"}],"zcTY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,e,h){return e&&t(i.prototype,e),h&&t(i,h),i}}(),i=require("robust-point-in-polygon"),e=u(i),h=require("../Image"),n=u(h),s=require("../core/kindNames"),r=d(s),a=require("../../util/Shape"),o=u(a);function d(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}function u(t){return t&&t.__esModule?t:{default:t}}function m(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var c=function(){function i(t,e){m(this,i),this.map=t,this.id=e,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}return t(i,[{key:"getMask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.scale,e=void 0===i?1:i,h=t.kind,n=void 0;switch(void 0===h?"":h){case"contour":n=this.contourMask;break;case"box":n=this.boxMask;break;case"filled":n=this.filledMask;break;case"center":n=this.centerMask;break;case"hull":n=this.hullMask;break;default:n=this.mask}return e<1&&((n=n.resize({factor:e})).parent=this.mask.parent,n.position[0]+=this.minX,n.position[1]+=this.minY),n}},{key:"_computExternalIDs",value:function(){var t=this.borderIDs,i=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];for(var e=this.internalIDs,h=0;h<t.length;h++)e.includes(t[h])||(this.computed.externalIDs.push(t[h]),this.computed.externalLengths.push(i[h]))}},{key:"_computeBorderIDs",value:function(){var t=p(this);this.computed.borderIDs=t.ids,this.computed.borderLengths=t.lengths}},{key:"toJSON",value:function(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface}}},{key:"mean",get:function(){throw new Error("Roi mean not implemented yet")}},{key:"center",get:function(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}},{key:"ratio",get:function(){return this.width/this.height}},{key:"width",get:function(){return this.maxX-this.minX+1}},{key:"height",get:function(){return this.maxY-this.minY+1}},{key:"externalIDs",get:function(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}},{key:"externalLengths",get:function(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}},{key:"borderIDs",get:function(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}},{key:"borderLengths",get:function(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}},{key:"boxIDs",get:function(){return this.computed.boxIDs||(this.computed.boxIDs=f(this)),this.computed.boxIDs}},{key:"internalIDs",get:function(){return this.computed.internalIDs||(this.computed.internalIDs=w(this)),this.computed.internalIDs}},{key:"box",get:function(){return this.computed.box||(this.computed.box=l(this)),this.computed.box}},{key:"external",get:function(){return this.computed.external||(this.computed.external=v(this)),this.computed.external}},{key:"border",get:function(){return this.computed.border||(this.computed.border=g(this)),this.computed.border}},{key:"contourMask",get:function(){if(!this.computed.contourMask){for(var t=new n.default(this.width,this.height,{kind:r.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),i=0;i<this.width;i++)for(var e=0;e<this.height;e++)this.map.data[i+this.minX+(e+this.minY)*this.map.width]===this.id&&(i>0&&i<this.width-1&&e>0&&e<this.height-1&&this.map.data[i-1+this.minX+(e+this.minY)*this.map.width]===this.id&&this.map.data[i+1+this.minX+(e+this.minY)*this.map.width]===this.id&&this.map.data[i+this.minX+(e-1+this.minY)*this.map.width]===this.id&&this.map.data[i+this.minX+(e+1+this.minY)*this.map.width]===this.id||t.setBitXY(i,e));this.computed.contourMask=t}return this.computed.contourMask}},{key:"boxMask",get:function(){if(!this.computed.boxMask){for(var t=new n.default(this.width,this.height,{kind:r.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),i=0;i<this.width;i++)t.setBitXY(i,0),t.setBitXY(i,this.height-1);for(var e=0;e<this.height;e++)t.setBitXY(0,e),t.setBitXY(this.width-1,e);this.computed.boxMask=t}return this.computed.boxMask}},{key:"mask",get:function(){if(!this.computed.mask){for(var t=new n.default(this.width,this.height,{kind:r.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),i=0;i<this.width;i++)for(var e=0;e<this.height;e++)this.map.data[i+this.minX+(e+this.minY)*this.map.width]===this.id&&t.setBitXY(i,e);this.computed.mask=t}return this.computed.mask}},{key:"filledMask",get:function(){if(!this.computed.filledMask){for(var t=new n.default(this.width,this.height,{kind:r.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),i=0;i<this.width;i++)for(var e=0;e<this.height;e++){var h=i+this.minX+(e+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[h])&&t.setBitXY(i,e)}this.computed.filledMask=t}return this.computed.filledMask}},{key:"centerMask",get:function(){if(!this.computed.centerMask){var t=new o.default({kind:"smallCross"}).getMask();t.parent=this.map.parent,t.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=t}return this.computed.centerMask}},{key:"hullMask",get:function(){if(!this.computed.hullMask){for(var t=new n.default(this.width,this.height,{kind:r.BINARY,position:[this.minX,this.minY],parent:this.map.parent}),i=this.mask.monotoneChainConvexHull(),h=0;h<this.width;h++)for(var s=0;s<this.height;s++)1!==(0,e.default)(i,[h,s])&&t.setBitXY(h,s);this.computed.hullMask=t}return this.computed.hullMask}},{key:"points",get:function(){if(!this.computed.points){for(var t=[],i=0;i<this.height;i++)for(var e=0;e<this.width;e++){var h=(i+this.minY)*this.map.width+e+this.minX;this.map.data[h]===this.id&&t.push([e,i])}this.computed.points=t}return this.computed.points}},{key:"maxLengthPoints",get:function(){if(!this.computed.maxLengthPoints){for(var t=0,i=void 0,e=this.points,h=0;h<e.length;h++)for(var n=h+1;n<e.length;n++){var s=Math.pow(e[h][0]-e[n][0],2)+Math.pow(e[h][1]-e[n][1],2);s>=t&&(t=s,i=[e[h],e[n]])}this.computed.maxLengthPoints=i}return this.computed.maxLengthPoints}},{key:"maxLength",get:function(){if(!this.computed.maxLength){var t=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=t}return this.computed.maxLength}},{key:"angle",get:function(){if(!this.computed.angle){var t=this.maxLengthPoints,i=180*-Math.atan2(t[0][1]-t[1][1],t[0][0]-t[1][0])/Math.PI;this.computed.angle=i}return this.computed.angle}}]),i}();function p(t){for(var i=t.map,e=i.data,h=new Set,n=new Map,s=new Set,r=[1,0,-1,0],a=[0,1,0,-1],o=t.minX;o<=t.maxX;o++)for(var d=t.minY;d<=t.maxY;d++){if(e[o+d*i.width]===t.id)for(var u=0;u<4;u++){var m=o+r[u],c=d+a[u];if(m>=0&&c>=0&&m<i.width&&c<i.height){var p=m+c*i.width;if(e[p]!==t.id&&!s.has(p)){s.add(p),h.add(e[p]);var f=n.get(e[p]);f?n.set(e[p],++f):n.set(e[p],1)}}}}var l=Array.from(h),g=l.map(function(t){return n.get(t)});return{ids:l,lengths:g}}function f(t){for(var i=new Set,e=t.map,h=e.data,n=[0,t.height-1],s=0;s<n.length;s++)for(var r=n[s],a=0;a<t.width;a++){var o=(r+t.minY)*e.width+a+t.minX;if(a-t.minX>0&&h[o]===t.id&&h[o-1]!==t.id){var d=h[o-1];i.add(d)}if(e.width-a-t.minX>1&&h[o]===t.id&&h[o+1]!==t.id){var u=h[o+1];i.add(u)}}for(var m=[0,t.width-1],c=0;c<m.length;c++)for(var p=m[c],f=0;f<t.height;f++){var l=(f+t.minY)*e.width+p+t.minX;if(f-t.minY>0&&h[l]===t.id&&h[l-e.width]!==t.id){var g=h[l-e.width];i.add(g)}if(e.height-f-t.minY>1&&h[l]===t.id&&h[l+e.width]!==t.id){var v=h[l+e.width];i.add(v)}}return Array.from(i)}function l(t){var i=0,e=t.map,h=e.data,n=[0];t.height>1&&(n[1]=t.height-1);var s=!0,r=!1,a=void 0;try{for(var o,d=n[Symbol.iterator]();!(s=(o=d.next()).done);s=!0)for(var u=o.value,m=1;m<t.width-1;m++){h[(u+t.minY)*e.width+m+t.minX]===t.id&&i++}}catch(t){r=!0,a=t}finally{try{!s&&d.return&&d.return()}finally{if(r)throw a}}var c=[0];t.width>1&&(c[1]=t.width-1);var p=!0,f=!1,l=void 0;try{for(var g,v=c[Symbol.iterator]();!(p=(g=v.next()).done);p=!0)for(var w=g.value,k=0;k<t.height;k++){h[(k+t.minY)*e.width+w+t.minX]===t.id&&i++}}catch(t){f=!0,l=t}finally{try{!p&&v.return&&v.return()}finally{if(f)throw l}}return i}function g(t){for(var i=0,e=t.map,h=e.data,n=1;n<t.width-1;n++)for(var s=1;s<t.height-1;s++){var r=(s+t.minY)*e.width+n+t.minX;h[r]===t.id&&(h[r-1]===t.id&&h[r+1]===t.id&&h[r-e.width]===t.id&&h[r+e.width]===t.id||i++)}return i+t.box}function v(t){for(var i=0,e=t.map,h=e.data,n=1;n<t.width-1;n++)for(var s=1;s<t.height-1;s++){var r=(s+t.minY)*e.width+n+t.minX;h[r]===t.id&&(t.externalIDs.includes(h[r-1])||t.externalIDs.includes(h[r+1])||t.externalIDs.includes(h[r-e.width])||t.externalIDs.includes(h[r+e.width]))&&i++}return i+t.box}function w(t){var i=[t.id],e=t.map,h=e.data;if(t.height>2)for(var n=0;n<t.width;n++){var s=t.minY*e.width+n+t.minX;if(i.includes(h[s])){var r=h[s+e.width];i.includes(r)||t.boxIDs.includes(r)||i.push(r)}}for(var a=new Array(4),o=1;o<t.width-1;o++)for(var d=1;d<t.height-1;d++){var u=(d+t.minY)*e.width+o+t.minX;if(i.includes(h[u])){a[0]=h[u-1],a[1]=h[u+1],a[2]=h[u-e.width],a[3]=h[u+e.width];for(var m=0;m<4;m++){var c=a[m];i.includes(c)||t.boxIDs.includes(c)||i.push(c)}}}return i}exports.default=c;
},{"robust-point-in-polygon":"sLYW","../Image":"U4ir","../core/kindNames":"69CM","../../util/Shape":"/yol"}],"ul18":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(r,i,a){return i&&e(r.prototype,i),a&&e(r,a),r}}(),r=require("./Roi"),i=a(r);function a(e){return e&&e.__esModule?e:{default:e}}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var n=function(){function r(e,i){t(this,r),this.roiMap=e,this.options=i,this.roi=this.createRoi()}return e(r,[{key:"createRoi",value:function(){var e=this.roiMap.data,r={};this.roiMap.positive=0,this.roiMap.negative=0;for(var a=0;a<e.length;a++)e[a]&&!r[e[a]]&&(r[e[a]]=!0,e[a]>0?this.roiMap.positive++:this.roiMap.negative++);var t={};for(var n in r)t[n]=new i.default(this.roiMap,1*n);for(var o=this.roiMap.width,u=this.roiMap.height,s=0;s<u;s++)for(var f=0;f<o;f++){var c=s*o+f;if(0!==e[c]){var v=t[e[c]];f<v.minX&&(v.minX=f),f>v.maxX&&(v.maxX=f),s<v.minY&&(v.minY=s),s>v.maxY&&(v.maxY=s),v.meanX+=f,v.meanY+=s,v.surface++}}var h=[];for(var p in r)t[p].meanX/=t[p].surface,t[p].meanY/=t[p].surface,h.push(t[p]);return h}}]),r}();exports.default=n;
},{"./Roi":"zcTY"}],"C5l4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),t=require("../Image"),i=m(t),a=require("./creator/fromMask"),r=m(a),n=require("./creator/fromMaskConnectedComponentLabelingAlgorithm"),o=m(n),s=require("./creator/fromMaxima"),l=m(s),h=require("./creator/fromWaterShed"),u=m(h),f=require("./creator/fromPoints"),g=m(f),d=require("./RoiMap"),v=m(d),c=require("./RoiLayer"),p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(this,t),this._image=e,this._options=i,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}return e(t,[{key:"fromMaxima",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},this._options,e),i=l.default.call(this._image,e);this._layers[t.label]=new p.default(i,t)}},{key:"fromPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},this._options,t),a=g.default.call(this._image,e,t);return this._layers[i.label]=new p.default(a,i),this}},{key:"putMap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new v.default(this._image,e),a=Object.assign({},this._options,t);return this._layers[a.label]=new p.default(i,a),this}},{key:"fromWaterShed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},this._options,e),i=u.default.call(this._image,e);this._layers[t.label]=new p.default(i,t)}},{key:"fromMask",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},this._options,t),a=r.default.call(this._image,e,t);return this._layers[i.label]=new p.default(a,i),this}},{key:"fromMaskConnectedComponentLabelingAlgorithm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},this._options,t),a=o.default.call(this._image,e,t);return this._layers[i.label]=new p.default(a,i),this}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},this._options,e);return this._assertLayerWithLabel(t.label),this._layers[t.label].roiMap}},{key:"rowsInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getMap(e).rowsInfo()}},{key:"colsInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getMap(e).rowsInfo()}},{key:"getRoiIds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getRois(e);if(t){for(var i=new Array(t.length),a=0;a<t.length;a++)i[a]=t[a].id;return i}throw new Error("ROIs not found")}},{key:"getRois",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.label,i=void 0===t?this._options.label:t,a=e.positive,r=void 0===a||a,n=e.negative,o=void 0===n||n,s=e.minSurface,l=void 0===s?0:s,h=e.maxSurface,u=void 0===h?Number.POSITIVE_INFINITY:h,f=e.minWidth,g=void 0===f?0:f,d=e.maxWidth,v=void 0===d?Number.POSITIVE_INFINITY:d,c=e.minHeight,p=void 0===c?0:c,m=e.maxHeight,_=void 0===m?Number.POSITIVE_INFINITY:m,y=e.minRatio,b=void 0===y?0:y,k=e.maxRatio,w=void 0===k?Number.POSITIVE_INFINITY:k;if(!this._layers[i])throw new Error("getRoi: This Roi layer ("+i+") does not exists.");for(var I=this._layers[i].roi,M=new Array(I.length),R=0,O=0;O<I.length;O++){var N=I[O];(N.id<0&&o||N.id>0&&r)&&N.surface>=l&&N.surface<=u&&N.width>=g&&N.width<=v&&N.height>=p&&N.height<=_&&N.ratio>=b&&N.ratio<=w&&(M[R++]=N)}return M.length=R,M}},{key:"getMasks",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getRois(e),i=new Array(t.length),a=0;a<t.length;a++)i[a]=t[a].getMask(e);return i}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},this._options,e);return this._assertLayerWithLabel(t.label),this._layers[t.label].roiMap.data}},{key:"paint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelProperty;this._painted||(this._painted=this._image.rgba8());var i=this.getMasks(e);if(t){var a=this.getRois(e);e.labels=a.map(function(e){return e[t]}),e.labelsPosition=a.map(function(e){return[e.meanX,e.meanY]})}return this._painted.paintMasks(i,e),this._painted}},{key:"getMask",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new i.default(this._image.width,this._image.height,{kind:"BINARY"}),a=this.getMasks(e),r=0;r<a.length;r++)for(var n=a[r],o=0;o<n.width;o++)for(var s=0;s<n.height;s++)n.getBitXY(o,s)&&t.setBitXY(o+n.position[0],s+n.position[1]);return t}},{key:"resetPainted",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).image;this._painted=e?this.image.rgba8():this._image.rgba8()}},{key:"mergeRoi",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getMap(e);return t.mergeRoi(e),this.putMap(t.data,e),this}},{key:"findCorrespondingRoi",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getRois(t),a=[],r=0;r<i.length;r++){var n=i[r],o=b(n.minX,n.minY,n.points,e,Math.sign(n.id));a.push(o)}return a}},{key:"_assertLayerWithLabel",value:function(e){if(!this._layers[e])throw new Error("no layer with label "+e)}}]),t}();function b(e,t,i,a,r){for(var n={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0},o=0;o<i.length;o++){var s=i[o],l=s[0]+e+(s[1]+t)*a.width,h=a.data[l];(h>0||h<0)&&(n.id.includes(h)?n.surface[n.id.indexOf(h)]+=1:(n.id.push(h),n.surface.push(1)))}for(var u=0;u<n.id.length;u++){Math.sign(n.id[u])===r?n.same+=n.surface[u]:n.opposite+=n.surface[u],n.roiSurfaceCovered[u]=n.surface[u]/i.length}return n.total=n.opposite+n.same,n}exports.default=y;
},{"../Image":"U4ir","./creator/fromMask":"+UGs","./creator/fromMaskConnectedComponentLabelingAlgorithm":"T3HN","./creator/fromMaxima":"8rhI","./creator/fromWaterShed":"rRKE","./creator/fromPoints":"dhNs","./RoiMap":"lGm0","./RoiLayer":"ul18"}],"U4ir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),r=require("./core/bitMethods"),i=S(r),n=require("./core/checkProcessable"),o=S(n),a=require("./core/export"),s=S(a),h=require("./core/extend"),u=require("./core/getRGBAData"),l=S(u),c=require("./core/kind"),d=require("./core/kindNames"),f=require("./core/load"),p=S(f),g=require("./core/valueMethods"),b=S(g),y=require("./extend"),m=S(y),v=require("./roi/manager"),w=S(v),k=require("./internal/getImageParameters"),x=S(k);function S(e){return e&&e.__esModule?e:{default:e}}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var M=Object.prototype.toString,P=function(){function r(t,i,n,o){if(q(this,r),1===arguments.length){var a=o=t;t=a.width,i=a.height,n=a.data}else if(n&&!n.length){n=(o=n).data}if(void 0===t&&(t=1),void 0===i&&(i=1),void 0===o&&(o={}),"object"!==(void 0===o?"undefined":e(o))||null===o)throw new TypeError("options must be an object");if(!Number.isInteger(t)||t<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new RangeError("height must be a positive integer");var s=o.kind,h=void 0===s?d.RGBA:s;if("string"!=typeof h)throw new TypeError("kind must be a string");var u=(0,c.getKind)(h),l=Object.assign({},o);for(var f in u)void 0===l[f]&&(l[f]=u[f]);(0,c.verifyKindDefinition)(l);var p=l.components,g=l.bitDepth,b=l.colorModel,y=l.alpha+0,m=t*i,v=p+y,w=32===g?Number.MAX_VALUE:Math.pow(2,g)-1;if(void 0===n)n=(0,c.createPixelArray)(m,p,y,v,g,w);else{var k=(0,c.getTheoreticalPixelArraySize)(m,v,g);if(n.length!==k)throw new RangeError("incorrect data size: "+n.length+". Should be "+k)}this.width=t,this.height=i,this.data=n,this.size=m,this.components=p,this.alpha=y,this.bitDepth=g,this.maxValue=w,this.colorModel=b,this.channels=v,this.meta=o.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:o.parent||null}),this.position=o.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}return t(r,[{key:"getRoiManager",value:function(e){return new w.default(this,e)}},{key:"clone",value:function(){var e=this.data.slice();return new r(this.width,this.height,e,this)}},{key:"apply",value:function(e){for(var t=0;t<this.height;t++)for(var r=0;r<this.width;r++){var i=(t*this.width+r)*this.channels;e.call(this,i)}}},{key:Symbol.toStringTag,get:function(){return"IJSImage"}}],[{key:"isImage",value:function(e){return"[object IJSImage]"===M.call(e)}},{key:"fromCanvas",value:function(e){var t=e.getContext("2d").getImageData(0,0,e.width,e.height);return new r(t.width,t.height,t.data)}},{key:"createFrom",value:function(e,t){var i=(0,x.default)(e);return Object.assign(i,{parent:e,position:[0,0]},t),new r(i)}}]),r}();exports.default=P,(0,b.default)(P),(0,i.default)(P),(0,s.default)(P),P.prototype.checkProcessable=o.default,P.prototype.getRGBAData=l.default,P.load=p.default,P.extendMethod=h.extendMethod,P.extendProperty=h.extendProperty,(0,m.default)(P);
},{"./core/bitMethods":"uuHZ","./core/checkProcessable":"PbRW","./core/export":"dOgB","./core/extend":"PRHq","./core/getRGBAData":"VPwp","./core/kind":"WvAL","./core/kindNames":"69CM","./core/load":"npdb","./core/valueMethods":"rla0","./extend":"lu0y","./roi/manager":"C5l4","./internal/getImageParameters":"8QIG"}],"rBBv":[function(require,module,exports) {
"use strict";function r(r,e,a){var o=new Array(e),t=void 0,i=void 0,n=void 0,d=void 0;a||(a=100),a*=-1;var s=(e-1)/2,u=2*r*r;for(t=0;t<e;t++)for(o[t]=new Array(e),d=(t-s)*(t-s),i=0;i<e;i++)n=(i-s)*(i-s),o[t][i]=Math.round(a*(1-(n+d)/u)*Math.exp(-(n+d)/u));return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.laplacianOfGaussian=r;
},{}],"6vbl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../util/kernels");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./laplacianOfGaussian");Object.defineProperty(exports,"laplacianOfGaussian",{enumerable:!0,get:function(){return r.laplacianOfGaussian}});
},{"../util/kernels":"MT1L","./laplacianOfGaussian":"rBBv"}],"a2/1":[function(require,module,exports) {
"use strict";var t=function(){self.window=self;function t(){this._listeners={}}t.prototype.on=function(t,e){if(this._listeners[t])throw new RangeError("there is already a listener for "+t);if("function"!=typeof e)throw new TypeError("callback argument must be a function");this._listeners[t]=e},t.prototype._send=function(t,e,n){void 0===n?n=[]:Array.isArray(n)||(n=[n]),self.postMessage({id:t,data:e},n)},t.prototype._trigger=function(t,e){if(!this._listeners[t])throw new Error("event "+t+" is not defined");this._listeners[t].apply(null,e)};var e=new t;self.onmessage=function(t){switch(t.data.action){case"exec":t.data.args.unshift(function(n,r){e._send(t.data.id,n,r)}),e._trigger(t.data.event,t.data.args);break;case"ping":e._send(t.data.id,"pong");break;default:throw new Error("unexpected action: "+t.data.action)}}},e=t.toString().split('"CODE";');exports.newWorkerURL=function(t,n){var r=new Blob(["(",e[0],"importScripts.apply(self, "+JSON.stringify(n)+");\n","(",t,")();",e[1],")();"],{type:"application/javascript"});return URL.createObjectURL(r)};
},{}],"W2SS":[function(require,module,exports) {
"use strict";var r=require("./workerTemplate"),t=navigator.hardwareConcurrency||1,e=Function.prototype;function i(r,e){if("string"!=typeof r&&"function"!=typeof r)throw new TypeError("func argument must be a function");if(void 0===e&&(e={}),"object"!=typeof e||null===e)throw new TypeError("options argument must be an object");this._workerCode=r.toString(),void 0===e.maxWorkers||"auto"===e.maxWorkers?this._numWorkers=Math.min(t-1,1):e.maxWorkers>0?this._numWorkers=Math.min(e.maxWorkers,t):this._numWorkers=t,this._workers=new Map,this._timeout=e.timeout||0,this._terminateOnError=!!e.terminateOnError;var i=e.deps;"string"==typeof i&&(i=[i]),Array.isArray(i)||(i=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(i)}i.prototype._init=function(t){for(var e=r.newWorkerURL(this._workerCode,t),i=0;i<this._numWorkers;i++){var n=new Worker(e);n.onmessage=this._onmessage.bind(this,n),n.onerror=this._onerror.bind(this,n),n.running=!1,n.id=i,this._workers.set(n,null)}URL.revokeObjectURL(e)},i.prototype._onerror=function(r,t){if(!this._terminated){this._working--,r.running=!1;var e=this._workers.get(r);e&&e[1](t.message),this._workers.set(r,null),this._terminateOnError?this.terminate():this._exec()}},i.prototype._onmessage=function(r,t){if(!this._terminated){this._working--,r.running=!1;var e=this._workers.get(r);e&&e[0](t.data.data),this._workers.set(r,null),this._exec()}},i.prototype._exec=function(){for(var r of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!r.running)for(var t=0;t<this._waiting.length;t++){var e=this._waiting[t];if("number"!=typeof e[4]||e[4]===r.id){this._waiting.splice(t,1),r.postMessage({action:"exec",event:e[0],args:e[1]},e[2]),r.running=!0,r.time=Date.now(),this._workers.set(r,e[3]),this._working++;break}}}},i.prototype.terminate=function(){if(!this._terminated){for(var r of this._workers)r[0].terminate(),r[1]&&r[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},i.prototype.postAll=function(r,t){if(this._terminated)throw new Error("Cannot post (terminated)");var e=[];for(var i of this._workers.keys())e.push(this.post(r,t,[],i.id));return Promise.all(e)},i.prototype.post=function(r,t,e,i){void 0===t&&(t=[]),void 0===e&&(e=[]),Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);var n=this;return new Promise(function(o,s){if(n._terminated)throw new Error("Cannot post (terminated)");n._waiting.push([r,t,e,[o,s],i]),n._exec()})},module.exports=i;
},{"./workerTemplate":"a2/1"}],"/0UQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../image/Image"),r=a(e);function a(e){return e&&e.__esModule?e:{default:e}}var n={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function t(e,r,a){r=Object.assign({},n,r);var t=this.manager;return Array.isArray(e)?Promise.all(e.map(function(e){var n=o(t,e,r);return"function"==typeof a&&n.then(a),n})):o(t,e,r)}function o(e,a,n){return e.post("data",[a,n]).then(function(e){for(var a in e)e[a]=new r.default(e[a]);return e})}function s(){worker.on("data",function(e,r,a){r=new IJS(r);var n={},t=[],o=r.grey(),s=o.sobelFilter();g("sobel",s);var i=s.level().mask({threshold:a.threshold});g("mask",i);var u=s.getRoiManager();u.fromMask(i);var l=u.getMask(a.roi);g("realMask",l);var f=o.getPixelsGrid({sampling:a.sampling,mask:l}),c=r.getBackground(f.xyS,f.zS,a.regression);g("background",c);var d=r.subtract(c);function g(e,r){a.include.includes(e)&&(n[e]=r,t.push(r.data.buffer))}n.result=d,t.push(d.data.buffer),e(n,t)})}var i={run:t,work:s};exports.default=i;
},{"../../../image/Image":"U4ir"}],"1d9C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=require("./process/background"),t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}function u(e){e.extendMethod("background",t.default)}
},{"./process/background":"/0UQ"}],"ukYk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),r=require("web-worker-manager"),t=i(r),n=require("./extend"),u=i(n);function i(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var a=function(){function r(){o(this,r),this._url=null,this._deps=[null]}return e(r,[{key:"checkUrl",value:function(){if(null===this._url)throw new Error("image worker must be initialized with an URL")}},{key:"url",get:function(){return this._url},set:function(e){if("string"!=typeof e)throw new TypeError("worker URL must be a string");this._url=e,this._deps[0]=e}}],[{key:"extendMethod",value:function(e,n){var u=void 0,i=void 0,o={};function a(){var e;u||(this.checkUrl(),i=this.url,u=new t.default(n.work,{deps:i}),o.manager=u);for(var r=arguments.length,a=Array(r),l=0;l<r;l++)a[l]=arguments[l];return(e=n.run).call.apply(e,[o].concat(a))}a.reset=function(){u&&(u.terminate(),u=new t.default(n.work,{deps:i}),o.manager=u)},r.prototype[e]=a}}]),r}();(0,u.default)(a),exports.default=new a;
},{"web-worker-manager":"W2SS","./extend":"1d9C"}],"Lse8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Worker=exports.Static=exports.Shape=exports.Stack=exports.Image=exports.default=exports.Kernel=void 0;var e=require("./stack/Stack");Object.defineProperty(exports,"Stack",{enumerable:!0,get:function(){return p(e).default}});var r=require("./util/Shape");Object.defineProperty(exports,"Shape",{enumerable:!0,get:function(){return p(r).default}});var t=require("./worker/worker");Object.defineProperty(exports,"Worker",{enumerable:!0,get:function(){return p(t).default}});var a=require("./image/Image"),o=p(a),u=require("./kernel/kernel"),n=l(u),s=require("./image/transform/greyAlgorithms"),i=require("./image/transform/mask/thresholdAlgorithms");function l(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function p(e){return e&&e.__esModule?e:{default:e}}exports.Kernel=n,exports.default=o.default,exports.Image=o.default;var f=exports.Static={grey:s.names,threshold:i.names};
},{"./image/Image":"U4ir","./kernel/kernel":"6vbl","./image/transform/greyAlgorithms":"A/sa","./image/transform/mask/thresholdAlgorithms":"O0Ww","./stack/Stack":"hMWD","./util/Shape":"/yol","./worker/worker":"ukYk"}],"IlFj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.decode_image=r,exports.decode_image_raw=t;var e=require("image-js");function r(e,r){var t=new TextDecoder("utf-8");return r?t.decode(e.data):t.decode(e.data.filter(function(e,r){return(r+1)%4!=0}))}function t(e){return e.data}
},{"image-js":"Lse8"}],"NCRw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode_string=r;var e=require("image-js"),t=4;function r(r,c){var o=r.length;if(0!=o){var u=n(o,c?t:3),h=i(r,o+a(o,u,t),c),s=document.createElement("canvas");s.width=s.height=u;var l=e.Image.fromCanvas(s);return l.data=h,l}}function n(e,t){return Math.ceil(Math.sqrt(Math.ceil(e/t)))}function a(e,t,r){var n=t*t*r;return n-e%n}function i(e,t,r){for(var n=t||e.length,a=e.length,i=new Uint8ClampedArray(n),c=0,o=0;c<n;)(c+1)%4!=0||r?o<a&&(i[c]=e[o++].charCodeAt(0)):i[c]=255,c++;return i}
},{"image-js":"Lse8"}],"Nw91":[function(require,module,exports) {
"use strict";function e(){return"text"===$("#data_format input[name=data_format]:checked").val()}function t(){return"on"===$("input[name=alpha]:checked").val()}function r(e){return e.replace("C:\\fakepath\\","")}function n(e){for(var t=e.length;t>=0&&0==e[t];t--);return e.slice(0,t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.is_text_mode=e,exports.should_use_alpha=t,exports.filename_from_path=r,exports.remove_end_nulls=n;
},{}],"dG5k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode_file_changed=l,exports.update_encode_preview=t,exports.decode_file_changed=u;var e=require("./decode"),o=require("./encode"),a=require("./misc"),d=r(a),n=require("image-js");function r(e){if(e&&e.__esModule)return e;var o={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a]);return o.default=e,o}function l(){i(function(e){t(e.target.result),$("#download_link")[0].download=d.filename_from_path($("#file_upload_encode")[0].value)})}function t(e){var a=(0,o.encode_string)(e,d.should_use_alpha());if(null!=a){var n=a.toDataURL();$("#output")[0].src=n,$("#download_link")[0].href=n}}function i(e){var o=$("#file_upload_encode")[0];if(o.files.length){var a=new FileReader;a.onload=e,a.readAsBinaryString(o.files[0])}else console.info("No files")}function u(){c(function(o){$("#decode_preview")[0].src=o.target.result,n.Image.load(o.target.result).then(function(o){var a=d.should_use_alpha();if(d.is_text_mode())$("#decoding_output").text((0,e.decode_image)(o,a));else{var n=new Blob([d.remove_end_nulls((0,e.decode_image_raw)(o))],{type:"application/octet-stream"}),r=URL.createObjectURL(n);$("#decoded_download")[0].href=r,$("#decoded_download")[0].download=d.filename_from_path($("#file_upload_decode")[0].value).replace(/\..{3}$/,"")}})})}function c(e){var o=$("#file_upload_decode")[0];if(o.files.length){var a=new FileReader;a.onload=e,a.readAsDataURL(o.files[0])}}
},{"./decode":"IlFj","./encode":"NCRw","./misc":"Nw91","image-js":"Lse8"}],"g2Hq":[function(require,module,exports) {
"use strict";var e=require("./actions"),t=n(e),o=require("./misc");function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}$(function(){$(".menu .item").tab(),$("#alpha.ui.checkbox").checkbox({onChange:function(){(0,o.is_text_mode)()?t.update_encode_preview($("#text_area")[0].value):t.encode_file_changed(),t.decode_file_changed()}}),$("#data_format .ui.radio.checkbox").checkbox({onChecked:function(){(0,o.is_text_mode)()?($("#output_section_text").show(),$("#encoding_text_input").show(),$("#encoding_file_upload").hide(),$("#output_section_file").hide(),t.decode_file_changed()):($("#output_section_text").hide(),$("#encoding_text_input").hide(),$("#encoding_file_upload").show(),$("#output_section_file").show(),t.decode_file_changed())}})}),$("#file_upload_decode").change(function(){t.decode_file_changed()}),$("#file_upload_encode").change(function(){t.encode_file_changed()}),$("#text_area").bind("input propertychange focus",function(){t.update_encode_preview(this.value)});
},{"./actions":"dG5k","./misc":"Nw91"}]},{},["g2Hq"], null)